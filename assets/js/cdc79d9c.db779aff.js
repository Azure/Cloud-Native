"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[57550],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>v});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(n),v=a,m=p["".concat(l,".").concat(v)]||p[v]||d[v]||o;return n?r.createElement(m,s(s({ref:t},c),{},{components:n})):r.createElement(m,s({ref:t},c))}));function v(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var u=2;u<o;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},68686:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var r=n(87462),a=(n(67294),n(3905));const o={slug:"21-cloudevents-via-event-grid",title:"21. CloudEvents with Event Grid",authors:["justin"],draft:!1,hide_table_of_contents:!1,toc_min_heading_level:2,toc_max_heading_level:3,keywords:["azure","serverless","event grid","logic apps","cloudevents"],image:"./img/banner.png",description:"Introducing CloudEvents, the CNCF's standard event spec, and how to consume it through Azure Event Grid, Logic Apps and Azure Functions",tags:["serverless-september","cloudevents","azure-event-grid","azure-logic-apps","azure-functions"]},s=void 0,i={permalink:"/Cloud-Native/blog/21-cloudevents-via-event-grid",source:"@site/blog/2022-09-21/index.md",title:"21. CloudEvents with Event Grid",description:"Introducing CloudEvents, the CNCF's standard event spec, and how to consume it through Azure Event Grid, Logic Apps and Azure Functions",date:"2022-09-21T00:00:00.000Z",formattedDate:"September 21, 2022",tags:[{label:"serverless-september",permalink:"/Cloud-Native/blog/tags/serverless-september"},{label:"cloudevents",permalink:"/Cloud-Native/blog/tags/cloudevents"},{label:"azure-event-grid",permalink:"/Cloud-Native/blog/tags/azure-event-grid"},{label:"azure-logic-apps",permalink:"/Cloud-Native/blog/tags/azure-logic-apps"},{label:"azure-functions",permalink:"/Cloud-Native/blog/tags/azure-functions"}],readingTime:8.155,hasTruncateMarker:!1,authors:[{name:"Justin Yoo",title:"Senior Cloud Advocate @Microsoft",url:"https://github.com/justinyoo",imageURL:"https://github.com/justinyoo.png",key:"justin"}],frontMatter:{slug:"21-cloudevents-via-event-grid",title:"21. CloudEvents with Event Grid",authors:["justin"],draft:!1,hide_table_of_contents:!1,toc_min_heading_level:2,toc_max_heading_level:3,keywords:["azure","serverless","event grid","logic apps","cloudevents"],image:"./img/banner.png",description:"Introducing CloudEvents, the CNCF's standard event spec, and how to consume it through Azure Event Grid, Logic Apps and Azure Functions",tags:["serverless-september","cloudevents","azure-event-grid","azure-logic-apps","azure-functions"]},prevItem:{title:"24. Deploy ASP.NET app to ACA",permalink:"/Cloud-Native/blog/24-aca-dotnet"},nextItem:{title:"20. Integrate with Microsoft Graph",permalink:"/Cloud-Native/blog/20-events-graph"}},l={image:n(22736).Z,authorsImageUrls:[void 0]},u=[{value:"What We&#39;ll Cover",id:"what-well-cover",level:2},{value:"What is CloudEvents?",id:"what-is-cloudevents",level:2},{value:"How Azure Event Grid brokers CloudEvents",id:"how-azure-event-grid-brokers-cloudevents",level:2},{value:"Azure Event Grid for Azure",id:"azure-event-grid-for-azure",level:3},{value:"Azure Event Grid for Systems outside Azure",id:"azure-event-grid-for-systems-outside-azure",level:3},{value:"How Azure Logic Apps consumes CloudEvents",id:"how-azure-logic-apps-consumes-cloudevents",level:2},{value:"Exercise: Try this yourself!",id:"exercise-try-this-yourself",level:2},{value:"Resources: For self-study!",id:"resources-for-self-study",level:2}],c={toc:u};function d(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("head",null,(0,a.kt)("meta",{name:"twitter:url",content:"https://azure.github.io/Cloud-Native/blog/21-cloudevents-via-event-grid"}),(0,a.kt)("meta",{name:"twitter:title",content:"#30DaysOfServerless: CloudEvents and Azure Event Grid"}),(0,a.kt)("meta",{name:"twitter:description",content:"#30DaysOfServerless: How to Consume CloudEvents via Azure Event Grid"}),(0,a.kt)("meta",{name:"twitter:image",content:"https://azure.github.io/Cloud-Native/img/banners/post-kickoff.png"}),(0,a.kt)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.kt)("meta",{name:"twitter:creator",content:"@nitya"}),(0,a.kt)("meta",{name:"twitter:site",content:"@AzureAdvocates"}),(0,a.kt)("link",{rel:"canonical",href:"https://azure.github.io/Cloud-Native/blog/21-cloudevents-via-event-grid"})),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Welcome to ",(0,a.kt)("inlineCode",{parentName:"p"},"Day 21")," of #30DaysOfServerless!"),(0,a.kt)("p",null,"We've so far walked through what ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/event-grid/overview?WT.mc_id=dotnet-75362-juyoo"},"Azure Event Grid")," is and how it generally works. Today, let's discuss how Azure Event Grid deals with ",(0,a.kt)("a",{parentName:"p",href:"https://cloudevents.io/"},"CloudEvents"),"."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"what-well-cover"},"What We'll Cover"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#what-well-cover"},"What We'll Cover")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#what-is-cloudevents"},"What is CloudEvents?")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#how-azure-event-grid-brokers-cloudevents"},"How Azure Event Grid brokers CloudEvents"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#azure-event-grid-for-azure"},"Azure Event Grid for Azure")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#azure-event-grid-for-systems-outside-azure"},"Azure Event Grid for Systems outside Azure")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#how-azure-logic-apps-consumes-cloudevents"},"How Azure Logic Apps consumes CloudEvents")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#exercise-try-this-yourself"},"Exercise: Try this yourself!")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#resources-for-self-study"},"Resources: For self-study!"))),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(22736).Z,width:"1600",height:"672"})),(0,a.kt)("hr",null),(0,a.kt)("p",null,"OK. Let's get started!"),(0,a.kt)("h2",{id:"what-is-cloudevents"},"What is CloudEvents?"),(0,a.kt)("p",null,"Needless to say, events are everywhere. Events come not only from event-driven systems but also from many different systems and devices, including IoT ones like Raspberry PI."),(0,a.kt)("p",null,"But the problem is that every event publisher (system/device that creates events) describes their events differently, meaning there is no standard way of describing events. It has caused many issues between systems, mainly from the interoperability perspective."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Consistency: No standard way of describing events resulted in developers having to write their own event handling logic for each event source."),(0,a.kt)("li",{parentName:"ol"},"Accessibility: There were no common libraries, tooling and infrastructure to deliver events across systems."),(0,a.kt)("li",{parentName:"ol"},"Productivity: The overall productivity decreases because of the lack of the standard format of events.")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Cloud Events Logo",src:n(39368).Z,width:"200",height:"200"})),(0,a.kt)("p",null,"Therefore, ",(0,a.kt)("a",{parentName:"p",href:"https://cncf.io/"},"CNCF (Cloud-Native Computing Foundation)")," has brought up the concept, called ",(0,a.kt)("a",{parentName:"p",href:"https://cloudevents.io/"},"CloudEvents"),". CloudEvents is a specification that commonly describes event data. Conforming any event data to this spec will simplify the event declaration and delivery across systems and platforms and more, resulting in a huge productivity increase."),(0,a.kt)("h2",{id:"how-azure-event-grid-brokers-cloudevents"},"How Azure Event Grid brokers CloudEvents"),(0,a.kt)("p",null,"Before CloudEvents, ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/event-grid/overview?WT.mc_id=dotnet-75362-juyoo"},"Azure Event Grid")," described events in their own way. Therefore, if you want to use Azure Event Grid, you should follow the event format/schema that Azure Event Grid declares. However, not every system/service/application follows the Azure Event Grid schema. Therefore, Azure Event Grid now supports ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/event-grid/cloudevents-schema?WT.mc_id=dotnet-75362-juyoo"},"CloudEvents spec")," as input and output formats."),(0,a.kt)("h3",{id:"azure-event-grid-for-azure"},"Azure Event Grid for Azure"),(0,a.kt)("p",null,"Take a look at the simple diagram below, which describes how Azure Event Grid captures events raised from various Azure services. In this diagram, Azure Key Vault takes the role of the event source or event publisher, and ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-overview?WT.mc_id=dotnet-75362-juyoo"},"Azure Logic Apps")," takes the role of the event handler (I'll discuss Azure Logic Apps as the event handler later in this post). We use ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/event-grid/system-topics?WT.mc_id=dotnet-75362-juyoo"},"Azure Event Grid System Topic")," for Azure."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Event Grid for Azure",src:n(31649).Z,width:"3840",height:"840"})),(0,a.kt)("p",null,"Therefore, let's create an ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/event-grid/system-topics?WT.mc_id=dotnet-75362-juyoo"},"Azure Event Grid System Topic")," that captures events raised from ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/key-vault/general/basic-concepts?WT.mc_id=dotnet-75362-juyoo"},"Azure Key Vault")," when a new version of a secret is added."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Event Grid System Topic for Key Vault",src:n(14076).Z,width:"3744",height:"1430"})),(0,a.kt)("p",null,"As Azure Event Grid makes use of the ",(0,a.kt)("a",{parentName:"p",href:"https://www.enterpriseintegrationpatterns.com/PublishSubscribeChannel.html"},"pub/sub pattern"),", you need to create the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/event-grid/concepts?WT.mc_id=dotnet-75362-juyoo#event-subscriptions"},"Azure Event Grid Subscription")," to consume the events. Here's the subscription that uses the Event Grid data format:"),(0,a.kt)("p",null,"![Azure Event Grid System Subscription for Key Vault in Event Grid Format][./img/21-cloudevents-via-event-grid-03.png]"),(0,a.kt)("p",null,"Once you create the subscription, create a new version of the secret on Azure Key Vault. Then, Azure Key Vault raises an event, which is captured in the Event Grid format:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "id": "6f44b9c0-d37e-40e7-89be-f70a6da291cc",\n    "topic": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg-aegce-krc/providers/Microsoft.KeyVault/vaults/kv-xxxxxxxx",\n    "subject": "hello",\n    "eventType": "Microsoft.KeyVault.SecretNewVersionCreated",\n    "data": {\n      "Id": "https://kv-xxxxxxxx.vault.azure.net/secrets/hello/064dfc082fec463f8d4610ed6118811d",\n      "VaultName": "kv-xxxxxxxx",\n      "ObjectType": "Secret",\n      "ObjectName": "hello",\n      "Version": "064dfc082fec463f8d4610ed6118811d",\n      "NBF": null,\n      "EXP": null\n    },\n    "dataVersion": "1",\n    "metadataVersion": "1",\n    "eventTime": "2022-09-21T07:08:09.1234567Z"\n  }\n]\n')),(0,a.kt)("p",null,"So, how is it different from the CloudEvents format? Let's take a look. According to the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/cloudevents/spec/blob/v1.0/json-format.md#23-examples"},"spec"),", the JSON data in CloudEvents might look like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id" : "C234-1234-1234",\n  "source" : "/mycontext",\n  "specversion" : "1.0",\n  "type" : "com.example.someevent",\n  "comexampleextension1" : "value",\n  "time" : "2018-04-05T17:31:00Z",\n  "datacontenttype" : "application/cloudevents+json",\n  "data" : {\n    "appinfoA" : "abc",\n    "appinfoB" : 123,\n    "appinfoC" : true\n  }\n}\n')),(0,a.kt)("p",null,"This time, let's create another subscription using the CloudEvents schema. Here's how to create the subscription against the system topic:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Event Grid System Subscription for Key Vault in CloudEvents Format",src:n(45583).Z,width:"3744",height:"2017"})),(0,a.kt)("p",null,"Therefore, Azure Key Vault emits the event data in the CloudEvents format:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "6f44b9c0-d37e-40e7-89be-f70a6da291cc",\n  "source": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/rg-aegce-krc/providers/Microsoft.KeyVault/vaults/kv-xxxxxxxx",\n  "specversion": "1.0",\n  "type": "Microsoft.KeyVault.SecretNewVersionCreated",\n  "subject": "hello",\n  "time": "2022-09-21T07:08:09.1234567Z",\n  "data": {\n    "Id": "https://kv-xxxxxxxx.vault.azure.net/secrets/hello/064dfc082fec463f8d4610ed6118811d",\n    "VaultName": "kv-xxxxxxxx",\n    "ObjectType": "Secret",\n    "ObjectName": "hello",\n    "Version": "064dfc082fec463f8d4610ed6118811d",\n    "NBF": null,\n    "EXP": null\n  }\n}\n')),(0,a.kt)("p",null,"Can you identify some differences between the Event Grid format and the CloudEvents format? Fortunately, both Event Grid schema and CloudEvents schema look similar to each other. But they might be significantly different if you use a different event source outside Azure."),(0,a.kt)("h3",{id:"azure-event-grid-for-systems-outside-azure"},"Azure Event Grid for Systems outside Azure"),(0,a.kt)("p",null,"As mentioned above, the event data described outside Azure or your own applications within Azure might not be understandable by Azure Event Grid. In this case, we need to use ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/event-grid/custom-topics?WT.mc_id=dotnet-75362-juyoo"},"Azure Event Grid Custom Topic"),". Here's the diagram for it:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Event Grid for Applications outside Azure",src:n(77274).Z,width:"3840",height:"840"})),(0,a.kt)("p",null,"Let's create the Azure Event Grid Custom Topic. When you create the topic, make sure that you use the CloudEvent schema during the provisioning process:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Event Grid Custom Topic",src:n(43103).Z,width:"3744",height:"2018"})),(0,a.kt)("p",null,"If your application needs to publish events to Azure Event Grid Custom Topic, your application should build the event data in the CloudEvents format. If you use a .NET application, add the ",(0,a.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/Azure.Messaging.EventGrid"},"NuGet package")," first."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"dotnet add package Azure.Messaging.EventGrid\n")),(0,a.kt)("p",null,"Then, create the publisher instance. You've already got the topic endpoint URL and the access key."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},'var topicEndpoint = new Uri("<Azure Event Grid Custom Topic Endpoint URL>");\nvar credential = new AzureKeyCredential("<Azure Event Grid Custom Topic Access Key>");\nvar publisher = new EventGridPublisherClient(topicEndpoint, credential);\n')),(0,a.kt)("p",null,"Now, build the event data like below. Make sure that you follow the CloudEvents schema that requires additional metadata like event source, event type and content type."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},'var source = "/your/event/source";\nvar type = "com.source.event.your/OnEventOccurs";\n\nvar data = new MyEventData() { Hello = "World" };\n\nvar @event = new CloudEvent(source, type, data);\n')),(0,a.kt)("p",null,"And finally, send the event to Azure Event Grid Custom Topic."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},"await publisher.SendEventAsync(@event);\n")),(0,a.kt)("p",null,"The captured event data looks like the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "cc2b2775-52b8-43b8-a7cc-c1c33c2b2e59",\n  "source": "/your/event/source",\n  "type": "com.source.event.my/OnEventOccurs",\n  "data": {\n    "Hello": "World"\n  },\n  "time": "2022-09-21T07:08:09.1234567+00:00",\n  "specversion": "1.0"\n}\n')),(0,a.kt)("p",null,"However, due to limitations, someone might insist that their existing application doesn't or can't emit the event data in the CloudEvents format. In this case, what should we do? There's no standard way of sending the event data in the CloudEvents format to Azure Event Grid Custom Topic. One of the approaches we may be able to apply is to put a converter between the existing application and Azure Event Grid Custom Topic like below:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Event Grid for Applications outside Azure with Converter",src:n(26712).Z,width:"3840",height:"840"})),(0,a.kt)("p",null,"Once the Function app (or any converter app) receives legacy event data, it internally converts the CloudEvents format and publishes it to Azure Event Grid."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},"var data = default(MyRequestData);\nusing (var reader = new StreamReader(req.Body))\n{\n    var serialised = await reader.ReadToEndAsync();\n    data = JsonConvert.DeserializeObject<MyRequestData>(serialised);\n}\n\nvar converted = new MyEventData() { Hello = data.Lorem };\nvar @event = new CloudEvent(source, type, converted);\n")),(0,a.kt)("p",null,"The converted event data is captured like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "df296da3-77cd-4da2-8122-91f631941610",\n  "source": "/your/event/source",\n  "type": "com.source.event.my/OnEventOccurs",\n  "data": {\n    "Hello": "ipsum"\n  },\n  "time": "2022-09-21T07:08:09.1234567+00:00",\n  "specversion": "1.0"\n}\n')),(0,a.kt)("p",null,"This approach is beneficial in many integration scenarios to make all the event data canonicalised."),(0,a.kt)("h2",{id:"how-azure-logic-apps-consumes-cloudevents"},"How Azure Logic Apps consumes CloudEvents"),(0,a.kt)("p",null,"I put ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-overview?WT.mc_id=dotnet-75362-juyoo"},"Azure Logic Apps")," as the event handler in the previous diagrams. According to the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/cloudevents/spec/blob/v1.0/http-webhook.md#4-abuse-protection"},"CloudEvents spec"),", each event handler must implement request validation to avoid abuse. One good thing about using Azure Logic Apps is that it has already implemented this request validation feature. It implies that we just subscribe to the topic and consume the event data."),(0,a.kt)("p",null,"Create a new Logic Apps instance and add the HTTP Request trigger. Once it saves, you will get the endpoint URL."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Logic Apps with HTTP Request Trigger",src:n(37572).Z,width:"3744",height:"2018"})),(0,a.kt)("p",null,"Then, create the Azure Event Grid Subscription with:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Endpoint type: Webhook"),(0,a.kt)("li",{parentName:"ul"},"Endpoint URL: The Logic Apps URL from above.")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Logic Apps with HTTP Request Trigger",src:n(7877).Z,width:"3744",height:"2018"})),(0,a.kt)("p",null,"Once the subscription is ready, this Logic Apps works well as the event handler. Here's how it receives the CloudEvents data from the subscription."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure Logic Apps that Received CloudEvents data",src:n(34051).Z,width:"3744",height:"2018"})),(0,a.kt)("p",null,"Now you've got the CloudEvents data. It's entirely up to you to handle that event data however you want!"),(0,a.kt)("h2",{id:"exercise-try-this-yourself"},"Exercise: Try this yourself!"),(0,a.kt)("p",null,"You can fork this ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/justinyoo/azure-event-grid-cloudevents-sample"},"GitHub repository"),' to your account and play around with it to see how Azure Event Grid with CloudEvents works. Alternatively, the "Deploy to Azure" button below will provision all necessary Azure resources and deploy an Azure Functions app to mimic the event publisher.'),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fjustinyoo%2Fazure-event-grid-cloudevents-sample%2Fmain%2FResources%2Fazuredeploy.json"},(0,a.kt)("img",{parentName:"a",src:"https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/1-CONTRIBUTION-GUIDE/images/deploytoazure.svg?sanitize=true",alt:"Deploy To Azure"}))),(0,a.kt)("h2",{id:"resources-for-self-study"},"Resources: For self-study!"),(0,a.kt)("p",null,"Want to know more about CloudEvents in real-life examples? Here are several resources you can take a look at:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://techcommunity.microsoft.com/t5/apps-on-azure-blog/azure-cli-for-eventgrid-subscription-to-custom-topic/ba-p/2038834?WT.mc_id=dotnet-75362-juyoo"},"Azure CLI for EventGrid Subscription to Custom Topic")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://techcommunity.microsoft.com/t5/apps-on-azure-blog/cloudevents-for-azure-eventgrid-via-azure-functions/ba-p/2048140?WT.mc_id=dotnet-75362-juyoo"},"CloudEvents for Azure EventGrid via Azure Functions")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://techcommunity.microsoft.com/t5/apps-on-azure-blog/websub-to-eventgrid-via-cloudevents-and-beyond/ba-p/2092709?WT.mc_id=dotnet-75362-juyoo"},"WebSub to EventGrid via CloudEvents, and Beyond")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://techcommunity.microsoft.com/t5/apps-on-azure-blog/event-driven-keyvault-secrets-rotation-management/ba-p/2187249?WT.mc_id=dotnet-75362-juyoo"},"Event-Driven KeyVault Secrets Rotation Management"))))}d.isMDXComponent=!0},31649:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-01-694e11ff4422f7f4f28ae03f08580170.png"},14076:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-02-534038bbd75d4593fb17b225b4ed3d0a.png"},45583:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-04-b80d8235ced38e84b57edcf3897aa6a3.png"},77274:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-05-3302c0aa7803104c5fcd4efd83b7f112.png"},43103:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-06-240c34d97c26b9175b4d6f05c88bbddb.png"},26712:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-07-f7192ae5bffc82738d60b79649a643bd.png"},37572:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-08-8eb13d8f2eb780c1ac54987644c832cd.png"},7877:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-09-f4132c208e6f6a4ce229c6d907cdd061.png"},34051:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/21-cloudevents-via-event-grid-10-0d9e5e1baa7b398319a99d651d91cf61.png"},22736:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/banner-44903533e9d0b0bdac7d242027cc0694.png"},39368:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/cloudevents-icon-color-eb63959a4ce7e47461aba884b786ae9b.png"}}]);