<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-blog-30daysofIA" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">21 posts tagged with &quot;community-buzz&quot; | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" property="og:url" content="https://azure.github.io/cloud-native/30daysofia/powering-intelligent-apps-with-azure-cosmos-db-2"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:title" content="Build Intelligent Apps! | Build AI Apps On Azure"><meta data-rh="true" property="og:description" content="Explore the power of multi-model databases for Intelligent Apps and their integration with Azure Cosmos DB and Azure Kubernetes Service (AKS)."><meta data-rh="true" property="og:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/30daysofIA/powering-intelligent-apps-with-azure-cosmos-db-2"><meta data-rh="true" name="twitter:title" content="Build Intelligent Apps! | Build AI Apps On Azure"><meta data-rh="true" name="twitter:description" content="2-4. Explore the power of multi-model databases for Intelligent Apps and their integration with Azure Cosmos DB and Azure Kubernetes Service (AKS)"><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@devanshidiaries"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/30DaysOfIA/tags/community-buzz/page/11" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/30DaysOfIA/tags/community-buzz/page/11" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/30daysofIA/powering-intelligent-apps-with-azure-cosmos-db-2"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30-days-of-ia-2024/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30-days-of-ia-2024/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.997213e8.css">
<script src="/Cloud-Native/assets/js/runtime~main.78e3a7a4.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.dc5cff7b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/Cloud-Native/"></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarBackground_Iz1u"><div class="container"><div class="row"><div class="col col--8 col--offset-2 announcementBarContainer_QNjo"><div class="col-demo"><p class="announcementBarContent_tvcd">Join Demo Bytes to learn how to <a class="announcementLink_qKCm" target="_blank" href="https://aka.ms/demo-bytes/ep7?ocid=biafy25h1_demobytes_webpage_azuremktg" data-bi-area="AnnouncementBar" data-bi-name="Announcement">configure and deploy Intelligent Java SpringBoot Apps</a> | Give us a ðŸŒŸ <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></p></div></div><div class="col col--2 announcementBarIconContainer_GQot"><div class="col-demo"><a href="https://github.com/azure/cloud-native" target="_blank" class="icon_QeTG" aria-label="Visit us on GitHub"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" class="icon_QeTG" aria-label="Subscribe to RSS"><svg width="24" height="24" viewBox="0 0 333333 333333" xmlns="http://www.w3.org/2000/svg" fill="#f49c4f"><path d="M166667 0c92048 0 166667 74619 166667 166667s-74619 166667-166667 166667S0 258715 0 166667 74619 0 166667 0zm-57698 203357c-11551 0-20938 9418-20938 20897 0 11537 9386 20857 20938 20857 11587 0 20967-9320 20967-20857 0-11479-9378-20897-20967-20897zm-20918-61899v30148c19632 0 38081 7677 51977 21585 13883 13868 21548 32406 21548 52114h30276c0-57254-46585-103838-103801-103838v-9zm38-53431v30154c70007 0 126979 57031 126979 127116l30235 3c0-86697-70539-157270-157212-157270l-2-3z"></path></svg></a><svg viewBox="0 0 24 24" width="24" height="24" class="icon_Kj6K"><path fill="white" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#30DaysOfIA</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/kick-off">Kick-off #30DaysofIA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/demystifying-intelligent-applications">1-1. Demystifying Intelligent Applications</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/harnessing-the-power-of-intelligent-apps">1-2. Harnessing the Power of Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/reimagine-app-development-with-ai">1-3. Reimagine App Development with AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/how-digital-natives-leverage-generative-ai">1-4. How Digital Natives leverage Generative AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/preparing-the-path-for-intelligent-apps">1-5. Preparing the Path for Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/cultivating-a-culture-for-intelligent-apps">1-6. Cultivating a Culture for Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/build-your-first-intelligent-app-with-azure-ai-and-aks-1">2-1. Build Your First Intelligent App with Azure AI and AKS (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/build-your-first-intelligent-app-with-azure-ai-and-aks-2">2-2. Build Your First Intelligent App with Azure AI and AKS (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/powering-intelligent-apps-with-azure-cosmos-db-1">2-3. Powering Intelligent Apps with Azure Cosmos DB (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/powering-intelligent-apps-with-azure-cosmos-db-2">2-4. Powering Intelligent Apps with Azure Cosmos DB (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/scaling-intelligent-apps-on-azure-kubernetes-services-1">2-5. Scaling Intelligent Apps on Azure Kubernetes Services (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/scaling-intelligent-apps-on-azure-kubernetes-services-2">2-6. Scaling Intelligent Apps on Azure Kubernetes Services (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/deploy-an-intelligent-app-on-azure-container-apps-1">3-1. Deploy an Intelligent App on Azure Container Apps (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/deploy-an-intelligent-app-on-azure-container-apps-2">3-2. Deploy an Intelligent App on Azure Container Apps (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/taking-intelligent-apps-to-the-next-level-implementing-advanced-features-with-azure-machine-learning-1">3-3. Taking Intelligent Apps to the Next Level - Implementing Advanced Features with Azure Machine Learning (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/taking-intelligent-apps-to-the-next-level-implementing-advanced-features-with-azure-machine-learning-2">3-4. Taking Intelligent Apps to the Next Level - Implementing Advanced Features with Azure Machine Learning (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/building-an-ai-powered-logo-variation-generator-with-azure-openai-and-aks-1">4-1. Building an AI-Powered Logo Variation Generator with Azure OpenAI and AKS (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/building-an-ai-powered-logo-variation-generator-with-azure-openai-and-aks-2">4-2. Building an AI-Powered Logo Variation Generator with Azure OpenAI and AKS (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/fortifying-cybersecurity-using-intelligent-apps-on-aks-1">4-3. Fortifying Cybersecurity Using Intelligent Apps on AKS (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/30DaysOfIA/fortifying-cybersecurity-using-intelligent-apps-on-aks-2">4-4. Fortifying Cybersecurity Using Intelligent Apps on AKS (2)</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>21 posts tagged with &quot;community-buzz&quot;</h1><a href="/Cloud-Native/30DaysOfIA/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Explore the power of multi-model databases for Intelligent Apps and their integration with Azure Cosmos DB and Azure Kubernetes Service (AKS)."><link itemprop="image" href="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta itemprop="keywords" content="Cloud,Data,AI,AI/ML,intelligent apps,cloud-native,30-days,enterprise apps,digital experiences,app modernization,serverless,ai apps,data"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/Cloud-Native/30DaysOfIA/powering-intelligent-apps-with-azure-cosmos-db-2">2-4. Powering Intelligent Apps with Azure Cosmos DB (2)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-03T09:01:00.000Z" itemprop="datePublished">October 3, 2023</time> Â· <!-- -->14 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://azure.github.io/Cloud-Native/img/logo-ms-cloud-native.png" alt="It&#x27;s 30DaysOfIA" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">It&#x27;s 30DaysOfIA</span></a></div><small class="avatar__subtitle" itemprop="description">BuildIA Content Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p>In this article, continue to explore the power of multi-model databases for Intelligent Apps and their integration with Azure Cosmos DB and Azure Kubernetes Service (AKS).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-well-cover">What We&#x27;ll Cover:<a href="#what-well-cover" class="hash-link" aria-label="Direct link to What We&#x27;ll Cover:" title="Direct link to What We&#x27;ll Cover:">â€‹</a></h2>
<ul>
<li>Loading OCR Data into the Multi-Model Database</li>
<li>Configuring the Intelligent App to Use Cosmos DB</li>
<li>Testing the app locally and deploying to AKS</li>
</ul>
<p><img loading="lazy" alt="image of a multi-model database" src="/Cloud-Native/assets/images/blog-image-4-1-63886f49574e526b8fbf4d7e333c89da.png" width="624" height="380" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="powering-intelligent-apps-with-a-multi-model-database-using-cosmos-db-and-azure-kubernetes-service-2-">Powering Intelligent Apps with a Multi-Model Database Using Cosmos DB and Azure Kubernetes Service (2) â€¯<a href="#powering-intelligent-apps-with-a-multi-model-database-using-cosmos-db-and-azure-kubernetes-service-2-" class="hash-link" aria-label="Direct link to Powering Intelligent Apps with a Multi-Model Database Using Cosmos DB and Azure Kubernetes Service (2) â€¯" title="Direct link to Powering Intelligent Apps with a Multi-Model Database Using Cosmos DB and Azure Kubernetes Service (2) â€¯">â€‹</a></h2>
<p>In the <a href="https://azure.github.io/Cloud-Native/30daysofIA/build-your-first-intelligent-app-with-azure-ai-and-aks-1" target="_blank" rel="noopener noreferrer">first article of this week</a>, we created an Intelligent App that helped us analyze images and extract valuable data. We constructed a Python web API to execute <a href="https://learn.microsoft.com/azure/ai-services/computer-vision/overview-ocr?WT.mc_id=javascript-99907-ninarasi" target="_blank" rel="noopener noreferrer">optical character recognition</a> (OCR) on images uploaded to the application using <a href="https://azure.microsoft.com/products/cognitive-services/vision-services?WT.mc_id=javascript-99907-ninarasi" target="_blank" rel="noopener noreferrer">Azure AI Vision</a> and <a href="https://azure.microsoft.com/products/kubernetes-service?WT.mc_id=javascript-99907-ninarasi" target="_blank" rel="noopener noreferrer">Azure Kubernetes Service</a> (AKS) for hosting the application.</p>
<p>In continuation of the <a href="https://azure.github.io/Cloud-Native/30daysofIA/powering-intelligent-apps-with-azure-cosmos-db-1" target="_blank" rel="noopener noreferrer">previous article</a>, weâ€™ll continue to explore how Azure Cosmos DBâ€™s support for multi-model databases provides flexibility in data modeling, scalability, and performance optimizationâ€”crucial for storing, indexing, and querying data in multiple formats.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="loading-ocr-data-into-the-multi-model-database">Loading OCR Data into the Multi-Model Database<a href="#loading-ocr-data-into-the-multi-model-database" class="hash-link" aria-label="Direct link to Loading OCR Data into the Multi-Model Database" title="Direct link to Loading OCR Data into the Multi-Model Database">â€‹</a></h2>
<p>Once weâ€™ve created our Cosmos DB account and configured our containers, we can access them using the Azure Cosmos DB API with the appropriate host URI and key. You can find these credentials by selecting <strong>Keys</strong> on the sidebar, like in the image below:</p>
<p><img loading="lazy" alt="image of selecting Keys in sidebar of Cosmos DB account" src="/Cloud-Native/assets/images/blog-image-4-2-7df307d73bcc223ef4cbfdd823f07ebb.png" width="624" height="544" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-intelligent-app-to-use-cosmos-db">Configuring the Intelligent App to Use Cosmos DB<a href="#configuring-the-intelligent-app-to-use-cosmos-db" class="hash-link" aria-label="Direct link to Configuring the Intelligent App to Use Cosmos DB" title="Direct link to Configuring the Intelligent App to Use Cosmos DB">â€‹</a></h3>
<p>Now, we must provide the app with our Cosmos DB database credentials. Weâ€™ll do this using the environment variables in the deployment configuration file created in the first part of this series.</p>
<p>Open the <code>deployment.yml</code> file (in the <code>Deployment</code> folder) and add the following environment variables matching your Cosmos DB account information:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- name: COSMOS_ACCOUNT_CONNECTION_STRING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value: &lt;YOUR-COSMOS-ACCOUNT-PRIMARY-CONNECTION-STRING&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: COSMOS_ACCOUNT_HOST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value: &lt;YOUR-COSMOS-ACCOUNT-URI&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: COSMOS_ACCOUNT_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value: &lt;YOUR-COSMOS-ACCOUNT-PRIMARY-KEY&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: COSMOS_DATABASE_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value: IntelligentAppDB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: COSMOS_IMAGE_ANALYSIS_CONTAINER_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value: ImageAnalysisContainer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: COSMOS_AGGREGATE_RESULTS_CONTAINER_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value: AggregateResultsContainer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, open the <code>docker-compose.yml</code> file and add the following environment variables, copying the same values you defined above:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      - COSMOS_ACCOUNT_CONNECTION_STRING=&lt;YOUR-COSMOS-ACCOUNT-PRIMARY-CONNECTION-STRING&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - COSMOS_ACCOUNT_HOST=&lt;YOUR-COSMOS-ACCOUNT-URI&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - COSMOS_ACCOUNT_KEY=&lt;YOUR-COSMOS-ACCOUNT-PRIMARY-KEY&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - COSMOS_DATABASE_ID=IntelligentAppDB </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - COSMOS_IMAGE_ANALYSIS_CONTAINER_ID=ImageAnalysisContainer </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - COSMOS_AGGREGATE_RESULTS_CONTAINER_ID=AggregateResultsContainer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="diverse-data-and-cosmos-db-a-perfect-match">Diverse Data and Cosmos DB: A Perfect Match<a href="#diverse-data-and-cosmos-db-a-perfect-match" class="hash-link" aria-label="Direct link to Diverse Data and Cosmos DB: A Perfect Match" title="Direct link to Diverse Data and Cosmos DB: A Perfect Match">â€‹</a></h3>
<p>The diverse and often unstructured nature of OCR data finds an ideal match in the flexible structure of a multi-model database like Azure Cosmos DB for NoSQL. OCR data frequently encompasses many document types, varying layouts, languages, and formatting styles, making it inherently challenging to impose a rigid schema.</p>
<p>The picture below represents the varying data layouts weâ€™ll encounter in this article. The left-hand picture shows <strong>Data from OCR analysis</strong>, which contains AI-generated descriptions of the image, plus the characters read and their positions within it. The right-hand picture shows <strong>Data from aggregation</strong>â€”the numeric operations performed on the numbers read.</p>
<p><img loading="lazy" alt="image of selecting Keys in sidebar of Cosmos DB account" src="/Cloud-Native/assets/images/blog-image-4-3-62d7f6ef9a34751d686a2c82c89557ed.png" width="624" height="282" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementing-the-cosmosdbhelper-class">Implementing the CosmosDBHelper Class<a href="#implementing-the-cosmosdbhelper-class" class="hash-link" aria-label="Direct link to Implementing the CosmosDBHelper Class" title="Direct link to Implementing the CosmosDBHelper Class">â€‹</a></h3>
<p>We need a Python class to provide a convenient way to interact with our Azure Cosmos DB service. It will encapsulate the necessary operations for creating and managing documents within the <code>ImageAnalysisContainer</code> and the <code>AggregateResultsContainer</code>.</p>
<p>Letâ€™s create a file named <code>CosmosDBHelper.py</code> in the project root folder with the following contents:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import os </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import azure.cosmos.cosmos_client as cosmos_client </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CosmosDBHelper: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.cosmos_database_id = os.environ[&quot;COSMOS_DATABASE_ID&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.cosmos_image_analysis_container_id = os.environ[&quot;COSMOS_IMAGE_ANALYSIS_CONTAINER_ID&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.cosmos_aggregate_results_container_id = os.environ[&quot;COSMOS_AGGREGATE_RESULTS_CONTAINER_ID&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cosmos_account_host = os.environ[&quot;COSMOS_ACCOUNT_HOST&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cosmos_account_key = os.environ[&quot;COSMOS_ACCOUNT_KEY&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.client = cosmos_client.CosmosClient(cosmos_account_host, {&#x27;masterKey&#x27;: cosmos_account_key})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â€¯ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def create_analysis(self, document):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db = self.client.get_database_client(self.cosmos_database_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container = db.get_container_client(self.cosmos_image_analysis_container_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return container.upsert_item(document)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def create_aggregate_result(self, inserted_id, aggregate_result):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db = self.client.get_database_client(self.cosmos_database_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container = db.get_container_client(self.cosmos_aggregate_results_container_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entity = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: inserted_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;sum&quot;: float(aggregate_result[&quot;sum&quot;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;average&quot;: float(aggregate_result[&quot;average&quot;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;median&quot;: float(aggregate_result[&quot;median&quot;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;min&quot;: float(aggregate_result[&quot;min&quot;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;max&quot;: float(aggregate_result[&quot;max&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return container.upsert_item(entity)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s break down the code step by step, detailing the process of transferring the OCR-extracted data into the Cosmos DB database.</p>
<p>The <code>azure.cosmos.cosmos_client</code> module imported at the beginning of the file represents the Azure Cosmos DB for NoSQL client library for Python. We use it to interact with the Azure Cosmos DB service.</p>
<p>The <code>CosmosDBHelper</code> class constructor initializes the class instance and retrieves configuration values from the environment variables we configured in the previous section:</p>
<ul>
<li><code>COSMOS_DATABASE_ID</code>â€”The ID of the Cosmos DB database</li>
<li><code>COSMOS_IMAGE_ANALYSIS_CONTAINER_ID</code>â€”The ID of the container for storing image analysis documents</li>
<li><code>COSMOS_AGGREGATE_RESULTS_CONTAINER_ID</code>â€”The ID of the container for storing aggregate result documents</li>
<li><code>COSMOS_ACCOUNT_HOST</code>â€”The host URL for the Cosmos DB account</li>
<li><code>COSMOS_ACCOUNT_KEY</code>â€”The authentication key for the Cosmos DB account</li>
</ul>
<p>The class constructor also creates a <code>CosmosClient</code> instance using the provided account host and key, which weâ€™ll use in the methods below:</p>
<ul>
<li>
<p>The <code>create_analysis</code> method inserts or updates an image analysis document into the <code>ImageAnalysisContainer</code> container. It takes the document parameter, which represents the structured analysis data, to be inserted or updated. This method first fetches the database client using the provided database ID and the previously created Cosmos Client instance. Then, it fetches the container client for image analysis using the provided container ID. Finally, the <code>create_analysis</code> method calls the <code>upsert_item</code> method on the container client to insert or update the supplied document.</p>
</li>
<li>
<p>The <code>create_aggregate_result</code> method inserts or updates an aggregate result document into the specified container. It takes two arguments: <code>inserted_id</code> (the documentâ€™s ID) and <code>aggregate_result</code> (a dictionary containing aggregated data like sum, average, median, min, and max). Similarly to the previous method, it fetches the database and container clients. Finally, the <code>create_aggregate_result</code> constructs an entity dictionary with the provided data and uses the <code>upsert_item</code> method to insert or update the entity in the <code>AggregateResultsContainer</code> container.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introducing-new-ocr-helper-functions">Introducing New OCR Helper Functions<a href="#introducing-new-ocr-helper-functions" class="hash-link" aria-label="Direct link to Introducing New OCR Helper Functions" title="Direct link to Introducing New OCR Helper Functions">â€‹</a></h3>
<p>We need some additional Python functions to process and insert image analysis results into a Cosmos DB using the CosmosDBHelper class from the previous explanation. First, open the <code>ocr_helper.py</code> file from the first part of this series and add these import statements at the top of the file:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from CosmosDBHelper import CosmosDBHelper</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, locate these lines in the <code>ocr_helper.py</code> file:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ocr_result = get_ocr_result(result) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return ocr_result </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Replace these lines with:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ocr_result = get_ocr_result(result)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  analysis_result = get_image_analysis_result(result, source_image)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ocr_result[&quot;analysis_result&quot;] = analysis_result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inserted_id = insert_analysis(ocr_result[&quot;analysis_result&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  insert_aggregate_result(inserted_id, ocr_result[&quot;aggregate_result&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return ocr_result</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Last, add the <code>get_image_analysis_result</code>, <code>insert_aggregate_result</code>, and <code>insert_analysis</code> functions:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def get_image_analysis_result(result, source_image):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  analysis_result = { }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string_list = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if result.reason != sdk.ImageAnalysisResultReason.ANALYZED:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sdk.ImageAnalysisErrorDetails.from_result(result)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if result.caption is not None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        analysis_result[&quot;caption&quot;] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      &quot;content&quot;: result.caption.content, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      &quot;confidence&quot;: result.caption.confidence </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      }        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        analysis_result[&quot;text&quot;] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      &quot;lines&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if result.text is not None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      for line in result.text.lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        line_result = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;content&quot;: line.content,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;bounding_polygon&quot;: line.bounding_polygon,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;words&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for word in line.words:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          word_result = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          &quot;content&quot;: word.content,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          &quot;bounding_polygon&quot;: word.bounding_polygon,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          &quot;confidence&quot;: word.confidence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          string_list.append(word.content)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          line_result[&quot;words&quot;].append(word_result)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        document_id = os.path.basename(source_image).rsplit(&#x27;.&#x27;, 1)[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        analysis_result[&quot;file_name&quot;] = source_image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        analysis_result[&quot;text&quot;][&quot;lines&quot;].append(line_result)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        analysis_result[&quot;id&quot;] = document_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        analysis_result[&quot;partitionKey&quot;] = &quot;Partition1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return analysis_result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def insert_aggregate_result(inserted_id, aggregate_result):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db_helper = CosmosDBHelper()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db_helper.create_aggregate_result(inserted_id, aggregate_result)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def insert_analysis(analysis_result):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db_helper = CosmosDBHelper()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doc = db_helper.create_analysis(analysis_result)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return str(doc[&quot;id&quot;])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s examine each function step by step.</p>
<ul>
<li>
<p>The <code>get_image_analysis_result</code> function takes two parameters: <code>result</code>, an image analysis result object, and <code>source_image</code>, the path to the source image. This function is responsible for the format transformation and data loading process: It creates an empty dictionary, <code>analysis_result</code>, and an empty list, <code>string_list</code>, to store words extracted from the text analysis. It checks if the <code>reason</code> attribute of the result indicates that the image has been successfully analyzed (not an error). The function iterates through each line in <code>result.text.lines</code> and processes the lineâ€™s content, bounding polygon, and words. In the end, the function returns the populated analysis_result dictionary.</p>
</li>
<li>
<p>The <code>insert_aggregate_result</code> function takes two parameters: <code>inserted_id</code>, the ID of the inserted document, and aggregate_result, a dictionary containing aggregated analysis results (sum, average, median, min, max). It initializes an instance of the <code>CosmosDBHelper</code> class called <code>db_helper</code>. It calls the <code>create_aggregate_result</code> method of <code>db_helper</code> to insert the provided <code>aggregate_result</code> into the <code>AggregateResultsContainer</code> container.</p>
</li>
<li>
<p>The <code>insert_analysis</code> function takes one parameter: <code>analysis_result</code>, a dictionary containing the image analysis results. It initializes an instance of the <code>CosmosDBHelper</code> class called <code>db_helper</code>. It then calls the <code>create_analysis</code> method of db_helper to insert the provided <code>analysis_result</code> into the Analysis Results container. The ID of the inserted document is retrieved from the returned document and converted to a string before being returned from the function.</p>
</li>
</ul>
<p>The steps above highlight how the diverse and unstructured nature of OCR data, which we obtained from the Azure AI for Vision configured in the first article of this series, fits well with the flexible structure of a multi-model database.</p>
<p>Now, open your terminal and run the command below to reinstall all the packages added in the first part of this series:</p>
<p><code>pip install -r requirements.txt</code></p>
<p>Then, run the following commands to install the packages related to Azure Cosmos DB:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install azure-cosmos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install azure-data-tables</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finally, update the <code>requirements.txt</code> file with the current package list:</p>
<p><code>pip freeze &gt; requirements.txt</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-intelligent-app-locally">Testing the Intelligent App Locally<a href="#testing-the-intelligent-app-locally" class="hash-link" aria-label="Direct link to Testing the Intelligent App Locally" title="Direct link to Testing the Intelligent App Locally">â€‹</a></h2>
<p>As in Part 1 of this series, run the following command in the terminal to build the image and start a container for the Intelligent App services defined in <code>docker-compose.yml</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose up --build --force-recreate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To test the API, open Postman and provide the fields as follows:</p>
<ul>
<li><strong>URL</strong>: <a href="http://localhost:5000/" target="_blank" rel="noopener noreferrer">http://localhost:5000/</a></li>
<li><strong>Method</strong>: POST</li>
<li><strong>Body</strong>:<!-- -->
<ul>
<li><strong>Form-data</strong>
<ul>
<li><strong>Key</strong>: fileâ€”Click the right end of the <strong>Key</strong> field and select â€œFileâ€ from the dropdown list.</li>
<li><strong>Value</strong>: Click <strong>Select Files</strong>, then select the <strong>sample1.png</strong> file provided in the sample code.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img loading="lazy" alt="image of test in localhost" src="/Cloud-Native/assets/images/blog-image-4-4-d7d7da014082737ce540ad6faa11a47f.png" width="624" height="169" class="img_ev3q"></p>
<p>Now click the <strong>Send</strong> button and review the result in <strong>Body</strong>:</p>
<p><code>&quot;{\&quot;aggregate_result\&quot;: {\&quot;sum\&quot;: \&quot;25821\&quot;, \&quot;average\&quot;: \&quot;5164.2\&quot;, \&quot;median\&quot;: \&quot;5622\&quot;, \&quot;min\&quot;: \&quot;1447\&quot;, \&quot;max\&quot;: \&quot;9802\&quot;}, \&quot;numbers_read\&quot;: [\&quot;3049\&quot;, \&quot;5901\&quot;, \&quot;5622\&quot;, \&quot;1447\&quot;, \&quot;9802\&quot;], \&quot;analysis_result\&quot;: {\&quot;caption\&quot;: {\&quot;content\&quot;: \&quot;a yellow rectangular sign with black numbers\&quot;, \&quot;confidence\&quot;: 0.7065904140472412}, \&quot;text\&quot;: {\&quot;lines\&quot;: [{\&quot;content\&quot;: \&quot;3049\&quot;, \&quot;bounding_polygon\&quot;: [69.0, 14.0, 144.0, 13.0, 143.0, 38.0, 70.0, 39.0], \&quot;words\&quot;: [{\&quot;content\&quot;: \&quot;3049\&quot;, \&quot;bounding_polygon\&quot;: [69.0, 14.0, 139.0, 13.0, 140.0, 38.0, 69.0, 39.0], \&quot;confidence\&quot;: 0.991}]}, {\&quot;content\&quot;: \&quot;5901\&quot;, \&quot;bounding_polygon\&quot;: [70.0, 54.0, 142.0, 54.0, 141.0, 78.0, 70.0, 79.0], \&quot;words\&quot;: [{\&quot;content\&quot;: \&quot;5901\&quot;, \&quot;bounding_polygon\&quot;: [70.0, 54.0, 139.0, 54.0, 139.0, 79.0, 70.0, 79.0], \&quot;confidence\&quot;: 0.995}]}, {\&quot;content\&quot;: \&quot;5622\&quot;, \&quot;bounding_polygon\&quot;: [70.0, 94.0, 143.0, 94.0, 142.0, 119.0, 69.0, 119.0], \&quot;words\&quot;: [{\&quot;content\&quot;: \&quot;5622\&quot;, \&quot;bounding_polygon\&quot;: [69.0, 94.0, 140.0, 94.0, 140.0, 119.0, 69.0, 119.0], \&quot;confidence\&quot;: 0.998}]}, {\&quot;content\&quot;: \&quot;1447\&quot;, \&quot;bounding_polygon\&quot;: [69.0, 136.0, 144.0, 136.0, 144.0, 161.0, 69.0, 161.0], \&quot;words\&quot;: [{\&quot;content\&quot;: \&quot;1447\&quot;, \&quot;bounding_polygon\&quot;: [70.0, 137.0, 140.0, 137.0, 139.0, 161.0, 70.0, 161.0], \&quot;confidence\&quot;: 0.998}]}, {\&quot;content\&quot;: \&quot;9802\&quot;, \&quot;bounding_polygon\&quot;: [69.0, 176.0, 142.0, 176.0, 143.0, 202.0, 69.0, 202.0], \&quot;words\&quot;: [{\&quot;content\&quot;: \&quot;9802\&quot;, \&quot;bounding_polygon\&quot;: [69.0, 176.0, 141.0, 176.0, 141.0, 202.0, 69.0, 202.0], \&quot;confidence\&quot;: 0.998}]}]}, \&quot;file_name\&quot;: \&quot;static/files/sample1.png\&quot;, \&quot;id\&quot;: \&quot;sample1\&quot;, \&quot;partitionKey\&quot;: \&quot;Partition1\&quot;}}&quot;</code></p>
<p>As we can see, the app running on a local container returned the correct JSON containing the analysis results and aggregate results based on the sample image.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="updating-the-version-of-the-intelligent-app-on-aks">Updating the Version of the Intelligent App on AKS<a href="#updating-the-version-of-the-intelligent-app-on-aks" class="hash-link" aria-label="Direct link to Updating the Version of the Intelligent App on AKS" title="Direct link to Updating the Version of the Intelligent App on AKS">â€‹</a></h2>
<p>Now that weâ€™ve learned how to implement and test the new Cosmos DB-powered app version locally, letâ€™s explore how to update and deploy this new version of our Intelligent App in AKS using Docker and Kubernetes command-line tools. This process ensures that the latest version of the application is deployed and running in the Kubernetes cluster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="checking-the-results-in-azure-cosmos-db">Checking the Results in Azure Cosmos DB<a href="#checking-the-results-in-azure-cosmos-db" class="hash-link" aria-label="Direct link to Checking the Results in Azure Cosmos DB" title="Direct link to Checking the Results in Azure Cosmos DB">â€‹</a></h3>
<p>Now, itâ€™s time to see how the results were stored in the Azure Cosmos DB for NoSQL multi-model database.</p>
<p>In the Azure Portal, open your Cosmos DB account resource, click the <strong>Data Explorer</strong> tab, expand the IntelligentAppDB database tree, and click the <strong>Items</strong> node within the <strong>AggregateResultsContainer</strong>. Then click the <strong>sample1</strong> item to see the results on the right-side panel:</p>
<p><img loading="lazy" alt="image of sample1 in Data Explorer tab" src="/Cloud-Native/assets/images/blog-image-4-5-490f8f94e02a585b8363bc442fdef765.png" width="624" height="224" class="img_ev3q"></p>
<p>Now, click the <strong>Items</strong> node within the <strong>ImageAnalysisContainer</strong> and click the <strong>sample1</strong> item to see the results on the right-side panel:</p>
<p><img loading="lazy" alt="image of sample1 in ImageAnalysisContainer" src="/Cloud-Native/assets/images/blog-image-4-6-a0c271c6870d15f0cf7b02051e98b806.png" width="624" height="304" class="img_ev3q"></p>
<p>As we can see, our Intelligent App performs OCR operations that produce results in varied structures. However, through Azure Cosmos DB, we can store these structures effortlessly by separating items into containers without creating complex schemas for each data type.</p>
<p>Before creating version 2 of the app, ensure your Docker container is running. Then, run the following commands to stop and remove the local <code>intelligent-app</code> container:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker container stop intelligent-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker container rm intelligent-app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, to recreate the Intelligent Appâ€™s image, use the <code>docker-compose app</code> command below with the <code>--build</code> argument:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose up --build --force-recreate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, use the docker <code>tag</code> command to tag the image. Replace <code>&lt;name-of-azure-container-registry&gt;</code> below with your ACR login server name or public registry hostname. Be sure to update the image version to <code>:v2</code> as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker tag intelligent-app &lt;name-of-azure-container-registry&gt;.azurecr.io/intelligent-app:v2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, run the following command to show your container image with the new tags:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker images</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Youâ€™ll get a result similar to the one below:</p>
<table><thead><tr><th style="text-align:left">REPOSITORY</th><th style="text-align:left">TAG</th><th style="text-align:left">IMAGE ID</th><th style="text-align:left">CREATED</th><th style="text-align:left">SIZE</th></tr></thead><tbody><tr><td style="text-align:left">intelligent-app</td><td style="text-align:left">latest</td><td style="text-align:left">1ca9eb914279</td><td style="text-align:left">40 minutes ago</td><td style="text-align:left">258MB</td></tr><tr><td style="text-align:left">&lt;name-of-azure-container-registry&gt;.azurecr.io/intelligent-app</td><td style="text-align:left">v2</td><td style="text-align:left">1ca9eb914279</td><td style="text-align:left">40 minutes ago</td><td style="text-align:left">258MB</td></tr><tr><td style="text-align:left">&lt;name-of-azure-container-registry&gt;.azurecr.io/intelligent-app</td><td style="text-align:left">v1</td><td style="text-align:left">676ede4aa18c</td><td style="text-align:left">About an hour ago</td><td style="text-align:left">197MB</td></tr></tbody></table>
<p>Now, use <code>docker push</code> to upload the image to your registry. Replace <code>&lt;name-of-azure-container-registry&gt;</code> with your ACR login server name.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker push &lt;name-of-azure-container-registry&gt;.azurecr.io/intelligent-app:v2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To update the application, use the <code>kubectl</code> set command. Update <code>&lt;name-of-azure-container-registry&gt;</code> with the login server or hostname of your container registry, and specify the v2 application version:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl set image deployment intelligent-app intelligent-app=&lt;name-of-azure-container-registry&gt;.azurecr.io/intelligent-app:v2 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, weâ€™ll deploy version 2 of our application using the kubectl command. First, change the terminal to the <code>Deployment</code> folder:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd Deployment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Open the <code>deployment.yml</code> file in an editor and update the container image version tag to v2:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">image: intelligentapp.azurecr.io/intelligent-app:v2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, run the following command to create or update Kubernetes resources defined in the <code>deployment.yml</code> file:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f deployment.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exploring-real-world-use-cases-for-multi-model-databases">Exploring Real-World Use Cases for Multi-Model Databases<a href="#exploring-real-world-use-cases-for-multi-model-databases" class="hash-link" aria-label="Direct link to Exploring Real-World Use Cases for Multi-Model Databases" title="Direct link to Exploring Real-World Use Cases for Multi-Model Databases">â€‹</a></h2>
<p>Numerous industries can benefit from leveraging multi-model databases when building Intelligent Apps. Below are just a few real-world examples:</p>
<ul>
<li><strong>E-commerce personalization</strong>â€”Multi-model databases allow e-commerce platforms to store and manage various data types, such as customer profiles, product details, purchase history, and user-generated content like reviews and images.</li>
<li><strong>Healthcare patient records</strong>â€”Multi-model databases can help manage diverse patient data in the healthcare sector, like diagnoses and medications, semi-structured data like doctors&#x27; notes, and unstructured data like medical images and test results.</li>
<li><strong>Social media analytics</strong>â€”Multi-model databases find applications in social media platforms for handling the vast and varied data users generate, such as user profiles, connections, posts, images, videos, and textual content. The databases enable social platforms to execute quick and complex queries for real-time analytics.</li>
<li><strong>Cosmos DBâ€™s schema</strong>-agnostic approach helps it seamlessly adapt to this diversity, enabling our Intelligent App to store OCR analysis and aggregation data as JSON documents without predefined structures.</li>
</ul>
<p>Unlike traditional relational databases, the flexibility of a multi-model database like Cosmos DB for NoSQL ensures that the database can accommodate the ever-evolving OCR data without frequent schema modifications. This quality makes it a robust choice for our Intelligent App, which processes diverse documents and requires rapid adaptability.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exercise">Exercise<a href="#exercise" class="hash-link" aria-label="Direct link to Exercise" title="Direct link to Exercise">â€‹</a></h2>
<ul>
<li>Complete this <strong>hands-on sample</strong> <a href="https://github.com/contentlab-io/Microsoft-Powering-Intelligent-Apps-with-Cosmos-DB-and-Azure-Kubernetes-Service/tree/main/PartTwo_IntelligentApp_After" target="_blank" rel="noopener noreferrer">project code</a> to build your intelligent app with multi-modal databases and AKS.â€¯</li>
<li>Complete the <strong><a href="https://aka.ms/fallforIA/apps-csc" target="_blank" rel="noopener noreferrer">Apps Cloud Skills Challenge</a></strong> to build on your app dev and AI skills.â€¯</li>
<li>Register for <strong><a href="https://reactor.microsoft.com/reactor/series/S-1037/" target="_blank" rel="noopener noreferrer">Ask the Expert: Azure Kubernetes Service</a></strong> session for live Q&amp;A with the Product Engineering team on building intelligent serverless apps.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">â€‹</a></h2>
<p>Multi-model databases are invaluable for Intelligent Apps, offering intelligent indexing, caching, and query optimization for swift data access. They accommodate various data structures like documents, graphs, and key-value pairs, enabling cohesive data management, streamlined development, and insightful analysisâ€”promoting limitless scalability and letting us adapt data to numerous formats without compromising efficiency.</p>
<p>Discover <a href="https://learn.microsoft.com/azure/architecture/data-guide/technology-choices/data-storage?WT.mc_id=javascript-99907-ninarasi#azure-cosmos-db" target="_blank" rel="noopener noreferrer">Azureâ€™s Cosmos DB and other services</a> to unlock even more potential in your Intelligent Appsâ€”and carry on to the third and final topic of this week to learn how to take your Intelligent Apps to the next level with Azure Kubernetes Service in the next article.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/build-intelligent-apps">Build-Intelligent-Apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/30-days-of-ia">30-days-of-IA</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/hack-together">hack-together</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/community-buzz">community-buzz</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/azure-kubernetes-service">azure-kubernetes-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/azure-openai">azure-openai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/azure-container-apps">azure-container-apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/azure-cosmos-db">azure-cosmos-db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/github-copilot">github-copilot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/github-codespaces">github-codespaces</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/30DaysOfIA/tags/github-actions">github-actions</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cloud-Native/30DaysOfIA/tags/community-buzz/page/10"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/30DaysOfIA/tags/community-buzz/page/12"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer><div></div></footer></div>
</body>
</html>