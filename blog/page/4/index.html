<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Learn in #30DaysOfServerless | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" property="og:url" content="https://azure.github.io/Cloud-Native/blog/page/4"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" property="og:title" content="Learn in #30DaysOfServerless | Build Intelligent Apps On Azure"><meta data-rh="true" name="description" content="Explore Cloud-Native Technologies, Architectures, and Developer Tools - to build your Serverless Applications at scale!"><meta data-rh="true" property="og:description" content="Explore Cloud-Native Technologies, Architectures, and Developer Tools - to build your Serverless Applications at scale!"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/blog/28-where-am-i"><meta data-rh="true" name="twitter:title" content="#30DaysOfServerless: Serverless Power Platform Custom Connector for GPS Location"><meta data-rh="true" name="twitter:description" content="#30DaysOfServerless: How to read my current GPS location and display it on Google Maps and Naver Map using Power Platform custom connector built with Azure Functions and OpenAPI"><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/banners/post-kickoff.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@nitya"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/blog/page/4" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/blog/page/4" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/blog/28-where-am-i"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.f3055625.css">
<script src="/Cloud-Native/assets/js/runtime~main.d6e9085b.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.ca4e212d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Cloud-Native/"><div class="navbar__logo"><img src="/Cloud-Native/img/logo-2024.png" alt="Azure Cloud Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Cloud-Native/img/logo-2024.png" alt="Azure Cloud Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Cloud-Native</b></a><a class="navbar__item navbar__link" href="/Cloud-Native/Build-IA/">Home</a><a class="navbar__item navbar__link" href="/Cloud-Native/60DaysOfIA">Blog</a><a class="navbar__item navbar__link" href="/Cloud-Native/Build-IA/calendar/">Calendar</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Intelligent Apps</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/Build-IA/">Build Intelligent Apps | 2024</a></li><li><a class="dropdown__link" href="/Cloud-Native/60DaysOfIA">#60DaysOfIA</a></li><li><a class="dropdown__link" href="/Cloud-Native/30DaysOfIA">#30DaysOfIA</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Cloud Native</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/New-Year/">ü•≥ | New Year 2023</a></li><li><a class="dropdown__link" href="/Cloud-Native/cnny-2023">#30DaysOfCloudNative</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Serverless</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/serverless-september">üçÇ September | 2022</a></li><li><a href="https://dev.to/azure/serverlessseptember-2020-content-collection-443k" target="_blank" rel="noopener noreferrer" class="dropdown__link">üçÇ September | 2020<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://dev.to/azure/serverless-september-content-collection-2fhb" target="_blank" rel="noopener noreferrer" class="dropdown__link">üçÇ September | 2019<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/Cloud-Native/blog">#30DaysOfServerless</a></li></ul></div><a href="https://github.com/azure/cloud-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-rss-link" aria-label="Subscribe to RSS"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarContainer_QNjo"><div class="announcementBarContent_tvcd">Meet the Azure team at <a class="announcementLink_qKCm" target="_blank" href="https://aka.ms/aks-day" data-bi-area="AnnouncementBar" data-bi-name="KubeCon + Azure Day">KubeCon + Azure Day</a> - Give us a üåü <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#30DaysOfServerless</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/29-awesome-azd">Oct | `awesome-azd` Templates</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/serverless-status-post">Serverless September - In a Nutshell</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/29-azure-developer-cli">29. Code to Cloud with `azd`</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/28-where-am-i">28. Serverless + Power Platforms</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/zero2hero-func-07">üöÄ | Monitor + Troubleshoot Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/25-aca-java">25. Deploy Spring Boot App to ACA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/24-aca-dotnet">24. Deploy ASP.NET app to ACA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/21-cloudevents-via-event-grid">21. CloudEvents with Event Grid</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/20-events-graph">20. Integrate with Microsoft Graph</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/zero2hero-func-05">üöÄ | Error Handling w/ Apache Kafka</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/zero2hero-aca-06">üöÄ | Observability with ACA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/18-cloudmail">18. Logic Apps + Computer Vision</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/17-integrate-cosmosdb">17. Logic Apps + Cosmos DB</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/15-microservices-azure">15. ACA + Serverless On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/14-dapr-aca-quickstart">14. Build ACA with Dapr</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/13-aca-managed-id">13. Secrets + Managed Identity</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/12-build-with-dapr">12. Build With Dapr!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/zero2hero-func-03">üöÄ | Use Custom Handlers For Go</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/zero2hero-aca-04">üöÄ | Journey to the Cloud With ACA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/11-scaling-container-apps">11. Scaling Container Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/microservices-10">10. Microservices Communication</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/09-aca-fundamentals">09. Hello, Azure Container Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/08-functions-azure">08. Functions + Serverless On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/07-functions-python">07. Functions for Python Devs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/06-functions-dotnet">06. Functions for .NET Devs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/zero2hero-func-02">üöÄ | Durable Entities Walkthrough</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/zero2hero-aca-01">üöÄ | Go Cloud-Native with ACA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/05-functions-js">05. Functions for JS Devs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/04-functions-java">04. Functions For Java Devs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/03-functions-quickstart">03. Build Your First Function</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/02-functions-intro">02. Learn Core Concepts</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/01-kickoff">01. It&#x27;s 30DaysOfServerless!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/students">Welcome Students!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/blog/welcome">Hello, ServerlessSeptember</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Build a Power Platform custom connector with Azure Functions and OpenAPI to read my current GPS location and display it on Google Maps and Naver Map."><link itemprop="image" href="https://azure.github.io/Cloud-Native/assets/images/banner-3e7c6e6693ff558354358bf059a7c853.png"><meta itemprop="keywords" content="azure,functions,serverless,power platform,custom connector,openapi"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/Cloud-Native/blog/28-where-am-i">28. Serverless + Power Platforms</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-28T00:00:00.000Z" itemprop="datePublished">September 28, 2022</time> ¬∑ <!-- -->14 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/justinyoo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/justinyoo.png" alt="Justin Yoo" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/justinyoo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Justin Yoo</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Cloud Advocate @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<hr>
<p>Welcome to <code>Day 28</code> of #30DaysOfServerless!</p>
<p>Since it&#x27;s the serverless end-to-end week, I&#x27;m going to discuss how to use a serverless application ‚Äì <a href="https://docs.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Azure Functions</a> with <a href="https://aka.ms/azfunc-openapi" target="_blank" rel="noopener noreferrer">OpenAPI extension</a> ‚Äì to be seamlessly integrated with <a href="https://docs.microsoft.com/connectors/custom-connectors/?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Power Platform custom connector</a> through <a href="https://docs.microsoft.com/azure/api-management/api-management-key-concepts?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Azure API Management</a> - in a post I call <em>&quot;Where am I? My GPS Location with Serverless Power Platform Custom Connector&quot;</em></p>
<p>OK. Are you ready? Let&#x27;s get started!</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-well-cover">What We&#x27;ll Cover<a href="#what-well-cover" class="hash-link" aria-label="Direct link to What We&#x27;ll Cover" title="Direct link to What We&#x27;ll Cover">‚Äã</a></h2>
<ul>
<li>What is Power Platform custom connector?</li>
<li>Proxy app to Google Maps and Naver Map API</li>
<li>API Management integration</li>
<li>Two ways of building custom connector</li>
<li>Where am I? ‚Äì Power Apps app</li>
<li>Exercise: Try this yourself!</li>
<li>Resources: For self-study!</li>
</ul>
<p><img loading="lazy" src="/Cloud-Native/assets/images/banner-3e7c6e6693ff558354358bf059a7c853.png" width="1600" height="672" class="img_ev3q"></p>
<hr>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>SAMPLE REPO</div><div class="admonitionContent_BuS1"><p>Want to follow along? Check out the <a href="https://github.com/justinyoo/google-naver-maps-custom-connector-sample" target="_blank" rel="noopener noreferrer">sample app on GitHub repository</a> used in this post.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-power-platform-custom-connector">What is Power Platform custom connector?<a href="#what-is-power-platform-custom-connector" class="hash-link" aria-label="Direct link to What is Power Platform custom connector?" title="Direct link to What is Power Platform custom connector?">‚Äã</a></h2>
<p><a href="https://docs.microsoft.com/power-platform/?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Power Platform</a> is a low-code/no-code application development tool for <a href="https://www.gartner.com/en/articles/why-fusion-teams-matter" target="_blank" rel="noopener noreferrer">fusion teams</a> that consist of a group of people. Those people come from various disciplines, including field experts (domain experts), IT professionals and professional developers, to draw business values successfully. Within the fusion team, the domain experts become citizen developers or low-code developers by Power Platform. In addition, Making Power Platform more powerful is that it offers hundreds of connectors to other Microsoft 365 and third-party services like SAP, ServiceNow, Salesforce, Google, etc.</p>
<p>However, what if you want to use your internal APIs or APIs not yet offering their official connectors? Here&#x27;s an example. If your company has an inventory management system, and you want to use it within your <a href="https://docs.microsoft.com/power-apps/powerapps-overview?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Power Apps</a> or <a href="https://docs.microsoft.com/power-automate/getting-started?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Power Automate</a>. That point is exactly where <a href="https://docs.microsoft.com/connectors/custom-connectors/?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Power Platform custom connectors</a> is necessary.</p>
<p><img loading="lazy" alt="Inventory Management System for Power Apps" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-01-d6fac44727880dd526e03e2010938f0a.png" width="1980" height="1720" class="img_ev3q"></p>
<p>Therefore, Power Platform custom connectors enrich those citizen developers&#x27; capabilities because those connectors can connect any API applications for the citizen developers to use.</p>
<p>In this post, let&#x27;s build a custom connector that provides a static map image generated by <a href="https://developers.google.com/maps" target="_blank" rel="noopener noreferrer">Google Maps API</a> and <a href="https://www.ncloud.com/product/applicationService/maps" target="_blank" rel="noopener noreferrer">Naver Map API</a> using your GPS location.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxy-app-to-google-maps-and-naver-map-api">Proxy app to Google Maps and Naver Map API<a href="#proxy-app-to-google-maps-and-naver-map-api" class="hash-link" aria-label="Direct link to Proxy app to Google Maps and Naver Map API" title="Direct link to Proxy app to Google Maps and Naver Map API">‚Äã</a></h2>
<p>First, let&#x27;s build an Azure Functions app that connects to Google Maps and Naver Map. Suppose that you&#x27;ve already got the API keys for both services. If you haven&#x27;t yet, get the keys first by visiting <a href="https://developers.google.com/maps" target="_blank" rel="noopener noreferrer">here for Google</a> and <a href="https://www.ncloud.com/product/applicationService/maps" target="_blank" rel="noopener noreferrer">here for Naver</a>. Then, store them to <code>local.settings.json</code> within your Azure Functions app.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Values&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Maps__Google__ApiKey&quot;: &quot;&lt;GOOGLE_MAPS_API_KEY&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Maps__Naver__ClientId&quot;: &quot;&lt;NAVER_MAP_API_CLIENT_ID&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Maps__Naver__ClientSecret&quot;: &quot;&lt;NAVER_MAP_API_CLIENT_SECRET&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here&#x27;s the sample logic to get the static image from Google Maps API. It takes the latitude and longitude of your current location and image zoom level, then returns the static map image. There are a few hard-coded assumptions, though:</p>
<ul>
<li>The image size should be 400x400.</li>
<li>The image should be in <code>.png</code> format.</li>
<li>The marker should show be red and show my location.</li>
</ul>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class GoogleMapService : IMapService</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;byte[]&gt; GetMapAsync(HttpRequest req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var latitude = req.Query[&quot;lat&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var longitude = req.Query[&quot;long&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var zoom = (string)req.Query[&quot;zoom&quot;] ?? &quot;14&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sb = new StringBuilder();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb.Append(&quot;https://maps.googleapis.com/maps/api/staticmap&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append($&quot;?center={latitude},{longitude}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append(&quot;&amp;size=400x400&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append($&quot;&amp;zoom={zoom}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append($&quot;&amp;markers=color:red|{latitude},{longitude}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append(&quot;&amp;format=png32&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append($&quot;&amp;key={this._settings.Google.ApiKey}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var requestUri = new Uri(sb.ToString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var bytes = await this._http.GetByteArrayAsync(requestUri).ConfigureAwait(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bytes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>NaverMapService</code> class has a similar logic with the same input and assumptions. Here&#x27;s the code:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class NaverMapService : IMapService</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;byte[]&gt; GetMapAsync(HttpRequest req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var latitude = req.Query[&quot;lat&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var longitude = req.Query[&quot;long&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var zoom = (string)req.Query[&quot;zoom&quot;] ?? &quot;13&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var sb = new StringBuilder();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb.Append(&quot;https://naveropenapi.apigw.ntruss.com/map-static/v2/raster&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append($&quot;?center={longitude},{latitude}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append(&quot;&amp;w=400&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append(&quot;&amp;h=400&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append($&quot;&amp;level={zoom}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append($&quot;&amp;markers=color:blue|pos:{longitude}%20{latitude}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append(&quot;&amp;format=png&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .Append(&quot;&amp;lang=en&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var requestUri = new Uri(sb.ToString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this._http.DefaultRequestHeaders.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this._http.DefaultRequestHeaders.Add(&quot;X-NCP-APIGW-API-KEY-ID&quot;, this._settings.Naver.ClientId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this._http.DefaultRequestHeaders.Add(&quot;X-NCP-APIGW-API-KEY&quot;, this._settings.Naver.ClientSecret);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var bytes = await this._http.GetByteArrayAsync(requestUri).ConfigureAwait(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bytes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s take a look at the function endpoints. Here&#x27;s for the Google Maps and Naver Map. As the <code>GetMapAsync(req)</code> method returns a byte array value, you need to transform it as <code>FileContentResult</code>, with the content type of <code>image/png</code>.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Google Maps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class GoogleMapsTrigger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [FunctionName(nameof(GoogleMapsTrigger.GetGoogleMapImage))]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;IActionResult&gt; GetGoogleMapImage(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [HttpTrigger(AuthorizationLevel.Anonymous, &quot;GET&quot;, Route = &quot;google/image&quot;)] HttpRequest req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this._logger.LogInformation(&quot;C# HTTP trigger function processed a request.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var bytes = await this._service.GetMapAsync(req).ConfigureAwait(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new FileContentResult(bytes, &quot;image/png&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Naver Map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class NaverMapsTrigger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [FunctionName(nameof(NaverMapsTrigger.GetNaverMapImage))]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;IActionResult&gt; GetNaverMapImage(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [HttpTrigger(AuthorizationLevel.Anonymous, &quot;GET&quot;, Route = &quot;naver/image&quot;)] HttpRequest req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this._logger.LogInformation(&quot;C# HTTP trigger function processed a request.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var bytes = await this._service.GetMapAsync(req).ConfigureAwait(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new FileContentResult(bytes, &quot;image/png&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, add the OpenAPI capability to each function endpoint. Here&#x27;s the example:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Google Maps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class GoogleMapsTrigger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [FunctionName(nameof(GoogleMapsTrigger.GetGoogleMapImage))]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è Add decorators provided by the OpenAPI extension ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiOperation(operationId: nameof(GoogleMapsTrigger.GetGoogleMapImage), tags: new[] { &quot;google&quot; })]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiParameter(name: &quot;lat&quot;, In = ParameterLocation.Query, Required = true, Type = typeof(string), Description = &quot;The **latitude** parameter&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiParameter(name: &quot;long&quot;, In = ParameterLocation.Query, Required = true, Type = typeof(string), Description = &quot;The **longitude** parameter&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiParameter(name: &quot;zoom&quot;, In = ParameterLocation.Query, Required = false, Type = typeof(string), Description = &quot;The **zoom level** parameter &amp;ndash; Default value is `14`&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiResponseWithBody(statusCode: HttpStatusCode.OK, contentType: &quot;image/png&quot;, bodyType: typeof(byte[]), Description = &quot;The map image as an OK response&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ‚¨ÜÔ∏è‚¨ÜÔ∏è‚¨ÜÔ∏è Add decorators provided by the OpenAPI extension ‚¨ÜÔ∏è‚¨ÜÔ∏è‚¨ÜÔ∏è</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;IActionResult&gt; GetGoogleMapImage(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [HttpTrigger(AuthorizationLevel.Anonymous, &quot;GET&quot;, Route = &quot;google/image&quot;)] HttpRequest req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Naver Map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class NaverMapsTrigger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [FunctionName(nameof(NaverMapsTrigger.GetNaverMapImage))]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è Add decorators provided by the OpenAPI extension ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiOperation(operationId: nameof(NaverMapsTrigger.GetNaverMapImage), tags: new[] { &quot;naver&quot; })]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiParameter(name: &quot;lat&quot;, In = ParameterLocation.Query, Required = true, Type = typeof(string), Description = &quot;The **latitude** parameter&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiParameter(name: &quot;long&quot;, In = ParameterLocation.Query, Required = true, Type = typeof(string), Description = &quot;The **longitude** parameter&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiParameter(name: &quot;zoom&quot;, In = ParameterLocation.Query, Required = false, Type = typeof(string), Description = &quot;The **zoom level** parameter &amp;ndash; Default value is `13`&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [OpenApiResponseWithBody(statusCode: HttpStatusCode.OK, contentType: &quot;image/png&quot;, bodyType: typeof(byte[]), Description = &quot;The map image as an OK response&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ‚¨ÜÔ∏è‚¨ÜÔ∏è‚¨ÜÔ∏è Add decorators provided by the OpenAPI extension ‚¨ÜÔ∏è‚¨ÜÔ∏è‚¨ÜÔ∏è</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public async Task&lt;IActionResult&gt; GetNaverMapImage(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [HttpTrigger(AuthorizationLevel.Anonymous, &quot;GET&quot;, Route = &quot;naver/image&quot;)] HttpRequest req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run the function app in the local. Here are the latitude and longitude values for Seoul, Korea.</p>
<ul>
<li>latitude: 37.574703</li>
<li>longitude: 126.978519</li>
</ul>
<p><img loading="lazy" alt="Google Map for Seoul" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-02-a3fc7d2cecbbf67069ec8aa4bf8ce52b.png" width="1820" height="2004" class="img_ev3q"></p>
<p>It seems to be working! Let&#x27;s deploy it to Azure.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-management-integration">API Management integration<a href="#api-management-integration" class="hash-link" aria-label="Direct link to API Management integration" title="Direct link to API Management integration">‚Äã</a></h2>
<p><a href="https://visualstudio.microsoft.com/vs/?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Visual Studio 2022</a> provides a built-in deployment tool for <a href="https://docs.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Azure Functions</a> app onto Azure. In addition, the deployment tool supports seamless integration with <a href="https://docs.microsoft.com/azure/api-management/api-management-key-concepts?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Azure API Management</a> as long as your Azure Functions app enables the OpenAPI capability. In this post, I&#x27;m going to use this feature. Right-mouse click on the Azure Functions project and select the &quot;Publish&quot; menu.</p>
<p><img loading="lazy" alt="Visual Studio context menu for publish" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-03-2d9e1dbe2c83d6466021c293a5e8f7e3.png" width="914" height="902" class="img_ev3q"></p>
<p>Then, you will see the publish screen. Click the &quot;‚ûï New&quot; button to create a new publish profile.</p>
<p><img loading="lazy" alt="Create a new publish profile" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-04-b977bba0a3ab4c93a96507846fffe3fa.png" width="1127" height="741" class="img_ev3q"></p>
<p>Choose &quot;Azure&quot; and click the &quot;Next&quot; button.</p>
<p><img loading="lazy" alt="Choose the target platform for publish" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-05-e57ab49d94cd5f85818fcc52f0bcae39.png" width="1608" height="1128" class="img_ev3q"></p>
<p>Select the app instance. This time simply pick up the &quot;Azure Function App (Windows)&quot; option, then click &quot;Next&quot;.</p>
<p><img loading="lazy" alt="Choose the target OS for publish" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-06-13b63e8c2cc950ddf632df116f502294.png" width="1608" height="1128" class="img_ev3q"></p>
<p>If you already provision an Azure Function app instance, you will see it on the screen. Otherwise, create a new one. Then, click &quot;Next&quot;.</p>
<p><img loading="lazy" alt="Choose the target instance for publish" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-07-6af9c72f6f8902fbe457543f3ecda5c7.png" width="1608" height="1128" class="img_ev3q"></p>
<p>In the next step, you are asked to choose the Azure API Management instance for integration. Choose one, or create a new one. Then, click &quot;Next&quot;.</p>
<p><img loading="lazy" alt="Choose the APIM instance for integration" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-08-b2d34b5ea9ddd5e4a0fe435d595ab766.png" width="1608" height="1128" class="img_ev3q"></p>
<p>Finally, select the publish method ‚Äì either local publish or GitHub Actions workflow. Let&#x27;s pick up the local publish method for now. Then, click &quot;Finish&quot;.</p>
<p><img loading="lazy" alt="Choose the deployment type" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-09-359f43a8f8652049f72319270287508b.png" width="1608" height="1128" class="img_ev3q"></p>
<p>The publish profile has been created. Click &quot;Close&quot; to move on.</p>
<p><img loading="lazy" alt="Publish profile created" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-10-33476d1a905985ba03417cbec48b7f3e.png" width="1608" height="1128" class="img_ev3q"></p>
<p>Now the function app is ready for deployment. Click the &quot;Publish&quot; button and see how it goes.</p>
<p><img loading="lazy" alt="Publish function app" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-11-9a095865489916d95a5bc9fe86e6c30b.png" width="2192" height="847" class="img_ev3q"></p>
<p>The Azure function app has been deployed and integrated with the Azure API Management instance.</p>
<p><img loading="lazy" alt="Function app published" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-12-6c9c271c4d7c0db17627ff8f3885f455.png" width="2171" height="674" class="img_ev3q"></p>
<p>Go to the published function app site, and everything looks OK.</p>
<p><img loading="lazy" alt="Function app on Azure" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-13-693ef72fc7f6872e0ee20b2e5df60f43.png" width="3744" height="1778" class="img_ev3q"></p>
<p>And API Management shows the function app integrated perfectly.</p>
<p><img loading="lazy" alt="Function app integrated with APIM" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-14-2d93caa7008a0e987e746da7c7d8394c.png" width="3740" height="2019" class="img_ev3q"></p>
<p>Now, you are ready to create a custom connector. Let&#x27;s move on.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="two-ways-of-building-custom-connector">Two ways of building custom connector<a href="#two-ways-of-building-custom-connector" class="hash-link" aria-label="Direct link to Two ways of building custom connector" title="Direct link to Two ways of building custom connector">‚Äã</a></h2>
<p>There are two ways to create a custom connector.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="export-custom-connector-from-api-management">Export custom connector from API Management<a href="#export-custom-connector-from-api-management" class="hash-link" aria-label="Direct link to Export custom connector from API Management" title="Direct link to Export custom connector from API Management">‚Äã</a></h3>
<p>First, you can directly use the built-in API Management feature. Then, click the ellipsis icon and select the &quot;Create Power Connector&quot; menu.</p>
<p><img loading="lazy" alt="Create Power Connector menu" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-15-6a12725fa9910e64352f37db80df18d6.png" width="3740" height="2020" class="img_ev3q"></p>
<p>Then, you are redirected to this screen. While the &quot;API&quot; and &quot;API display name&quot; fields are pre-populated, you need to choose the Power Platform environment tied to your tenant. Choose an environment, click &quot;Authenticate&quot;, and click &quot;Create&quot;.</p>
<p><img loading="lazy" alt="Create custom connector screen" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-16-b38ad1d7c34f0ad7ff9dba7e2bb34ebb.png" width="3740" height="2020" class="img_ev3q"></p>
<p>Check your custom connector on Power Apps or Power Automate side.</p>
<p><img loading="lazy" alt="Custom connector created on Power Apps" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-17-97512785618cde5ced81d5c0e6c00255.png" width="3744" height="2018" class="img_ev3q"></p>
<p>However, there&#x27;s a caveat to this approach. Because it&#x27;s tied to your tenant, you should use the second approach if you want to use this custom connector on the other tenant.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="import-custom-connector-from-openapi-document-or-url">Import custom connector from OpenAPI document or URL<a href="#import-custom-connector-from-openapi-document-or-url" class="hash-link" aria-label="Direct link to Import custom connector from OpenAPI document or URL" title="Direct link to Import custom connector from OpenAPI document or URL">‚Äã</a></h3>
<p>Click the ellipsis icon again and select the &quot;Export&quot; menu.</p>
<p><img loading="lazy" alt="Export menu" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-18-64689301d9363b7e31c8344ccdaf5171.png" width="3740" height="2020" class="img_ev3q"></p>
<p>On the Export API screen, choose the &quot;OpenAPI v2 (JSON)&quot; panel because Power Platform custom connector currently accepts version 2 of the OpenAPI document.</p>
<p><img loading="lazy" alt="Select OpenAPI v2" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-19-ef3102ea7e974ebe09f9b3da08137b30.png" width="3740" height="2020" class="img_ev3q"></p>
<p>Download the OpenAPI document to your local computer and move to your Power Apps or Power Automate page under your desired environment. I&#x27;m going to use the Power Automate page. First, go to the &quot;Data&quot; ‚û°Ô∏è &quot;Custom connectors&quot; page. Then, click the &quot;‚ûï New custom connector&quot; ‚û°Ô∏è &quot;Import an OpenAPI file&quot; at the top right corner.</p>
<p><img loading="lazy" alt="New custom connector" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-20-4b2014da86c8fcbd3f7f9340772dbc6e.png" width="3744" height="2018" class="img_ev3q"></p>
<p>When a modal pops up, give the custom connector name and import the OpenAPI document exported above. Then, click &quot;Continue&quot;.</p>
<p><img loading="lazy" alt="Import custom connector" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-21-192c69f9c600c326b0ee2a38e5717df8.png" width="1520" height="851" class="img_ev3q"></p>
<p>Actually, that&#x27;s it! Next, click the &quot;‚úîÔ∏è Create connector&quot; button to create the connector.</p>
<p><img loading="lazy" alt="Create custom connector" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-22-db21d8177d6141e9b72638958b85706d.png" width="3744" height="2018" class="img_ev3q"></p>
<p>Go back to the custom connector page, and you will see the &quot;Maps API&quot; custom connector you just created.</p>
<p><img loading="lazy" alt="Custom connector imported" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-23-d62a15c41d3c92c3eef96d315f9af563.png" width="3744" height="2018" class="img_ev3q"></p>
<p>So, you are ready to create a Power Apps app to display your location on Google Maps or Naver Map! Let&#x27;s move on.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="where-am-i--power-apps-app">Where am I? ‚Äì Power Apps app<a href="#where-am-i--power-apps-app" class="hash-link" aria-label="Direct link to Where am I? ‚Äì Power Apps app" title="Direct link to Where am I? ‚Äì Power Apps app">‚Äã</a></h2>
<p>Open the Power Apps Studio, and create an empty canvas app, named <code>Who am I</code> with a phone layout.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-connector-integration">Custom connector integration<a href="#custom-connector-integration" class="hash-link" aria-label="Direct link to Custom connector integration" title="Direct link to Custom connector integration">‚Äã</a></h3>
<p>To use the custom connector created above, you need to add it to the Power App. Click the cylinder icon on the left and click the &quot;Add data&quot; button.</p>
<p><img loading="lazy" alt="Add custom connector to data pane" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-24-9e9c3740c0e94aca0337ad157e237ad8.png" width="669" height="1044" class="img_ev3q"></p>
<p>Search the custom connector name, &quot;Maps API&quot;, and click the custom connector to add.</p>
<p><img loading="lazy" alt="Search custom connector" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-25-1c6f92ab001f1cfb580d1c764b3606cd.png" width="1300" height="2020" class="img_ev3q"></p>
<p>To use the custom connector, you also need to create a connection to it. Click the &quot;Connect&quot; button and move on.</p>
<p><img loading="lazy" alt="Create connection to custom connector" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-26-4f5ef854079d81869697e89f64ac274b.png" width="681" height="942" class="img_ev3q"></p>
<p>Now, you&#x27;ve got the connection to the custom connector.</p>
<p><img loading="lazy" alt="Connection to custom connector ready" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-27-1cd9a596a451fe339b1d9a1eb186f451.png" width="661" height="992" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="controls">Controls<a href="#controls" class="hash-link" aria-label="Direct link to Controls" title="Direct link to Controls">‚Äã</a></h3>
<p>Let&#x27;s build the Power Apps app. First of all, put three controls ‚Äì <a href="https://docs.microsoft.com/power-apps/maker/canvas-apps/controls/control-image?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Image</a>, <a href="https://docs.microsoft.com/power-apps/maker/canvas-apps/controls/control-slider?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Slider</a> and <a href="https://docs.microsoft.com/power-apps/maker/canvas-apps/controls/control-button?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Button</a> onto the canvas.</p>
<p><img loading="lazy" alt="Power Apps control added" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-28-ef73bc2f1dce3e4a76c0965c201a12de.png" width="3744" height="1922" class="img_ev3q"></p>
<p>Click the &quot;Screen1&quot; control and change the value on the property &quot;OnVisible&quot; to the formula below. The formula stores the current slider value in the <code>zoomlevel</code> collection.</p>
<div class="language-powerappsfl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powerappsfl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClearCollect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zoomlevel,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Slider1.Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Click the &quot;Botton1&quot; control and change the value on the property &quot;OnSelected&quot; to the formula below. It passes the current latitude, longitude and zoom level to the custom connector and receives the image data. The received image data is stored in the <code>result</code> collection.</p>
<div class="language-powerappsfl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powerappsfl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClearCollect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MAPS.GetGoogleMapImage(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location.Latitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location.Longitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        { zoom: First(zoomlevel).Value }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Click the &quot;Image1&quot; control and change the value on the property &quot;Image&quot; to the formula below. It gets the image data from the <code>result</code> collection.</p>
<div class="language-powerappsfl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powerappsfl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">First(result).Url</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Click the &quot;Slider1&quot; control and change the value on the property &quot;OnChange&quot; to the formula below. It stores the current slider value to the <code>zoomlevel</code> collection, followed by calling the custom connector to get the image data against the current location.</p>
<div class="language-powerappsfl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powerappsfl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClearCollect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zoomlevel,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Slider1.Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClearCollect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MAPS.GetGoogleMapImage(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location.Latitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location.Longitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        { zoom: First(zoomlevel).Value }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That seems to be OK. Let&#x27;s click the &quot;Where am I?&quot; button. But it doesn&#x27;t show the image. The <code>First(result).Url</code> value is actually similar to this:</p>
<div class="language-powerappsfl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powerappsfl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">appres://blobmanager/1090a86393a843adbfcf428f0b90e91b/1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It&#x27;s the image reference value somewhere you can&#x27;t get there.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workaround--power-automate-workflow">Workaround ‚Äì Power Automate workflow<a href="#workaround--power-automate-workflow" class="hash-link" aria-label="Direct link to Workaround ‚Äì Power Automate workflow" title="Direct link to Workaround ‚Äì Power Automate workflow">‚Äã</a></h3>
<p>Therefore, you need a workaround using a Power Automate workflow to sort out this issue. Open the Power Automate Studio, create an instant cloud flow with the Power App trigger, and give it the &quot;Where am I&quot; name. Then add input parameters of <code>lat</code>, <code>long</code> and <code>zoom</code>.</p>
<p><img loading="lazy" alt="Power Apps trigger on Power Automate workflow" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-29-55e6af8fe5ffea6563cea64747cd6cd0.png" width="1250" height="700" class="img_ev3q"></p>
<p>Add custom connector action to get the map image.</p>
<p><img loading="lazy" alt="Select action to get the Google Maps image" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-30-41539cecc71a570428cf215084d13872.png" width="1220" height="880" class="img_ev3q"></p>
<p>In the action, pass the appropriate parameters to the action.</p>
<p><img loading="lazy" alt="Pass parameters to the custom connector action" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-31-eea07023aa2901c6cf44b681fcfb43e4.png" width="1220" height="385" class="img_ev3q"></p>
<p>Add a &quot;Response&quot; action and put the following values into each field.</p>
<ul>
<li>
<p>&quot;Body&quot; field:</p>
<div class="language-bicep codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bicep codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;base64Image&quot;: &lt;power_automate_expression&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>The <code>&lt;power_automate_expression&gt;</code> should be <code>concat(&#x27;data:&#x27;, body(&#x27;GetGoogleMapImage&#x27;)?[&#x27;$content-type&#x27;], &#x27;;base64,&#x27;, body(&#x27;GetGoogleMapImage&#x27;)?[&#x27;$content&#x27;])</code>.</p>
</blockquote>
</li>
<li>
<p>&quot;Response Body JSON Schema&quot; field:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;base64Image&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p><img loading="lazy" alt="Format the Response action" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-32-7a518a829f43dc6adb07e3e0e2560b16.png" width="1220" height="1070" class="img_ev3q"></p>
<p>Let&#x27;s return to the Power Apps Studio and add the Power Automate workflow you created.</p>
<p><img loading="lazy" alt="Add Power Automate workflow" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-33-d95c7bf0ed2ada4fb7ab84a85a935726.png" width="1300" height="944" class="img_ev3q"></p>
<p>Select &quot;Button1&quot; and change the value on the property &quot;OnSelect&quot; below. It replaces the direct call to the custom connector with the Power Automate workflow.</p>
<div class="language-powerappsfl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powerappsfl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClearCollect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WhereamI.Run(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location.Latitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location.Longitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        First(zoomlevel).Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Also, change the value on the property &quot;OnChange&quot; of the &quot;Slider1&quot; control below, replacing the custom connector call with the Power Automate workflow call.</p>
<div class="language-powerappsfl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powerappsfl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClearCollect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zoomlevel,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Slider1.Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClearCollect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WhereamI.Run(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location.Latitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Location.Longitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        First(zoomlevel).Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And finally, change the &quot;Image1&quot; control&#x27;s &quot;Image&quot; property value below.</p>
<div class="language-powerappsfl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powerappsfl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">First(result).base64Image</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The workaround has been applied. Click the &quot;Where am I?&quot; button to see your current location from Google Maps.</p>
<p><img loading="lazy" alt="Run Power Apps app #1" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-34-817219ce9f1534d0b79affc1b4027df6.png" width="3744" height="2018" class="img_ev3q"></p>
<p>If you change the slider left or right, you will see either the zoomed-in image or the zoomed-out image.</p>
<p><img loading="lazy" alt="Run Power Apps app #2" src="/Cloud-Native/assets/images/28-serverless-power-platform-custom-connector-35-5c8cb9cb4f5eda28d037e8d9dd35b158.png" width="3744" height="2018" class="img_ev3q"></p>
<p>Now, you&#x27;ve created a Power Apps app to show your current location using:</p>
<ul>
<li>Google Maps API through the custom connector, and</li>
<li>Custom connector written in Azure Functions with OpenAPI extension!</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exercise-try-this-yourself">Exercise: Try this yourself!<a href="#exercise-try-this-yourself" class="hash-link" aria-label="Direct link to Exercise: Try this yourself!" title="Direct link to Exercise: Try this yourself!">‚Äã</a></h2>
<p>You can fork this <a href="https://github.com/justinyoo/google-naver-maps-custom-connector-sample" target="_blank" rel="noopener noreferrer">GitHub repository</a> to your account and play around with it to see how the custom connector works. After forking the repository, make sure that you create all the necessary secrets to your repository documented in the README file.</p>
<p>Then, click the &quot;Deploy to Azure&quot; button, and it will provision all necessary Azure resources and deploy an Azure Functions app for a custom connector.</p>
<p><img loading="lazy" src="https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/1-CONTRIBUTION-GUIDE/images/deploytoazure.svg?sanitize=true" alt="Deploy To Azure" class="img_ev3q"></p>
<p>Once everything is deployed successfully, try to create a <a href="https://docs.microsoft.com/power-apps/powerapps-overview?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Power Apps app</a> and <a href="https://docs.microsoft.com/power-automate/getting-started?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer">Power Automate workflow</a> to see your current location in real-time!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources-for-self-study">Resources: For self-study!<a href="#resources-for-self-study" class="hash-link" aria-label="Direct link to Resources: For self-study!" title="Direct link to Resources: For self-study!">‚Äã</a></h2>
<p>Want to know more about Power Platform custom connector and Azure Functions OpenAPI extension? Here are several resources you can take a look at:</p>
<ul>
<li><a href="https://docs.microsoft.com/training/paths/transform-business-applications-with-fusion-development/?WT.mc_id=dotnet-75362-juyoo" target="_blank" rel="noopener noreferrer"><strong>Microsoft Learn</strong>: Transform your business applications with fusion development</a></li>
<li><a href="https://aka.ms/azfunc-openapi" target="_blank" rel="noopener noreferrer"><strong>GitHub repository</strong>: Azure Functions OpenAPI Extension</a></li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/blog/tags/serverless-september">serverless-september</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/blog/tags/30-days-of-serverless">30-days-of-serverless</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/blog/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/blog/tags/openapi">openapi</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/blog/tags/power-platform">power-platform</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/blog/tags/custom-connector">custom-connector</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cloud-Native/blog/page/3"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/blog/page/5"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://learn.microsoft.com/ai?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">AI</a><span class="footer__link-separator">¬∑</span><a href="https://azure.microsoft.com/solutions/cloud-native-apps/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud-Native</a><span class="footer__link-separator">¬∑</span><a href="https://azure.microsoft.com/solutions/serverless/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Serverless</a><span class="footer__link-separator">¬∑</span><a href="https://aka.ms/CNNY/collection?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Collection</a><span class="footer__link-separator">¬∑</span><a href="https://developer.microsoft.com/java/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Java</a><span class="footer__link-separator">¬∑</span><a href="https://docs.microsoft.com/javascript/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">JavaScript</a><span class="footer__link-separator">¬∑</span><a href="https://dotnet.microsoft.com/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">.NET</a><span class="footer__link-separator">¬∑</span><a href="https://docs.microsoft.com/azure/developer/python/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python</a></div></div></div></footer><footer><div></div></footer></div>
</body>
</html>