<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024</id>
    <title>Build Intelligent Apps On Azure Blog</title>
    <updated>2024-10-09T09:03:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024"/>
    <subtitle>Build Intelligent Apps On Azure Blog</subtitle>
    <icon>https://azure.github.io/Cloud-Native/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[1.4b Deploy application with Azure App Service Part 2]]></title>
        <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2</id>
        <link href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2"/>
        <updated>2024-10-09T09:03:00.000Z</updated>
        <summary type="html"><![CDATA[In this section, we will deploy the back-end and middleware services using Azure App Service. ]]></summary>
        <content type="html"><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4b-deploying-the-application-using-azure-app-service">4.b Deploying the Application Using Azure App Service<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#4b-deploying-the-application-using-azure-app-service" class="hash-link" aria-label="Direct link to 4.b Deploying the Application Using Azure App Service" title="Direct link to 4.b Deploying the Application Using Azure App Service">​</a></h2>
<p>In the previous blog post, we configured <a href="https://learn.microsoft.com/azure/api-management/api-management-key-concepts?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure API Management (APIM)</a> and <a href="https://learn.microsoft.com/azure/key-vault/general/overview?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure Key Vault</a> to secure the application and manage secrets. In this section, we will deploy the back-end and middleware services using <a href="https://learn.microsoft.com/azure/app-service/overview?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure App Service</a>. We will leverage the <a href="https://github.com/microsoft/azure-maven-plugins/blob/develop/azure-webapp-maven-plugin/README.md" target="_blank" rel="noopener noreferrer">Azure Web App Maven Plugin</a> for deployment. If the required App Service instances do not already exist (as discussed in blog <strong>2.b</strong>), the Maven plugin will automatically create them. Otherwise, it will simply deploy the application code to the existing instances.</p>
<p>Additionally, we will deploy the front-end ReactJS application separately to its own Azure App Service. This ensures a complete end-to-end deployment of all application components, enabling seamless communication between the front-end, back-end, and middleware services.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-will-cover">What we will cover:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#what-we-will-cover" class="hash-link" aria-label="Direct link to What we will cover:" title="Direct link to What we will cover:">​</a></h2>
<ol>
<li>Preparing the Application for Deployment</li>
<li>Configuring Maven for <strong>Azure Web App Deployment</strong></li>
<li>Deploying the Back-end and Middleware Services Using <strong>Maven</strong></li>
<li>Deploying the Front-end Service</li>
<li>Verifying the Deployment</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-preparing-the-application-for-deployment">Step 1: Preparing the Application for Deployment<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#step-1-preparing-the-application-for-deployment" class="hash-link" aria-label="Direct link to Step 1: Preparing the Application for Deployment" title="Direct link to Step 1: Preparing the Application for Deployment">​</a></h2>
<p>Before deploying, ensure that your application is built and packaged correctly. This involves creating a WAR file for the back-end and middleware services.</p>
<ol>
<li><strong>Build the Application:</strong>
<ul>
<li>
<p>Use the Maven wrapper command to build the application:</p>
<p><code>./mvnw clean install</code></p>
</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of Maven wrapper command" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-1-2b1f7193a03acfa3c06ee92287346dc0.png" width="1429" height="844" class="img_ev3q"></p>
<ol start="2">
<li><strong>Package the Application:</strong>
<ul>
<li>
<p>After building, package the application to create the necessary WAR file for deployment:</p>
<p><code>./mvnw clean package</code></p>
</li>
<li>
<p>This will create a WAR file in the target directory of your project.</p>
</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of Maven clean package command" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-2-69e60132765c04439a262ed1f145d7ff.png" width="1431" height="855" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><a href="https://aka.ms/demo-bytes/ep13?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Ingest your own content</a> using the Azure Functions OpenAI extension into a Cosmos DB vector database to enable OpenAI query on your data.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-configuring-the-azure-web-app-maven-plugin">Step 2: Configuring the Azure Web App Maven Plugin<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#step-2-configuring-the-azure-web-app-maven-plugin" class="hash-link" aria-label="Direct link to Step 2: Configuring the Azure Web App Maven Plugin" title="Direct link to Step 2: Configuring the Azure Web App Maven Plugin">​</a></h2>
<ol>
<li><strong>Update the pom.xml File:</strong>
<ul>
<li>Open the <code>pom.xml</code> file for both the back-end and middleware services and add the following plugin configuration:</li>
</ul>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;azure-webapp-maven-plugin&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;2.13.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- Refer: https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Web-App:-Configuration-Details --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- Optional: If not mentioned, it will pick the default subscription --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;subscriptionId&gt;03a4877f-5f78-4a6c-af93-d492e85d4e82&lt;/subscriptionId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;resourceGroup&gt;ai-study-con-gen-1&lt;/resourceGroup&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;appName&gt;ai-study-backend-service&lt;/appName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;region&gt;eastus&lt;/region&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;pricingTier&gt;B1&lt;/pricingTier&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;runtime&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;os&gt;Linux&lt;/os&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;javaVersion&gt;Java 17&lt;/javaVersion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;webContainer&gt;Tomcat 10.0&lt;/webContainer&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/runtime&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;deployment&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;resources&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;resource&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;directory&gt;${project.basedir}/target&lt;/directory&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;includes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;include&gt;*.war&lt;/include&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/includes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/resource&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/resources&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/deployment&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/plugin&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>Note:</strong> If the <code>subscriptionId</code> is not specified, the Maven plugin will use the default subscription configured in your <strong>Azure CLI</strong> or settings. Additionally, if the App Service defined in the <code>appName</code> field does not exist (as discussed in <strong>blog 2b</strong>), the Maven plugin will create it automatically during deployment.</li>
</ul>
<p><img loading="lazy" alt="screenshot of Maven plugin command" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-3-61772ed14d40b70d308aefc86d2124d5.png" width="1428" height="1094" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-deploying-the-back-end-and-middleware-services-using-maven">Step 3: Deploying the Back-end and Middleware Services Using Maven<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#step-3-deploying-the-back-end-and-middleware-services-using-maven" class="hash-link" aria-label="Direct link to Step 3: Deploying the Back-end and Middleware Services Using Maven" title="Direct link to Step 3: Deploying the Back-end and Middleware Services Using Maven">​</a></h2>
<ol>
<li><strong>Deploy the Back-end Service Using Maven:</strong>
<ul>
<li>
<p>Use the following Maven wrapper command to deploy the back-end service to Azure App Service:</p>
<p><code>./mvnw clean package azure-webapp:deploy</code></p>
</li>
<li>
<p>This command will either create the App Service instance (if it does not exist) or deploy the WAR file located in the target directory to the existing Azure Web App.</p>
</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of Maven wrapper command back-end deployment" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-4-3515104faf2d103e6be5e73871ae4d12.png" width="1429" height="805" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of Maven wrapper command back-end deployment results" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-5-c6e77560e8766d89ad72e33605e3a417.png" width="1429" height="805" class="img_ev3q"></p>
<ol start="2">
<li><strong>Deploy the Middleware Service Using Maven:</strong>
<ul>
<li>
<p>Similarly, use the Maven wrapper command for the middleware service:</p>
<p><code>./mvnw clean package azure-webapp:deploy</code></p>
</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of Maven clean package command" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-6-00baac2225aa326352b2f1451278c74f.png" width="1430" height="1088" class="img_ev3q"></p>
<ul>
<li>Verify that the middleware service is deployed successfully to the specified Azure App Service instance.</li>
</ul>
<p><img loading="lazy" alt="screenshot of Maven wrapper command middleware deployment" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-7-2b547f65d0eb483c110cbdbcc306a3d3.png" width="1430" height="782" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of Maven wrapper command middleware deployment results" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-8-ecd00e29659329f91b5e48984750e658.png" width="1430" height="634" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-deploying-the-front-end-service">Step 4: Deploying the Front-end Service<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#step-4-deploying-the-front-end-service" class="hash-link" aria-label="Direct link to Step 4: Deploying the Front-end Service" title="Direct link to Step 4: Deploying the Front-end Service">​</a></h2>
<p>In our earlier blog post <a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2" target="_blank" rel="noopener noreferrer">1.2b. Preparing the Azure OpenAI Service resource</a>, we discussed creating the app services that will host our app. If you didn’t create the front-end service then, you can do it now.</p>
<p>If you already created a front-end app service, proceed to deploy the ZIP file in step <a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#deploy-the-zip-file">4.2</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-create-app-service">4.1 Create App Service<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#41-create-app-service" class="hash-link" aria-label="Direct link to 4.1 Create App Service" title="Direct link to 4.1 Create App Service">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#azure-portal-instructions" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h4>
<ol>
<li>In the Azure portal, go to <strong>App Services</strong>.</li>
<li>Select <strong>Create and choose the Web App</strong>.</li>
<li>Select your subscription and resource group, and give the app a name (for example, <code>frontend-service</code>).</li>
<li>Choose the <strong>Runtime stack: Node.js</strong> and <strong>Operating System: Linux</strong>.</li>
<li>Configure <strong>Deployment</strong> and <strong>Monitoring</strong> options as needed.</li>
<li>Review and create the App Service.</li>
</ol>
<p><img loading="lazy" alt="Web App configuration in Web Apps in the Azure portal" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-9-b6decc3d743348356b40a3449c6cec4b.png" width="1356" height="1192" class="img_ev3q"></p>
<p><img loading="lazy" alt="Web App deployment in Web Apps in the Azure portal" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-10-1ab60b061127a9c9a54610858d388013.png" width="1431" height="754" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-cli-instructions">Azure CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#azure-cli-instructions" class="hash-link" aria-label="Direct link to Azure CLI instructions" title="Direct link to Azure CLI instructions">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create Web App for Frontend (ReactJS)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az webapp create --resource-group &lt;your-resource-group-name&gt; --plan &lt;plan-name&gt; --name &lt;your-frontend-name&gt; --runtime "NODE:22-lts"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="Web App frontend deployment command" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-11-4588b936d390a285c535ee70cf340e41.png" width="1430" height="1084" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-deploy-the-zip-file">4.2 Deploy the ZIP File<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#42-deploy-the-zip-file" class="hash-link" aria-label="Direct link to 4.2 Deploy the ZIP File" title="Direct link to 4.2 Deploy the ZIP File">​</a></h3>
<p>Build, package, and deploy the application using the following commands.</p>
<p><em><strong>Note:</strong> Before deploying code, make sure that you’ve cloned the application source from the GitHub repository to your local machine and then navigate to the “frontend” folder.</em></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build the application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm run build  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Conver into ZIP File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zip -r build.zip ./build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Deploy the code into Azure App Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az webapp deploy --resource-group &lt;your-resource-group&gt; --name &lt;your-web-app-name&gt; --src-path build.zip --type zip  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="ZIP file deployment command" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-12-060d7c2a6ffafc1fee09545ba1096118.png" width="1429" height="756" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-set-the-correct-startup-command-for-react">4.3 Set the correct startup command for React<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#43-set-the-correct-startup-command-for-react" class="hash-link" aria-label="Direct link to 4.3 Set the correct startup command for React" title="Direct link to 4.3 Set the correct startup command for React">​</a></h3>
<p>Azure App Service needs to know how to correctly serve requests to our front-end React app. For static sites, like this React app, you configure the startup command to serve static files and handle routing for single-page applications (SPAs).</p>
<p>You can configure the app service to use the correct React startup command for the app by running the following:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az webapp config set --resource-group &lt;your-resource-group&gt; --name &lt;your-web-app-name&gt; --startup-file "pm2 serve /home/site/wwwroot/build --no-daemon --spa"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="Configuration code to use the correct React startup command" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-13-1a04a98baf1557464fcf5550a3d6f905.png" width="1429" height="773" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="44-clear-browser-cache">4.4 Clear browser cache<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#44-clear-browser-cache" class="hash-link" aria-label="Direct link to 4.4 Clear browser cache" title="Direct link to 4.4 Clear browser cache">​</a></h3>
<p>Your browser cache may prevent client-side updates from appearing correctly. After deploying the front-end app, clear your browser cache or use an incognito window before accessing the app to make sure that you're seeing the latest version.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="45-restart-the-web-app">4.5 Restart the web app<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#45-restart-the-web-app" class="hash-link" aria-label="Direct link to 4.5 Restart the web app" title="Direct link to 4.5 Restart the web app">​</a></h3>
<p>Configuration changes to the app service may not be applied immediately. To be sure that the app is running correctly, after a successful deployment, restart the web app to make sure that everything is refreshed:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az webapp restart --name &lt;your-web-app-name&gt; --resource-group &lt;your-resource-group&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="46-verify-your-deployment">4.6 Verify your deployment<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#46-verify-your-deployment" class="hash-link" aria-label="Direct link to 4.6 Verify your deployment" title="Direct link to 4.6 Verify your deployment">​</a></h3>
<p>Open the newly deployed web app in a browser, and be sure that it’s running:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az webapp browse --resource-group &lt;your-resource-group&gt; --name &lt;your-webapp-name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-verifying-the-deployment">Step 5: Verifying the Deployment<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#step-5-verifying-the-deployment" class="hash-link" aria-label="Direct link to Step 5: Verifying the Deployment" title="Direct link to Step 5: Verifying the Deployment">​</a></h2>
<ol>
<li><strong>Check Application Functionality</strong>:<!-- -->
<ul>
<li>Open the front-end application in a browser and test its functionality to ensure it communicates with the back-end and middleware services as intended.</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of front end application browser view" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-14-b2331dec9558bc35957745cb9587183c.png" width="1431" height="735" class="img_ev3q"></p>
<p><img loading="lazy" alt="another screenshot of front end application browser view" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-15-71c97b1d8543dd45e56413bc57ab1522.png" width="840" height="1296" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cleanup">Cleanup<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#cleanup" class="hash-link" aria-label="Direct link to Cleanup" title="Direct link to Cleanup">​</a></h3>
<p>Once you have finished deploying and testing your application, it's essential to clean up the resources to avoid incurring any unnecessary costs. You can delete the Azure Resource Group that contains your resources using either the <strong>Azure CLI</strong> or the <strong>Azure portal</strong>. This will remove all the resources within that group, such as the Azure App Service, Azure API Management, and any other services created in the group.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-azure-cli">Using Azure CLI<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#using-azure-cli" class="hash-link" aria-label="Direct link to Using Azure CLI" title="Direct link to Using Azure CLI">​</a></h4>
<p>To delete the resource group using the Azure CLI, follow these steps:</p>
<ul>
<li>Open your terminal or Azure Cloud Shell.</li>
<li>Run the following command to delete the resource group:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az group delete --name &lt;resource-group-name&gt; --yes --no-wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Replace <code>&lt;resource-group-name&gt;</code> with the name of your Azure resource group.</li>
<li>The <code>--yes</code> parameter confirms the deletion without a prompt.</li>
<li>The <code>--no-wait</code> parameter initiates the deletion and immediately returns control to the terminal, so you don't have to wait for the deletion process to complete.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-azure-portal">Using the Azure Portal<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#using-the-azure-portal" class="hash-link" aria-label="Direct link to Using the Azure Portal" title="Direct link to Using the Azure Portal">​</a></h4>
<p>If you prefer to delete the resources using the Azure portal, follow these instructions: </p>
<ul>
<li><strong>Navigate to the Azure Portal:</strong> Go to <a href="http://portal.azure.com/" target="_blank" rel="noopener noreferrer">Azure Portal</a> and sign in with your credentials.</li>
<li><strong>Select "Resource Groups":</strong> In the left-hand menu, select <strong>Resource groups</strong>. This will list all the resource groups available in your subscription.</li>
<li><strong>Find the Resource Group:</strong> Locate the resource group you want to delete (e.g., the resource group that contains your AKS and ACR resources).</li>
<li><strong>Click on the Resource Group:</strong> Click on the resource group name to open it.</li>
<li><strong>Delete the Resource Group:</strong> At the top of the resource group page, click on <strong>Delete resource group</strong>.</li>
<li><strong>Confirm Deletion:</strong> You will be prompted to type the name of the resource group to confirm deletion. Type the name exactly and click on the <strong>Delete</strong> button.</li>
</ul>
<p><img loading="lazy" alt="Azure portal view of deleting the Resource group" src="https://azure.github.io/Cloud-Native/assets/images/1-4b-16-76b86135648e4b31159e6aa52318064e.png" width="1600" height="790" class="img_ev3q"></p>
<p>Deleting a resource group in the Azure portal will remove <strong>all resources</strong> associated with it. Be careful when performing this action, as it cannot be undone.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Learn more on Technical leaders’ <a href="https://aka.ms/AAI_TDMApps_Plan?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">guide to building intelligent apps</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>In this section, we deployed our Java-based back-end and middleware services using the Maven Azure Web App Plugin and verified that they were hosted correctly in Azure App Service. We also deployed the front-end ReactJS application using the deployment center in Azure App Service. These steps ensure that all components are securely hosted and configured for seamless communication.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-2#additional-resources" class="hash-link" aria-label="Direct link to Additional Resources:" title="Direct link to Additional Resources:">​</a></h2>
<ul>
<li><a href="https://github.com/microsoft/azure-maven-plugins/tree/develop/azure-webapp-maven-plugin" target="_blank" rel="noopener noreferrer">Azure Web App Maven Plugin Documentation</a></li>
<li><a href="https://learn.microsoft.com/azure/app-service/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure App Service Documentation</a></li>
<li><a href="https://learn.microsoft.com/azure/app-service/app-service-web-java?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Deploying Java Applications to Azure</a></li>
</ul>]]></content>
        <author>
            <name>#30Days Of IA</name>
            <uri>https://azure.github.io/Cloud-Native/Build-IA/</uri>
        </author>
        <category label="Build-Intelligent-Apps" term="Build-Intelligent-Apps"/>
        <category label="30-days-of-IA-2024" term="30-days-of-IA-2024"/>
        <category label="learn-live" term="learn-live"/>
        <category label="demo-bytes" term="demo-bytes"/>
        <category label="community-gallery" term="community-gallery"/>
        <category label="azure-kubernetes-service" term="azure-kubernetes-service"/>
        <category label="azure-functions" term="azure-functions"/>
        <category label="azure-openai" term="azure-openai"/>
        <category label="azure-container-apps" term="azure-container-apps"/>
        <category label="azure-cosmos-db" term="azure-cosmos-db"/>
        <category label="github-copilot" term="github-copilot"/>
        <category label="github-codespaces" term="github-codespaces"/>
        <category label="github-actions" term="github-actions"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[1.4a Deploy application with Azure App Service Part 1]]></title>
        <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1</id>
        <link href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1"/>
        <updated>2024-10-09T09:02:00.000Z</updated>
        <summary type="html"><![CDATA[In this section, we will configure Azure API Management (APIM) to define and secure our APIs, and then use Azure Key Vault to securely store and access the required secrets for these APIs. This setup ensures that all API endpoints are protected and that sensitive information is securely managed.]]></summary>
        <content type="html"><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-securing-application-with-azure-api-management-and-key-vault-integration">Part 1: Securing Application with Azure API Management and Key Vault Integration<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#part-1-securing-application-with-azure-api-management-and-key-vault-integration" class="hash-link" aria-label="Direct link to Part 1: Securing Application with Azure API Management and Key Vault Integration" title="Direct link to Part 1: Securing Application with Azure API Management and Key Vault Integration">​</a></h2>
<p>In this section, we will configure <strong><a href="https://learn.microsoft.com/azure/api-management/api-management-key-concepts" target="_blank" rel="noopener noreferrer">Azure API Management (APIM)</a></strong> to define and secure our APIs, and then use <strong><a href="https://learn.microsoft.com/azure/key-vault/general/overview" target="_blank" rel="noopener noreferrer">Azure Key Vault</a></strong> to securely store and access the required secrets for these APIs. This setup ensures that all API endpoints are protected and that sensitive information is securely managed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-will-cover">What we will cover:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#what-we-will-cover" class="hash-link" aria-label="Direct link to What we will cover:" title="Direct link to What we will cover:">​</a></h2>
<ol>
<li>Defining and Adding APIs to <strong>Azure API Management</strong></li>
<li>Configuring <strong>Azure Key Vault</strong> and Granting Access </li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>In our previous blog post, we ran the application locally to verify its functionality. Now, we will focus on securing the APIs and managing sensitive data before deploying the application. First, we will define and add the necessary APIs for the back-end and middleware services using <strong>Azure API Management (APIM)</strong>. After configuring APIM, we will set up <strong>Azure Key Vault</strong> to securely store API keys and other sensitive information and grant secure access to these secrets using <a href="https://learn.microsoft.com/azure/app-service/overview-managed-identity?tabs=portal%2Chttp?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Managed Identities</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-defining-and-adding-apis-to-azure-api-management-apim">Step 1: Defining and Adding APIs to Azure API Management (APIM)<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#step-1-defining-and-adding-apis-to-azure-api-management-apim" class="hash-link" aria-label="Direct link to Step 1: Defining and Adding APIs to Azure API Management (APIM)" title="Direct link to Step 1: Defining and Adding APIs to Azure API Management (APIM)">​</a></h2>
<p>We will start by creating and configuring the APIs for both back-end and middleware services in <strong>Azure API Management (APIM)</strong>. Each service will have its own set of operations that clients can interact with. </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-define-and-add-apis-to-apim">1.1 Define and Add APIs to APIM <a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#11-define-and-add-apis-to-apim" class="hash-link" aria-label="Direct link to 1.1 Define and Add APIs to APIM " title="Direct link to 1.1 Define and Add APIs to APIM ">​</a></h3>
<p>To add and configure the APIs for both back-end and middleware services, follow these steps: </p>
<ol>
<li><strong>Navigate to the Azure API Management Service:</strong>
<ul>
<li>Go to the <strong>Azure portal</strong>.</li>
<li>Select your <strong>API Management instance</strong>.</li>
<li>Click on <strong>APIs</strong> and then select <strong>+ Add API</strong>.</li>
</ul>
</li>
</ol>
<p>The screenshot shows the navigation to the "APIs" section in Azure API Management.</p>
<p><img loading="lazy" alt="a screenshot shows the navigation to the &amp;quot;APIs&amp;quot; section in Azure API Management" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-1-196892894326d0d621f5cdf18ac566d5.png" width="436" height="464" class="img_ev3q"></p>
<ol start="2">
<li>
<p><strong>Select the API Type:</strong></p>
<ul>
<li>Choose <strong>HTTP</strong> as the API type since we are exposing HTTP endpoints.</li>
</ul>
</li>
</ol>
<p>The screenshot shows the "Add API" button and the selection of the <strong>HTTP</strong> type. </p>
<p><img loading="lazy" alt="screenshot shows the &amp;quot;Add API&amp;quot; button and the selection of the HTTP type" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-2-81b8ab6faf39be49fe682ad0007a4aaa.png" width="1430" height="490" class="img_ev3q"></p>
<ol start="3">
<li><strong>Configure the API Details</strong>:<!-- -->
<ul>
<li>For each API, configure the following settings:<!-- -->
<ul>
<li><strong>Display Name:</strong> Name of the API (e.g., <code>Product API</code> for back-end, <code>Generate Content API</code> for middleware).</li>
<li><strong>Name:</strong> A unique identifier for the API (e.g., <code>products</code>, <code>generate-content</code>).</li>
<li><strong>URL:</strong> The relative path for the API endpoint (e.g., <code>/api/v1/products</code> for Product List, <code>/api/v1/generate/content</code> for content generation).</li>
<li><strong>Method:</strong> Choose the HTTP method (e.g., <code>GET</code>, <code>POST</code>).</li>
</ul>
</li>
<li>Click <strong>Create</strong> to add the API.</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of HTTP API configuration for backend_service_app_service_URL" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-3-33510a3f3478da9296b84226457770bb.png" width="1432" height="493" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of HTTP API configuration for backend_service_app_service_URL" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-4-1d3aa12245615c3d557552cb464b8b00.png" width="1429" height="678" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of HTTP API configuration for middleware_service_app_service_URL" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-5-1d3aa12245615c3d557552cb464b8b00.png" width="1429" height="678" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of API fields in Azure portal" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-6-7dc8143e0e2c405eaaf347636170ab40.png" width="1429" height="678" class="img_ev3q"></p>
<ol start="4">
<li>
<p><strong>Add Operations for Each API:</strong></p>
<ul>
<li>After the API is created, add operations that define specific actions for the API. Follow these steps for both back-end and middleware services:<!-- -->
<ul>
<li><strong>Back-end Service Operations:</strong>
<ul>
<li><code>GET /api/v1/products</code>: Retrieves a list of products.</li>
<li><code>POST /api/v1/products/similar</code>: Returns similar products based on the request body.</li>
</ul>
</li>
<li><strong>Middleware Service Operations:</strong>
<ul>
<li><code>POST /api/v1/generate/content</code>: Generates content based on input data.</li>
<li><code>POST /api/v1/generate/embeddings</code>: Generates embeddings based on input data.</li>
</ul>
</li>
</ul>
</li>
<li>For each operation, configure the following:<!-- -->
<ul>
<li><strong>Operation Name</strong>: A descriptive name for the operation (e.g., "<code>Get Product List</code>", "<code>Generate Content</code>").</li>
<li><strong>Method</strong>: HTTP method (<code>GET</code> or <code>POST</code>).</li>
<li><strong>URL</strong>: Relative URL path.</li>
<li><strong>Request Body/Parameters</strong>: Define any request body or parameters required for the operation.</li>
</ul>
</li>
<li>Click <strong>Save</strong> to add the operation.</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of ai-study-middleware-apim fields in Azure portal" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-7-7dc8143e0e2c405eaaf347636170ab40.png" width="1429" height="678" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of ai-study-middleware-apim POST fields in Azure portal" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-8-5eb3a0804fb2fe87d4e3b088d505df5d.png" width="1429" height="678" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of ai-study-backend-apim fields in Azure portal" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-9-4e6992ae8b4de8f2eb013e711117f4c3.png" width="1429" height="678" class="img_ev3q"></p>
<ol start="5">
<li><strong>Configure Security Policies for the APIs:</strong>
<ul>
<li>After adding the APIs, go to the <strong>Design</strong> tab for each API and add security policies.<!-- -->
<ul>
<li><strong>Header Check Policy</strong>: Validate the presence of an API key.</li>
<li><strong>CORS Policy</strong>: Allow only specific origins to access the API endpoints.</li>
<li><strong>Rate Limit Policy</strong>: Limit the number of requests a client can make to the API within a specified time frame </li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="header-check-policy">Header Check Policy:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#header-check-policy" class="hash-link" aria-label="Direct link to Header Check Policy:" title="Direct link to Header Check Policy:">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;check-header name="api-key"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">failed-check-httpcode="401"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">failed-check-error-message="API Key Invalid or Not Found" ignore-case="true"&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;API_ACCESS_KEY&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/check-header&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cors-policy">CORS Policy:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#cors-policy" class="hash-link" aria-label="Direct link to CORS Policy:" title="Direct link to CORS Policy:">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;cors allow-credentials="false"&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;allowed-origins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;origin&gt;APP_SERVICE_URL&lt;/origin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/allowed-origins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;allowed-methods&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;method&gt;GET&lt;/method&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;method&gt;POST&lt;/method&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/allowed-methods&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/cors&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rate-limit-policy">Rate Limit Policy:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#rate-limit-policy" class="hash-link" aria-label="Direct link to Rate Limit Policy:" title="Direct link to Rate Limit Policy:">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;rate-limit calls="100" renewal-period="60" /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>This policy limits each client to 100 requests per minute.</li>
</ul>
<p><img loading="lazy" alt="screenshot of code response" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-10-3e353a50bbe4c31c111667064bbceb55.png" width="1429" height="607" class="img_ev3q"></p>
<ol start="6">
<li><strong>Verify the API Configuration:</strong>
<ul>
<li>Once the APIs and operations are defined and secured, verify the configuration by using the <strong>Test</strong> feature in Azure API Management. </li>
<li>Make a sample request to each endpoint to ensure that they respond correctly.This testing will occur after the application has been deployed for both the back-end and middleware services.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="azure-cli-instructions">Azure CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#azure-cli-instructions" class="hash-link" aria-label="Direct link to Azure CLI instructions" title="Direct link to Azure CLI instructions">​</a></h3>
<p>You can create and configure all of the APIs used by our back-end and middleware services by saving and running the following script:</p>
<p>Shell script: Create API and add policy (<code>create-api.sh</code>)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Function to display help  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function display_help() {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Usage: $0 -g &lt;resource-group&gt; -b &lt;backend-url&gt; -m &lt;middleware-url&gt; -f &lt;frontend-url&gt; -ba &lt;backend-apim-name&gt; -ma &lt;middleware-apim-name&gt; [--backend-api-key &lt;backend-api-key&gt;] [--middleware-api-key &lt;middleware-api-key&gt;]"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Options:"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  -g, --resource-group              Azure Resource Group"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  -b, --backend-url                 Backend service URL"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  -m, --middleware-url              Middleware service URL"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  -f, --frontend-url                Frontend service URL"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  -ba, --backend-apim-name          Backend API Management name"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  -ma, --middleware-apim-name       Middleware API Management name"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --backend-api-key                 (Optional) API Key for Backend service"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --middleware-api-key              (Optional) API Key for Middleware service"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  -h, --help                        Display this help message"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 0  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Function to generate API key if not provided  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function generate_api_key() {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo $(uuidgen)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Parse arguments  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while [[ "$#" -gt 0 ]]; do  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case $1 in  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -g|--resource-group) RESOURCE_GROUP="$2"; shift ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -b|--backend-url) BACKEND_URL="$2"; shift ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -m|--middleware-url) MIDDLEWARE_URL="$2"; shift ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -f|--frontend-url) FRONTEND_URL="$2"; shift ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -ba|--backend-apim-name) BACKEND_APIM_NAME="$2"; shift ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -ma|--middleware-apim-name) MIDDLEWARE_APIM_NAME="$2"; shift ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --backend-api-key) BACKEND_API_KEY="$2"; shift ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --middleware-api-key) MIDDLEWARE_API_KEY="$2"; shift ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -h|--help) display_help ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *) echo "Unknown option: $1"; display_help ;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  esac  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  shift  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check for required arguments  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ -z "$RESOURCE_GROUP" || -z "$BACKEND_URL" || -z "$MIDDLEWARE_URL" || -z "$FRONTEND_URL" || -z "$BACKEND_APIM_NAME" || -z "$MIDDLEWARE_APIM_NAME" ]]; then  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Error: Missing required arguments."  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  display_help  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate API keys if not provided  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BACKEND_API_KEY=${BACKEND_API_KEY:-$(generate_api_key)}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIDDLEWARE_API_KEY=${MIDDLEWARE_API_KEY:-$(generate_api_key)}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Using Backend API Key: $BACKEND_API_KEY"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Using Middleware API Key: $MIDDLEWARE_API_KEY"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create Backend API in APIM  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az apim api create \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-name "$BACKEND_APIM_NAME" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --api-id backend-api \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --path /api/v1/products \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --display-name "Backend Product API" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-url "$BACKEND_URL" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --protocols https  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Add Backend API Operations  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az apim api operation create \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-name "$BACKEND_APIM_NAME" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --api-id backend-api \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --url-template "/" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --method GET \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --display-name "Get Product List"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az apim api operation create \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-name "$BACKEND_APIM_NAME" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --api-id backend-api \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --url-template "/similar" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --method POST \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --display-name "Get Similar Product List"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Apply Backend API Policy (CORS, API Key Validation)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az apim api policy create \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-name "$BACKEND_APIM_NAME" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --api-id backend-api \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --xml-policy "  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;inbound&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;base /&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;cors allow-credentials='true'&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;allowed-origins&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;origin&gt;$MIDDLEWARE_URL&lt;/origin&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/allowed-origins&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;allowed-methods&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;method&gt;GET&lt;/method&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;method&gt;POST&lt;/method&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/allowed-methods&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;allowed-headers&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;header&gt;*&lt;/header&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/allowed-headers&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/cors&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;check-header name='api-key' failed-check-httpcode='401' failed-check-error-message='API Key Invalid or Not Found' ignore-case='true'&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;$BACKEND_API_KEY&lt;/value&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/check-header&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/inbound&gt;"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create Middleware API in APIM  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az apim api create \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-name "$MIDDLEWARE_APIM_NAME" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --api-id middleware-api \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --path /api/v1/generate \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --display-name "Middleware Generate API" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-url "$MIDDLEWARE_URL" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --protocols https  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Add Middleware API Operations  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az apim api operation create \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-name "$MIDDLEWARE_APIM_NAME" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --api-id middleware-api \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --url-template "/content" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --method POST \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --display-name "Generate Content"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az apim api operation create \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-name "$MIDDLEWARE_APIM_NAME" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --api-id middleware-api \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --url-template "/embeddings" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --method POST \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --display-name "Generate Embeddings"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Apply Middleware API Policy (CORS, API Key Validation)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az apim api policy create \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --service-name "$MIDDLEWARE_APIM_NAME" \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --api-id middleware-api \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --xml-policy "  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;inbound&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;base /&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;cors allow-credentials='true'&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;allowed-origins&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;origin&gt;$BACKEND_URL&lt;/origin&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;origin&gt;$FRONTEND_URL&lt;/origin&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/allowed-origins&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;allowed-methods&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;method&gt;POST&lt;/method&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/allowed-methods&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;allowed-headers&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;header&gt;*&lt;/header&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/allowed-headers&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/cors&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;check-header name='api-key' failed-check-httpcode='401' failed-check-error-message='API Key Invalid or Not Found' ignore-case='true'&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;value&gt;$MIDDLEWARE_API_KEY&lt;/value&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/check-header&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/inbound&gt;"  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "APIs created and policies applied successfully."  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-does-the-script-do">What does the script do?<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#what-does-the-script-do" class="hash-link" aria-label="Direct link to What does the script do?" title="Direct link to What does the script do?">​</a></h4>
<p>The script configures the following API rules:</p>
<ul>
<li><strong>Allowed origins in CORS:</strong>
<ul>
<li>The back-end API allows only the <strong>middleware URL</strong> as the allowed origin.</li>
<li>The middleware API allows both <strong>back-end URL</strong> and <strong>front-end URL</strong> as allowed origins.</li>
</ul>
</li>
<li><strong>Updated <code>check-header</code> validation:</strong>
<ul>
<li>Replaces <code>validate-header</code> with <code>check-header</code> for API key validation.</li>
<li>Includes failed-check-httpcode="401", <code>failed-check-error-message="API Key Invalid or Not Found"</code>, and <code>ignore-case="true"</code>.</li>
</ul>
</li>
</ul>
<p>After running the script, we’ll have created the APIs to use and will have applied the <code>CORS</code> and <code>check-header</code> policies for both back-end and middleware APIs. The script will also generate the required API keys, if you didn’t already provide them.</p>
<p><img loading="lazy" alt="screenshot of code response script" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-11-eb6cb682b49e4542e48f7a0d64b01021.png" width="1431" height="888" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><a href="https://aka.ms/demo-bytes/ep13?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Ingest your own content</a> using the Azure Functions OpenAI extension into a Cosmos DB vector database to enable OpenAI query on your data.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-configuring-azure-key-vault-and-granting-access">Step 2: Configuring Azure Key Vault and Granting Access<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#step-2-configuring-azure-key-vault-and-granting-access" class="hash-link" aria-label="Direct link to Step 2: Configuring Azure Key Vault and Granting Access" title="Direct link to Step 2: Configuring Azure Key Vault and Granting Access">​</a></h2>
<p>Once the APIs are defined and secured, we need to securely store the API keys and other sensitive information in <strong>Azure Key Vault</strong> and grant the application access to these secrets.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-storing-api-keys-in-key-vault">2.1 Storing API Keys in Key Vault<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#21-storing-api-keys-in-key-vault" class="hash-link" aria-label="Direct link to 2.1 Storing API Keys in Key Vault" title="Direct link to 2.1 Storing API Keys in Key Vault">​</a></h3>
<ol>
<li>Go to your <strong>Azure Key Vault</strong> in the Azure portal.</li>
<li>Select <strong>Secrets</strong> and create a new secret for each API key (e.g., <code>BackendServiceAccessKey</code>, <code>MiddlewareServiceAccessKey</code>).</li>
<li>Update the values with the API keys configured in APIM.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-granting-access-to-key-vault-via-managed-identities">2.2 Granting Access to Key Vault via Managed Identities<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#22-granting-access-to-key-vault-via-managed-identities" class="hash-link" aria-label="Direct link to 2.2 Granting Access to Key Vault via Managed Identities" title="Direct link to 2.2 Granting Access to Key Vault via Managed Identities">​</a></h3>
<ol>
<li>To allow your App Service to access the secrets in Key Vault, enable the <strong>System-assigned Managed Identity:</strong>
<ul>
<li>Navigate to your <strong>Azure App Service</strong>.</li>
<li>Under the <strong>Identity</strong> section, enable "System-assigned Managed Identity".</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of fields under Identity in Azure App Service" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-12-de4fe3adc523bc6581e269c58e793a48.png" width="1431" height="398" class="img_ev3q"></p>
<ol start="2">
<li>In the <strong>Azure Key Vault</strong>, navigate to <strong>Access policies</strong>.</li>
<li>Create a new access policy using the "Secret Management" template.</li>
<li>Select the Managed Identity of your App Service as the principal and grant it <strong>Get</strong> and <strong>List</strong> permissions for secrets.</li>
</ol>
<p><img loading="lazy" alt="screenshot of access configuration" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-13-28638f0ebdda37bb8e15708aa55a16b7.png" width="1431" height="534" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of access policy" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-14-aed39bc68e1a7f9c6ce14b5ba17e8a72.png" width="1431" height="398" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of access policy permissions when creating a new policy" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-15-bc906dc886bbaee816f6024a99bd6b41.png" width="1430" height="1382" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of access policy principal selections when creating a new policy" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-16-bbab999c2f1edaf72d98a603c5dd4774.png" width="1430" height="1382" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of access policy review screen when creating a new policy" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-17-1d38df94a3ed19f6c5f8f2622e549c1c.png" width="1430" height="1382" class="img_ev3q"></p>
<p><img loading="lazy" alt="screenshot of access policy once created" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-18-063e0c057f120d04f2cf73b8d555b44f.png" width="1431" height="693" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-cli-instructions-1">Azure CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#azure-cli-instructions-1" class="hash-link" aria-label="Direct link to Azure CLI instructions" title="Direct link to Azure CLI instructions">​</a></h4>
<p>Run the following commands:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Get the Managed Identity's client ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IDENTITY_CLIENT_ID=$(az webapp identity show --resource-group &lt;resource-group-name&gt; --name &lt;app-service-name&gt; --query principalId --output tsv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Grant access to the Key Vault for the Managed Identity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az keyvault set-policy --name &lt;key-vault-name&gt; --secret-permissions get list --object-id $IDENTITY_CLIENT_ID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-configure-environment-variables-in-app-service">2.3 Configure Environment Variables in App Service<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#23-configure-environment-variables-in-app-service" class="hash-link" aria-label="Direct link to 2.3 Configure Environment Variables in App Service" title="Direct link to 2.3 Configure Environment Variables in App Service">​</a></h3>
<ol>
<li><strong>Navigate to your App Service</strong> in the Azure portal:<!-- -->
<ul>
<li>Go to the <strong>Azure portal</strong> and select your <strong>App Service</strong>.</li>
</ul>
</li>
<li><strong>Open Configuration Settings:</strong>
<ul>
<li>In the left-hand menu, select <strong>Configuration</strong> under the <strong>Settings</strong> section.</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of App Service Configuration Settings in Azure Portal" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-19-4bf0b69f507e1418573b98fd9944b8b7.png" width="1431" height="693" class="img_ev3q"></p>
<ol start="3">
<li><strong>Add a New Application Setting</strong></li>
</ol>
<ul>
<li>In the <strong>Application settings</strong> tab, click on <strong>+ New application setting</strong>.</li>
<li>Enter the following details:<!-- -->
<ul>
<li><strong>Name</strong>: <code>AZURE_KEYVAULT_URL</code></li>
<li><strong>Value</strong>: <code>https://&lt;your-key-vault-name&gt;.vault.azure.net/</code></li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>Save the Changes</strong>:<!-- -->
<ul>
<li>After adding the setting, click <strong>Save</strong> at the top to apply the changes.</li>
</ul>
</li>
</ol>
<p><img loading="lazy" alt="screenshot of the new application setting after saving it in Azure Portal" src="https://azure.github.io/Cloud-Native/assets/images/1-4a-20-cde48bd4a11ba16924db3421e1ac383d.png" width="1431" height="693" class="img_ev3q"></p>
<ol start="5">
<li><strong>Restart the App Service</strong> (if necessary):<!-- -->
<ul>
<li>You may need to restart your App Service for the changes to take effect. You can do this by going to the <strong>Overview</strong> section and clicking on the <strong>Restart</strong> button.</li>
</ul>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-cli-instructions-2">Azure CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#azure-cli-instructions-2" class="hash-link" aria-label="Direct link to Azure CLI instructions" title="Direct link to Azure CLI instructions">​</a></h4>
<p>Run the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Set the environment variable in the App Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az webapp config appsettings set --resource-group &lt;resource-group-name&gt; --name &lt;app-service-name&gt; --settings AZURE_KEYVAULT_URL=https://&lt;key-vault-name&gt;.vault.azure.net/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Join live experts to dive into <a href="https://aka.ms/learn-live/ep3?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">operational excellence with AKS</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>In this section, we created and configured the APIs for both back-end and middleware services using <strong>Azure API Management (APIM)</strong>. We secured the APIs using CORS policies, header checks, and rate limits. After configuring APIM, we securely stored the API keys and other sensitive data in Azure Key Vault and granted access using Managed Identity. This setup ensures that all components interact securely and that sensitive information is managed properly.</p>
<p>In the next section, we will deploy the application using Azure App Service, ensuring it utilizes the secure configurations established here.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/deploy-application-with-azure-app-service-part-1#additional-resources" class="hash-link" aria-label="Direct link to Additional Resources" title="Direct link to Additional Resources">​</a></h2>
<ul>
<li><a href="https://learn.microsoft.com/azure/api-management/api-management-key-concepts?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Understanding Azure API Management</a></li>
<li><a href="https://learn.microsoft.com/azure/key-vault/general/overview?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Getting Started with Azure Key Vault</a></li>
<li><a href="https://learn.microsoft.com/azure/app-service/overview-managed-identity?tabs=portal%2Chttp?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Configuring Managed Identities in Azure</a></li>
</ul>]]></content>
        <author>
            <name>#30Days Of IA</name>
            <uri>https://azure.github.io/Cloud-Native/Build-IA/</uri>
        </author>
        <category label="Build-Intelligent-Apps" term="Build-Intelligent-Apps"/>
        <category label="30-days-of-IA-2024" term="30-days-of-IA-2024"/>
        <category label="learn-live" term="learn-live"/>
        <category label="demo-bytes" term="demo-bytes"/>
        <category label="community-gallery" term="community-gallery"/>
        <category label="azure-kubernetes-service" term="azure-kubernetes-service"/>
        <category label="azure-functions" term="azure-functions"/>
        <category label="azure-openai" term="azure-openai"/>
        <category label="azure-container-apps" term="azure-container-apps"/>
        <category label="azure-cosmos-db" term="azure-cosmos-db"/>
        <category label="github-copilot" term="github-copilot"/>
        <category label="github-codespaces" term="github-codespaces"/>
        <category label="github-actions" term="github-actions"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[1.3b Build Content Generation App Part 2]]></title>
        <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2</id>
        <link href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2"/>
        <updated>2024-10-09T09:01:00.000Z</updated>
        <summary type="html"><![CDATA[Learn how to make the final configuration updates and run our example application for the first time.]]></summary>
        <content type="html"><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-build-and-run-the-application-locally">Part 2: Build and run the application locally<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#part-2-build-and-run-the-application-locally" class="hash-link" aria-label="Direct link to Part 2: Build and run the application locally" title="Direct link to Part 2: Build and run the application locally">​</a></h2>
<p>Learn how to make the final configuration updates and run our example application for the first time.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-cover">What we cover:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#what-we-cover" class="hash-link" aria-label="Direct link to What we cover:" title="Direct link to What we cover:">​</a></h2>
<ul>
<li>Adding required connection strings and other secrets to Azure Key Vault</li>
<li>Starting the back-end service locally</li>
<li>Starting the middleware service locally</li>
<li>Starting the front-end service locally</li>
<li>Managing application secrets when transitioning from local to Azure Kubernetes Service (AKS) or Azure App Service deployments </li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Throughout the last three days of topics, we’ve been working on getting your local dev environment prepared to run our example app and on creating and configuring the Azure services that the app depends on. In our previous topic, we completed this prep work by cloning our example app code from GitHub and then getting our Azure Key Vault configured.</p>
<p>Now we’re ready to run the application for the first time in your local development environment. In today’s post, we walk through adding your app connection secrets to the key vault and finally running the app’s back-end, middleware, and front-end service components.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-add-key-vault-secrets">Step 1. Add key vault secrets.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#step-1-add-key-vault-secrets" class="hash-link" aria-label="Direct link to Step 1. Add key vault secrets." title="Direct link to Step 1. Add key vault secrets.">​</a></h2>
<p>After access is granted, add the following secrets into <strong>Azure Key Vault</strong> to securely configure the back-end and middleware services.</p>
<p><strong>Back-end service secret keys:</strong></p>
<ul>
<li><code>AzureCosmosConnectionString</code></li>
<li><code>MongoDBDatabaseName</code></li>
<li><code>AzureStorageConnectionString</code></li>
<li><code>StorageContainerName</code></li>
<li><code>MiddlewareServiceBaseUrl</code></li>
<li><code>MiddlewareServiceProductEmbeddingEndpoint</code></li>
<li><code>MiddlewareServiceAccessKey</code></li>
</ul>
<p><strong>Middleware service secret keys:</strong></p>
<ul>
<li><code>BackendServiceBaseUrl</code></li>
<li><code>BackendServiceProductEndpoint</code></li>
<li><code>BackendServiceSimilarProductEndpoint</code></li>
<li><code>BackendServiceAccessKey</code></li>
<li><code>AzureOpenAiEndpointUrl</code></li>
<li><code>AzureOpenAiAccessKey</code></li>
<li><code>AzureOpenAiEmbeddingEndpointUrl</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions">CLI instructions <a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#cli-instructions" class="hash-link" aria-label="Direct link to CLI instructions " title="Direct link to CLI instructions ">​</a></h3>
<p>Use the following script when performing these instructions: </p>
<p>Shell script: <code>add-secrets-to-keyvault.sh</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Function to display usage information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Usage: $0 --keyvault-name &lt;keyvault-name&gt; --resource-group &lt;resource-group&gt; --cosmosdb-name &lt;cosmos-mongo&gt; --mongodb-name &lt;dbname&gt; --storage &lt;sa-name&gt; --storage-container &lt;container-name&gt; --openai-name &lt;openai-details&gt; --openai-completion-model &lt;ai-service-completion-deployment-name&gt; --openai-embedding-model &lt;embedding-deployment-name&gt; [options]"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Options:"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --keyvault-name                     Azure Key Vault name (required)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --resource-group                    Azure resource group name (required)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --cosmosdb-name                     CosmosDB name (required)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --mongodb-name                      MongoDB database name (default: ContentGenerator)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --storage                           Azure storage account name (required)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --storage-container                 Storage container name (default: contentgen)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --openai-name                       Azure OpenAI service name (required)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --openai-completion-model           OpenAI chat completion deployment name (default: gpt-4o)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --openai-embedding-model            OpenAI embedding deployment name (default: text-embedding-3-small)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --middleware-base-url               Middleware service base URL (default: http://localhost:8081)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --middleware-product-embedding-endpoint Middleware product embedding endpoint (default: /api/v1/generate/embeddings)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --backend-base-url                  Backend service base URL (default: http://localhost:8080)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --backend-product-endpoint          Backend product endpoint (default: /api/v1/products)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --backend-similar-product-endpoint  Backend similar product endpoint (default: /api/v1/products/similar)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  -h, --help                          Show this help message and exit"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check for help flag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ "$1" == "-h" || "$1" == "--help" ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Function to set or update secrets in Azure Key Vault</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_or_update_secret() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  local secret_name="$1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  local secret_value="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Checking secret: $secret_name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Check if the secret already exists in the Key Vault</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  secret_exists=$(az keyvault secret show --vault-name "$KEYVAULT_NAME" --name "$secret_name" --query "id" --output tsv 2&gt;/dev/null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [[ -n "$secret_exists" ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo "Secret $secret_name already exists. Updating it..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo "Secret $secret_name does not exist. Creating it..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Add the Azure CLI command to set or update the secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  az keyvault secret set --vault-name "$KEYVAULT_NAME" --name "$secret_name" --value "$secret_value" &gt;/dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Default values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MONGO_DB_DATABASE_NAME="ContentGenerator"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STORAGE_CONTAINER_NAME="contentgen"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_COMPLETION_MODEL="gpt-4o"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_EMBEDDING_MODEL="text-embedding-3-small"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BACKEND_BASE_URL="http://localhost:8080"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BACKEND_PRODUCT_ENDPOINT="/api/v1/products"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BACKEND_SIMILAR_PRODUCT_ENDPOINT="/api/v1/products/similar"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIDDLEWARE_BASE_URL="http://localhost:8081"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIDDLEWARE_PRODUCT_EMBEDDING_ENDPOINT="/api/v1/generate/embeddings"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Parse arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while [[ $# -gt 0 ]]; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case "$1" in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --keyvault-name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      KEYVAULT_NAME="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --resource-group)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      RESOURCE_GROUP="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --cosmosdb-name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      COSMOSDB_NAME="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --mongodb-name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MONGO_DB_DATABASE_NAME="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --storage)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      STORAGE_ACCOUNT_NAME="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --storage-container)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      STORAGE_CONTAINER_NAME="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --openai-name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      OPENAI_NAME="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --openai-completion-model)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      OPENAI_COMPLETION_MODEL="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --openai-embedding-model)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      OPENAI_EMBEDDING_MODEL="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --middleware-base-url)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MIDDLEWARE_BASE_URL="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --middleware-product-embedding-endpoint)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MIDDLEWARE_PRODUCT_EMBEDDING_ENDPOINT="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --backend-base-url)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      BACKEND_BASE_URL="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --backend-product-endpoint)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      BACKEND_PRODUCT_ENDPOINT="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --backend-similar-product-endpoint)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      BACKEND_SIMILAR_PRODUCT_ENDPOINT="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo "Unknown option: $1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  esac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Validate required arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ -z "$KEYVAULT_NAME" || -z "$RESOURCE_GROUP" || -z "$COSMOSDB_NAME" || -z "$STORAGE_ACCOUNT_NAME" || -z "$OPENAI_NAME" || -z "$OPENAI_EMBEDDING_MODEL" ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Error: Missing required arguments."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate UUIDs for access keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BACKEND_SERVICE_ACCESS_KEY=$(uuidgen)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIDDLEWARE_SERVICE_ACCESS_KEY=$(uuidgen)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Fetch Azure OpenAI service endpoint and keys using az cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_ENDPOINT_URL=$(az cognitiveservices account show --name "$OPENAI_NAME" --resource-group "$RESOURCE_GROUP" --query "properties.endpoint" --output tsv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_ACCESS_KEY=$(az cognitiveservices account keys list --name "$OPENAI_NAME" --resource-group "$RESOURCE_GROUP" --query "key1" --output tsv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Construct the completion and embedding endpoints dynamically</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_COMPLETION_ENDPOINT_URL="$AZURE_OPENAI_ENDPOINT_URL/openai/deployments/$OPENAI_COMPLETION_MODEL/chat/completions?api-version=2023-03-15-preview"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_EMBEDDING_ENDPOINT_URL="$AZURE_OPENAI_ENDPOINT_URL/openai/deployments/$OPENAI_EMBEDDING_MODEL/embeddings?api-version=2023-05-15"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Retrieve other secrets using Azure CLI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_COSMOS_CONNECTION_STRING=$(az cosmosdb keys list --resource-group "$RESOURCE_GROUP" --name "$COSMOSDB_NAME" --type connection-strings --query "connectionStrings[0].connectionString" --output tsv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_STORAGE_CONNECTION_STRING=$(az storage account show-connection-string --resource-group "$RESOURCE_GROUP" --name "$STORAGE_ACCOUNT_NAME" --query connectionString --output tsv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># List of secrets to set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">secrets=(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "BackendServiceBaseUrl" "$BACKEND_BASE_URL"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "BackendServiceProductEndpoint" "$BACKEND_PRODUCT_ENDPOINT"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "BackendServiceSimilarProductEndpoint" "$BACKEND_SIMILAR_PRODUCT_ENDPOINT"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "BackendServiceAccessKey" "$BACKEND_SERVICE_ACCESS_KEY"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "AzureOpenAiEndpointUrl" "$AZURE_OPENAI_ENDPOINT_URL"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "AzureOpenAiAccessKey" "$AZURE_OPENAI_ACCESS_KEY"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "AzureOpenAiCompletionEndpointUrl" "$AZURE_OPENAI_COMPLETION_ENDPOINT_URL"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "AzureOpenAiEmbeddingEndpointUrl" "$AZURE_OPENAI_EMBEDDING_ENDPOINT_URL"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "MiddlewareServiceBaseUrl" "$MIDDLEWARE_BASE_URL"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "MiddlewareServiceProductEmbeddingEndpoint" "$MIDDLEWARE_PRODUCT_EMBEDDING_ENDPOINT"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "MiddlewareServiceAccessKey" "$MIDDLEWARE_SERVICE_ACCESS_KEY"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "AzureCosmosConnectionString" "$AZURE_COSMOS_CONNECTION_STRING"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "MongoDBDatabaseName" "$MONGO_DB_DATABASE_NAME"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "AzureStorageConnectionString" "$AZURE_STORAGE_CONNECTION_STRING"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "StorageContainerName" "$STORAGE_CONTAINER_NAME"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Loop through the array and set or update each secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for ((i=0; i&lt;${#secrets[@]}; i+=2)); do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  secret_name="${secrets[$i]}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  secret_value="${secrets[$i+1]}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Call the set_or_update_secret function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set_or_update_secret "$secret_name" "$secret_value"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Secrets have been set or updated successfully." </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="script-overview">Script overview <a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#script-overview" class="hash-link" aria-label="Direct link to Script overview " title="Direct link to Script overview ">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="required-arguments">Required arguments<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#required-arguments" class="hash-link" aria-label="Direct link to Required arguments" title="Direct link to Required arguments">​</a></h4>
<p>These arguments are mandatory for the script to run successfully:</p>
<ul>
<li>
<p><code>--keyvault-name &lt;keyvault-name&gt;</code>: The name of the Azure key vault where secrets will be set or updated.</p>
</li>
<li>
<p><code>--resource-group &lt;resource-group&gt;</code>: The Azure resource group that contains the resources (for example, Key Vault, Azure Cosmos DB) to be used.</p>
</li>
<li>
<p><code>--cosmosdb-name &lt;cosmos-mongo&gt;</code>: The name of the Azure Cosmos DB instance (MongoDB API).</p>
</li>
<li>
<p><code>--storage &lt;sa-name&gt;</code>: The name of the Azure Storage account used for storing data.</p>
</li>
<li>
<p><code>--openai-name &lt;openai-details&gt;</code>: The name of the Azure OpenAI Service instance.</p>
</li>
<li>
<p><code>--openai-embedding-model &lt;embedding-deployment-name&gt;</code>: The deployment name for the Azure OpenAI embedding model.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optional-arguments">Optional arguments<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#optional-arguments" class="hash-link" aria-label="Direct link to Optional arguments" title="Direct link to Optional arguments">​</a></h4>
<p>These arguments have default values and can be overridden if needed:</p>
<ul>
<li>
<p><code>--mongodb-name &lt;dbname&gt;</code>: Name of the MongoDB database.<br>
<strong>Default value</strong>: <code>ContentGenerator</code></p>
</li>
<li>
<p><code>--storage-container &lt;container-name&gt;</code>: Name of the storage container within the Azure Storage account.<br>
<strong>Default value</strong>: <code>contentgen</code></p>
</li>
<li>
<p><code>--openai-completion-model &lt;ai-service-completion-deployment-name&gt;</code>: Deployment name for the Azure OpenAI chat completion model.<br>
<strong>Default value</strong>: <code>gpt-4o</code></p>
</li>
<li>
<p><code>--middleware-base-url &lt;url&gt;</code>: Base URL for the middleware service.<br>
<strong>Default value</strong>: <code>http://localhost:8081</code></p>
</li>
<li>
<p><code>--middleware-product-embedding-endpoint &lt;endpoint&gt;</code>: Endpoint for the product embedding service in the middleware.<br>
<strong>Default value</strong>: <code>/api/v1/generate/embeddings</code></p>
</li>
<li>
<p><code>--backend-base-url &lt;url&gt;</code>: Base URL for the back-end service.<br>
<strong>Default value</strong>: <code>http://localhost:8080</code></p>
</li>
<li>
<p><code>--backend-product-endpoint &lt;endpoint&gt;</code>: Endpoint for accessing product data in the back-end service.<br>
<strong>Default value</strong>: <code>/api/v1/products</code></p>
</li>
<li>
<p><code>--backend-similar-product-endpoint &lt;endpoint&gt;</code>: Endpoint for accessing similar product data in the back-end service.<br>
<strong>Default value</strong>: <code>/api/v1/products/similar</code></p>
</li>
</ul>
<p>Save this script, and then run it using the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./add-secrets-to-keyvault.sh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --keyvault-name &lt;keyvault-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --resource-group &lt;resource-group&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --cosmosdb-name &lt;cosmos-mongo&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --mongodb-name &lt;dbname&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --storage &lt;sa-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --storage-container &lt;container-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --openai-name &lt;openai-details&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --openai-completion-model &lt;ai-service-completion-deployment-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --openai-embedding-model &lt;embedding-deployment-name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="Code lines: add-secrets-to-keyvault.sh" src="https://azure.github.io/Cloud-Native/assets/images/1-3b-1-25cc55f1ef08be5592996273f56ce03c.png" width="1429" height="612" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><a href="https://aka.ms/demo-bytes/ep13?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Ingest your own content</a> using the Azure Functions OpenAI extension into a Cosmos DB vector database to enable OpenAI query on your data.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-run-the-back-end-service-locally">Step 2. Run the back-end service locally<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#step-2-run-the-back-end-service-locally" class="hash-link" aria-label="Direct link to Step 2. Run the back-end service locally" title="Direct link to Step 2. Run the back-end service locally">​</a></h2>
<ol>
<li>
<p><strong>Navigate to the back-end folder</strong>. In your terminal, navigate to the back-end folder in the cloned repo.</p>
</li>
<li>
<p><strong>Open the folder in your IDE</strong>. Use <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">Visual Studio Code</a> or <a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener noreferrer">IntelliJ IDEA</a> to open the back-end folder.</p>
</li>
<li>
<p><strong>Add Key Vault environment variables</strong>. Be sure that the following variable is set in your local environment:</p>
<ul>
<li><code>AZURE_KEYVAULT_URI</code>: The URL of your Key Vault.</li>
</ul>
</li>
<li>
<p><strong>Run the back-end service</strong>. To start the back-end service, run the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mvnw spring-boot:run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of the back-end service command running" src="https://azure.github.io/Cloud-Native/assets/images/1-3b-2-708c7d5cd5d410e52e7b2b41aca824a0.png" width="1431" height="752" class="img_ev3q"></p>
<p>The back-end service will run on port <strong>8080</strong>.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-run-the-middleware-service-locally">Step 3: Run the middleware service locally<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#step-3-run-the-middleware-service-locally" class="hash-link" aria-label="Direct link to Step 3: Run the middleware service locally" title="Direct link to Step 3: Run the middleware service locally">​</a></h2>
<ol>
<li>
<p><strong>Navigate to the middleware folder</strong>. Open another terminal window, and navigate to the middleware folder.</p>
</li>
<li>
<p><strong>Change the port for middleware</strong>. Open the <code>application.properties</code> file in the middleware folder, and change the default port to <code>8081</code> by adding:</p>
<p><img loading="lazy" alt="Code in application properties file" src="https://azure.github.io/Cloud-Native/assets/images/1-3b-3-v2-c36cb352793b4f9dc8efb568e448cd29.png" width="591" height="624" class="img_ev3q"></p>
</li>
<li>
<p><strong>Add key vault environment variables.</strong> Set the environment variables as itemized <code>(AZURE_KEYVAULT_URI)</code>. </p>
</li>
<li>
<p><strong>Run the middleware service.</strong> Use the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mvnw spring-boot:run  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="Results of running  mvnw spring boot run" src="https://azure.github.io/Cloud-Native/assets/images/1-3b-4-560cfee53ef63813bb9df9eec3ec00f5.png" width="1431" height="514" class="img_ev3q"></p>
</li>
</ol>
<p>The middleware will run on port <strong>8081</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-run-the-front-end-service-locally">Step 4: Run the front-end service locally<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#step-4-run-the-front-end-service-locally" class="hash-link" aria-label="Direct link to Step 4: Run the front-end service locally" title="Direct link to Step 4: Run the front-end service locally">​</a></h2>
<ol>
<li>
<p><strong>Navigate to the front-end folder</strong>. Go to the front-end folder in your cloned repo.</p>
</li>
<li>
<p><strong>Copy the <code>.env.example file</code></strong>. Copy the <code>.env.example</code> file, and rename it to <code>.env</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cp .env.example .env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configure the <code>.env file</code>. Update the following variables in the <code>.env</code> file:</p>
<p><img loading="lazy" alt="List of variables to update in the env file." src="https://azure.github.io/Cloud-Native/assets/images/1-3b-5-b2ee73fbbe806e8206f77ec0809e0f41.png" width="1156" height="350" class="img_ev3q"></p>
</li>
<li>
<p><strong>Install dependencies.</strong> Run npm install or yarn install to install the necessary front-end dependencies. </p>
</li>
<li>
<p><strong>Run the front-end service.</strong> Start the front-end service using one of the following commands:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm start  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yarn start  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>Note:</strong> At this point, you’re prompted to sign in with your Microsoft Entra ID credentials. The front end authenticates the user with Microsoft Entra ID (user identity). After you sign in, the following screen appears.</p>
<p><img loading="lazy" alt="App Modernization Content Generation Sample screen that say Effortless Marketing Content at Your Fingertips." src="https://azure.github.io/Cloud-Native/assets/images/1-3b-6-09ca215fa6822f3484b825997cd98f43.png" width="1431" height="773" class="img_ev3q"></p>
<p>The front end runs on <code>http://localhost:3000</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-vs-deployment-environments">Local vs. deployment environments<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#local-vs-deployment-environments" class="hash-link" aria-label="Direct link to Local vs. deployment environments" title="Direct link to Local vs. deployment environments">​</a></h3>
<p>For local development, you can set the <strong>endpoint URLs</strong> directly in <code>.env</code> or <code>application.properties</code> files. However, after deployment to <strong>AKS</strong> or <strong>App Service</strong>, you need to update the <strong>Key Vault secrets</strong> to reflect the public-facing URLs and credentials:</p>
<ul>
<li>
<p><strong>Back-end and middleware URLs:</strong> Replace <code>localhost</code> with the public URL of your deployed services.</p>
</li>
<li>
<p><strong>API Management:</strong> When deployed, make sure that API keys and exposed API URLs are managed through <strong>API Management</strong>.</p>
</li>
</ul>
<p>We’ll cover the details of deploying to AKS or App Service and using API Management in subsequent topics.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Learn more on Technical leaders’ <a href="https://aka.ms/AAI_TDMApps_Plan?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">guide to building intelligent apps</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-2#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>In today’s topic, we finished configuring the app’s connection strings and other secrets in Azure Key Vault. Then we got the back-end, middleware, and front-end services running on your local machine, allowing you to test the app in your browser.</p>
<p>Now that you’ve got a running app, our next topic will cover deploying it to Azure using either <strong>Azure Kubernetes Service (AKS)</strong> or <strong>Azure App Service</strong>, along with configuring <strong>Azure API Management</strong> to help ensure that your APIs are secured using key-based authentication.</p>]]></content>
        <author>
            <name>#30Days Of IA</name>
            <uri>https://azure.github.io/Cloud-Native/Build-IA/</uri>
        </author>
        <category label="Build-Intelligent-Apps" term="Build-Intelligent-Apps"/>
        <category label="30-days-of-IA-2024" term="30-days-of-IA-2024"/>
        <category label="learn-live" term="learn-live"/>
        <category label="demo-bytes" term="demo-bytes"/>
        <category label="community-gallery" term="community-gallery"/>
        <category label="azure-kubernetes-service" term="azure-kubernetes-service"/>
        <category label="azure-functions" term="azure-functions"/>
        <category label="azure-openai" term="azure-openai"/>
        <category label="azure-container-apps" term="azure-container-apps"/>
        <category label="azure-cosmos-db" term="azure-cosmos-db"/>
        <category label="github-copilot" term="github-copilot"/>
        <category label="github-codespaces" term="github-codespaces"/>
        <category label="github-actions" term="github-actions"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[1.3a Build Content Generation App Part 1]]></title>
        <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1</id>
        <link href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1"/>
        <updated>2024-10-09T09:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn how to download our example app code, and prepare to run it in your local dev environment.]]></summary>
        <content type="html"><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-download-and-configure-app-code">Part 1: Download and configure app code<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#part-1-download-and-configure-app-code" class="hash-link" aria-label="Direct link to Part 1: Download and configure app code" title="Direct link to Part 1: Download and configure app code">​</a></h2>
<p>Learn how to download our example app code, and prepare to run it in your local dev environment.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-cover">What we cover:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#what-we-cover" class="hash-link" aria-label="Direct link to What we cover:" title="Direct link to What we cover:">​</a></h2>
<ul>
<li>Downloading the app code from GitHub to your local machine</li>
<li>Setting up app secrets and connecting them to Azure Key Vault</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>In the previous topic, we finished setting up the local tools and Azure services we need to run our app in your local development environment. In this blog, we walk you through getting the app code set up on your dev machine. This involves cloning the app code’s GitHub repository to your local machine. In addition, we’ll securely configure the app’s connection strings and other secrets using a key vault that will be used in both your local environment and in the Azure Kubernetes Service (AKS) or Azure App Service hosting environments that you’ll use when deploying to Azure.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-architecture-diagram--local-setup">System Architecture Diagram – Local Setup<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#system-architecture-diagram--local-setup" class="hash-link" aria-label="Direct link to System Architecture Diagram – Local Setup" title="Direct link to System Architecture Diagram – Local Setup">​</a></h2>
<p>Before diving into the setup and configuration details, let's take a look at the overall architecture of the Content Generation System. The architecture diagram below illustrates the key components and their interactions, including the backend, middleware, and frontend services, as well as how they integrate with Azure Key Vault and other Azure services.</p>
<p><img loading="lazy" alt="architecture diagram of the key components and their interactions, including the backend, middleware, and frontend services, as well as how they integrate with Azure Key Vault and other Azure services" src="https://azure.github.io/Cloud-Native/assets/images/1-3a-1-56fd412a2e1884cd638d88fcc1b0ee11.png" width="1430" height="723" class="img_ev3q"></p>
<p><strong>In the diagram:</strong> </p>
<ul>
<li><strong>Frontend Service:</strong> Users interact with this component through the web interface. It communicates with the backend and middleware services.</li>
<li><strong>Middleware Service:</strong> Acts as an intermediary, handling requests between the frontend and backend services.</li>
<li><strong>Backend Service:</strong> Contains the core logic and data access layers for the content generation functionality.</li>
<li><strong>Azure Key Vault:</strong> Stores and manages secrets used by the services for secure access to configuration and credentials.</li>
<li><strong>Azure Cosmos DB:</strong> Database service used for storing and retrieving content data.</li>
<li><strong>Azure Storage:</strong> Manages storage of files and other data used by the application.</li>
<li><strong>Azure OpenAI:</strong> Provides AI-based services for content generation and embedding.</li>
</ul>
<p>Now that you have a high-level understanding of the architecture, let’s proceed with the steps to set up and run the application locally.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-clone-the-github-repository">Step 1. Clone the GitHub repository<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#step-1-clone-the-github-repository" class="hash-link" aria-label="Direct link to Step 1. Clone the GitHub repository" title="Direct link to Step 1. Clone the GitHub repository">​</a></h2>
<p>Begin by cloning the repository for the <strong>Java AI-Based Content Generator</strong>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/Azure-Samples/Java-AI-Based-Content-Generator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><a href="https://aka.ms/demo-bytes/ep13?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Ingest your own content</a> using the Azure Functions OpenAI extension into a Cosmos DB vector database to enable OpenAI query on your data.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-set-up-azure-key-vault-secrets-and-user-identity-local-setup">Step 2: Set Up Azure Key Vault Secrets and User Identity (Local Setup)<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#step-2-set-up-azure-key-vault-secrets-and-user-identity-local-setup" class="hash-link" aria-label="Direct link to Step 2: Set Up Azure Key Vault Secrets and User Identity (Local Setup)" title="Direct link to Step 2: Set Up Azure Key Vault Secrets and User Identity (Local Setup)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-set-key-vault-url-and-authentication-environment-variables">1. Set Key Vault URL and Authentication Environment Variables<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#1-set-key-vault-url-and-authentication-environment-variables" class="hash-link" aria-label="Direct link to 1. Set Key Vault URL and Authentication Environment Variables" title="Direct link to 1. Set Key Vault URL and Authentication Environment Variables">​</a></h3>
<p>Before running the services, you must set the environment variables required to access Azure Key Vault securely.</p>
<ul>
<li><strong>Azure Key Vault URL</strong>:<!-- -->
<ul>
<li>Set this in your environment as <code>AZURE_KEYVAULT_URI</code> using the URL of your Key Vault.</li>
</ul>
</li>
<li><strong>Configure Spring Cloud Azure</strong>:<!-- -->
<ul>
<li>Ensure that you have the <a href="https://spring.io/projects/spring-cloud-azure#overview" target="_blank" rel="noopener noreferrer">Spring Cloud Azure</a> dependencies added to your project. Spring Cloud Azure provides integration with Azure services and supports using different credential types.</li>
<li>By default, Spring Cloud Azure will attempt to use multiple credential builders to authenticate, including:<!-- -->
<ul>
<li><code>EnvironmentCredential</code></li>
<li><code>WorkloadIdentityCredential</code></li>
<li><code>ManagedIdentityCredential</code></li>
<li><code>SharedTokenCacheCredential</code></li>
<li><code>IntelliJCredential</code></li>
<li><code>VSCodeCredential</code></li>
<li><code>AzureCliCredential</code></li>
</ul>
</li>
<li>For local development, the application will use <code>AzureCliCredential</code> if no other credentials are configured. This ensures that your local environment can authenticate and interact with Azure services seamlessly.</li>
</ul>
</li>
</ul>
<p>For more details on configuring and using Spring Cloud Azure with Key Vault, refer to the <a href="https://learn.microsoft.com/azure/developer/java/spring-framework/authentication?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Spring Cloud Azure authentication documentation</a>.</p>
<p><img loading="lazy" alt="image of the application properties variables" src="https://azure.github.io/Cloud-Native/assets/images/1-3a-2-ad5456185764fd983dc0431a639bb90d.png" width="1086" height="196" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-assign-key-vault-administrator-role">2. Assign Key Vault Administrator Role<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#2-assign-key-vault-administrator-role" class="hash-link" aria-label="Direct link to 2. Assign Key Vault Administrator Role" title="Direct link to 2. Assign Key Vault Administrator Role">​</a></h3>
<ul>
<li>Go to the <strong>Azure Portal</strong>.</li>
<li>In the left-hand menu, select <strong>Resource groups</strong> and choose the resource group that contains your Key Vault.</li>
<li>Select your <strong>Key Vault</strong> from the list of resources.</li>
<li>In the Key Vault menu, navigate to <strong>Access control (IAM)</strong>.</li>
<li>Click on the <strong>+ Add button</strong> at the top and select Add role assignment.</li>
<li>In the <strong>Role</strong> dropdown, search for and select <strong>Key Vault Administrator</strong>.</li>
<li>In the <strong>Assign access to</strong> field, choose <strong>User, group, or service principal</strong>.</li>
<li>Search for your user (or the user who will manage secrets) and click <strong>Select</strong>.</li>
<li>Finally, click <strong>Review + assign</strong>.</li>
</ul>
<p>This role gives the user permission to manage secrets in the Key Vault.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-user-identity-for-local-development">Configure User Identity for Local Development<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#configure-user-identity-for-local-development" class="hash-link" aria-label="Direct link to Configure User Identity for Local Development" title="Direct link to Configure User Identity for Local Development">​</a></h3>
<p>For local development, you can use Azure CLI credentials to authenticate with Azure Key Vault. Follow these steps:</p>
<ol>
<li>
<p><strong>Install Azure CLI:</strong> Ensure that the <a href="https://docs.microsoft.com/cli/azure/install-azure-cli?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure CLI</a> is installed on your local machine.</p>
</li>
<li>
<p>Open your command-line interface (CLI) and run the following command to login:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Follow the prompts to complete the authentication process. This command authenticates your local CLI session and stores the necessary credentials.</p>
</li>
<li>
<p><strong>Access Key Vault Secrets:</strong> After running <code>az login</code>, your application will use the Azure CLI session to authenticate with Azure Key Vault and retrieve secrets during local development.</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Join live experts to dive into <a href="https://aka.ms/learn-live/ep3?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">operational excellence with AKS</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/build-content-generation-app-part-1#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>In this blog, we cloned our example app code onto your local development machine, and we set up the required environment variables needed to run the app. In addition, we configured the Azure Key Vault settings to securely store the secrets, such as connection strings and keys, that you’ll use when running the app.  </p>
<p>In our next blog, we’ll walk through adding those secrets to your key vault and then we’ll build and run the app for the first time in your local development environment.</p>]]></content>
        <author>
            <name>#30Days Of IA</name>
            <uri>https://azure.github.io/Cloud-Native/Build-IA/</uri>
        </author>
        <category label="Build-Intelligent-Apps" term="Build-Intelligent-Apps"/>
        <category label="30-days-of-IA-2024" term="30-days-of-IA-2024"/>
        <category label="learn-live" term="learn-live"/>
        <category label="demo-bytes" term="demo-bytes"/>
        <category label="community-gallery" term="community-gallery"/>
        <category label="azure-kubernetes-service" term="azure-kubernetes-service"/>
        <category label="azure-functions" term="azure-functions"/>
        <category label="azure-openai" term="azure-openai"/>
        <category label="azure-container-apps" term="azure-container-apps"/>
        <category label="azure-cosmos-db" term="azure-cosmos-db"/>
        <category label="github-copilot" term="github-copilot"/>
        <category label="github-codespaces" term="github-codespaces"/>
        <category label="github-actions" term="github-actions"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[1.2b Setting Up Your Development Environment Part 2]]></title>
        <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2</id>
        <link href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2"/>
        <updated>2024-09-24T09:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn how to create and configure the Azure OpenAI Service resource that we’ll use in our example app.]]></summary>
        <content type="html"><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="12b-setting-up-your-development-environment">1.2b. Setting up your development environment<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#12b-setting-up-your-development-environment" class="hash-link" aria-label="Direct link to 1.2b. Setting up your development environment" title="Direct link to 1.2b. Setting up your development environment">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-preparing-the-azure-openai-service-resource">Part 2. Preparing the Azure OpenAI Service resource<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#part-2-preparing-the-azure-openai-service-resource" class="hash-link" aria-label="Direct link to Part 2. Preparing the Azure OpenAI Service resource" title="Direct link to Part 2. Preparing the Azure OpenAI Service resource">​</a></h2>
<p>Learn how to create and configure the Azure OpenAI Service resource that we’ll use in our example app.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-cover">What we cover:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#what-we-cover" class="hash-link" aria-label="Direct link to What we cover:" title="Direct link to What we cover:">​</a></h3>
<ul>
<li>Creating an Azure OpenAI instance</li>
<li>Setting up Azure API Management</li>
<li>Exploring the options for creating our app hosting environments on Azure</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>In our <a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1" target="_blank" rel="noopener noreferrer">previous post</a>, we discussed setting up your local development environment and creating the Azure-based database, storage, and secret management services that you’ll use when running our application. In this post, we set up the Azure OpenAI instance that provides the core of our content generation capabilities. After you’ve created the Azure OpenAI instance, we’ll finish our preparation tasks by setting up Azure API Management and then finally creating our preferred app hosting resources (Azure Kubernetes Service [AKS] or Azure App Service).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-set-up-azure-openai">Step 1. Set up Azure OpenAI<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#step-1-set-up-azure-openai" class="hash-link" aria-label="Direct link to Step 1. Set up Azure OpenAI" title="Direct link to Step 1. Set up Azure OpenAI">​</a></h2>
<p>Create two Azure OpenAI deployments—one for <strong>GPT-4o</strong> (chat completion) and another for <strong>text embedding</strong>.</p>
<ol>
<li><strong>Create a new Azure OpenAI resource</strong>. Go to the Azure portal, and search for <strong>Azure OpenAI</strong>.</li>
<li>Deploy two separate instances:<!-- -->
<ul>
<li><strong>Chat completion (GPT-4o)</strong> for generating content.</li>
<li><strong>Embedding model</strong> for semantic search functionality.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-azure-openai-resource">Create the Azure OpenAI resource<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#create-the-azure-openai-resource" class="hash-link" aria-label="Direct link to Create the Azure OpenAI resource" title="Direct link to Create the Azure OpenAI resource">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#azure-portal-instructions" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h4>
<ol>
<li>
<p>Use the Azure portal to deploy <strong>Azure OpenAI</strong>.</p>
<p><img loading="lazy" alt="The &amp;quot;Create Azure OpenAI&amp;quot; screen in the Azure portal." src="https://azure.github.io/Cloud-Native/assets/images/2-1b-1-95d91f548c955da1f4d308eb2dca54a6.png" width="703" height="744" class="img_ev3q"></p>
</li>
<li>
<p>After provisioning Azure, open Azure OpenAI and go to <strong>Azure OpenAI Studio</strong>.</p>
<p><img loading="lazy" alt="The &amp;quot;aistudy-chatcompletion&amp;quot; screen in the Azure portal, with the focus on &amp;quot;Go to Azure OpenAI Studio.&amp;quot;" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-2-75c9f77b1c8c638584cdc7e9cd6ee723.png" width="739" height="782" class="img_ev3q"></p>
</li>
<li>
<p>Go to <strong>Deployments</strong>, and then deploy the models.</p>
<p><img loading="lazy" alt="The &amp;quot;Manage deployments of your models...&amp;quot; screen in the Azure portal, with the focus on &amp;quot;Deployments&amp;quot; and &amp;quot;Deploy base model.&amp;quot;" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-3-ca321fa9aa37bd36dacbfd965ce99970.png" width="705" height="782" class="img_ev3q"></p>
</li>
<li>
<p>Search <strong>GPT-4o</strong> for chat completion. Set tokens-per-minute rate limit (depending on response length), and deploy.</p>
<p><img loading="lazy" alt="alt: The &amp;quot;Deploy model gpt-4o&amp;quot; screen in the Azure portal, with the focus on &amp;quot;Tokens per Minute Rate Limit.&amp;quot;" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-4-79661e58b7d283c7faa3bad7a67165cb.png" width="696" height="780" class="img_ev3q"></p>
<p>Make sure to save the <strong>Target URI</strong> and <strong>Key</strong> for future use.</p>
<p><img loading="lazy" alt="The &amp;quot;gpt-4o&amp;quot; screen in the Azure portal, with the focus on &amp;quot;Endpoint.&amp;quot;" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-5-6e9e14a794226692a5d99ad6bf0e9868.png" width="782" height="377" class="img_ev3q"></p>
<p>Deploy the <strong>text-embedding-3-small</strong> model to embed the data in the same way.</p>
<p><img loading="lazy" alt="The &amp;quot;text-embedding-3-small&amp;quot; screen in the Azure portal, with the focus on &amp;quot;Endpoint.&amp;quot;" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-6-882553452920716eedbd8adceb78c287.png" width="782" height="401" class="img_ev3q"></p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions">CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#cli-instructions" class="hash-link" aria-label="Direct link to CLI instructions" title="Direct link to CLI instructions">​</a></h4>
<p>Use the following script when performing these instructions:</p>
<p>Shell script: <code>create-openai-resource.sh</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Function to display help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function display_help() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Usage: $0 --name &lt;OpenAI Account Name&gt; --resource-group &lt;Resource Group Name&gt; --location &lt;Location&gt; [--help]"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Options:"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --name              The display name of the Azure OpenAI account."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --resource-group    The name of the Azure resource group."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --location          The Azure region/location for the resource. (e.g., eastus, westus)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --help              Display this help message and exit."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Function to check if the user is logged in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function check_azure_login() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Checking Azure CLI login status..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  az account show &amp;&gt; /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ $? -ne 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo "You are not logged in. Logging in now..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    az login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [ $? -ne 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo "Azure login failed. Exiting script."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo "You are already logged in."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Parse command line arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_ACCOUNT_NAME=""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RESOURCE_GROUP=""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LOCATION=""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while [[ $# -gt 0 ]]; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case "$1" in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      OPENAI_ACCOUNT_NAME="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --resource-group)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      RESOURCE_GROUP="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --location)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      LOCATION="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --help)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      display_help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo "Unknown option: $1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      display_help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  esac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ensure required arguments are provided</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ -z "$OPENAI_ACCOUNT_NAME" || -z "$RESOURCE_GROUP" || -z "$LOCATION" ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Error: --name, --resource-group, and --location are required."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  display_help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 0: Check if logged in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_azure_login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 1: Create resource group (if not exists)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Creating resource group $RESOURCE_GROUP (if it doesn't already exist)..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az group create --name "$RESOURCE_GROUP" --location "$LOCATION"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 2: Create OpenAI resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Creating Azure OpenAI resource..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az cognitiveservices account create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name "$OPENAI_ACCOUNT_NAME" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --kind OpenAI \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sku S0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --location "$LOCATION" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 3: Deploy GPT-4o model with increased token limit (10K capacity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Deploying GPT-4o model..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az cognitiveservices account deployment create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name "$OPENAI_ACCOUNT_NAME" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --deployment-name "gpt-4o-deployment" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --model-name "gpt-4o" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --model-version "2024-05-13" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --model-format OpenAI \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sku-capacity 10 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sku-name "Standard"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 4: Deploy text-embedding-3-small model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Deploying text-embedding-3-small model..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az cognitiveservices account deployment create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name "$OPENAI_ACCOUNT_NAME" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --deployment-name "text-embedding-3-small-deployment" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --model-name "text-embedding-3-small" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --model-version "1" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --model-format OpenAI \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sku-name "Standard" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sku-capacity 120 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Verify deployments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Listing deployed models..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az cognitiveservices account deployment list \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name "$OPENAI_ACCOUNT_NAME" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group "$RESOURCE_GROUP"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run the script.</p>
<p><strong>Save the script</strong>. Save the script as <code>create-openai-resource.sh</code>.</p>
<p>Make the script executable:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x create-openai-resource.sh </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run the script:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./create-openai-resource.sh --name &lt;NAME&gt; --resource-group &lt;RESOURCE_GROUP_NAME&gt; --location &lt;LOCATION&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="Create OpenAI Resource" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-7-b911f631cb5db788826b9ae5cac2ba11.png" width="780" height="456" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Join the next snackable AI Demo Bytes to explore how to <a href="https://aka.ms/demo-bytes/ep6?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">apply auto-scaling and load testing to your AI applications</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-set-up-azure-api-management">Step 2. Set up Azure API Management<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#step-2-set-up-azure-api-management" class="hash-link" aria-label="Direct link to Step 2. Set up Azure API Management" title="Direct link to Step 2. Set up Azure API Management">​</a></h2>
<p>API Management serves as the gateway between your front-end, middleware, and back-end services.</p>
<ol>
<li><strong>Create an API Management instance</strong>. Search for <strong>API Management</strong>, and create a new instance.</li>
<li><strong>Configure two services (back-end service API Management and middleware service API Management)</strong>:<!-- -->
<ul>
<li>Back end for data management (Azure Cosmos DB, storage account)</li>
<li>Middleware for Azure OpenAI Service</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions-1">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#azure-portal-instructions-1" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h3>
<ol>
<li>In the Azure portal, search for <strong>API Management</strong>.</li>
<li>Choose <strong>Create</strong>, and complete the resource creation wizard.</li>
<li>Select <strong>Create</strong> to deploy the API Management service.</li>
</ol>
<p><img loading="lazy" alt="The &amp;quot;Create API Management service&amp;quot; screen in the Azure portal." src="https://azure.github.io/Cloud-Native/assets/images/2-1b-8-75f5cd416c50fa4ea0250d275b398473.png" width="688" height="781" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions-1">CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#cli-instructions-1" class="hash-link" aria-label="Direct link to CLI instructions" title="Direct link to CLI instructions">​</a></h4>
<ol>
<li>
<p>Create a resource group (optional).</p>
<p>If you need to create a resource group, use the following command, replacing <code>&lt;resource-group-name&gt;</code> with your desired name and <code>&lt;location&gt;</code> with the region (for example, eastus, westeurope):</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az group create --name &lt;resource-group-name&gt; --location &lt;location&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Create the API Management service using the following command:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az apim create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group &lt;your-resource-group-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name &lt;your-apim-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --publisher-email &lt;your-email-address&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --publisher-name &lt;your-publisher-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --location &lt;your-location&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sku-name &lt;sku-type&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Parameters</strong></p>
<ul>
<li><code>--resource-group</code>: The name of the resource group where the API Management instance will be created.</li>
<li><code>--name</code>: The name of your API Management instance.</li>
<li><code>--publisher-email</code>: The email address of the API publisher.</li>
<li><code>--publisher-name</code>: The name of the API publisher.</li>
<li><code>--location</code>: The region where your API Management service will be deployed.</li>
<li><code>--sku-name</code>: The pricing tier for the API Management instance (<code>Developer</code>, <code>Basic</code>, <code>Standard</code>, or <code>Premium</code>). Default value is <code>Developer</code>.</li>
</ul>
<p><strong>SKUs</strong></p>
<ul>
<li><code>Developer</code>: Best for non-production use.</li>
<li><code>Basic</code>: Entry-level production tier.</li>
<li><code>Standard</code>: Mid-range production tier.</li>
<li><code>Premium</code>: Enterprise-level tier with additional features like multiregion support.</li>
</ul>
<p><img loading="lazy" alt="Code lines: Last login" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-9-dcf81a6aeefd8af10eb779bbcdab0f93.png" width="780" height="201" class="img_ev3q"></p>
<p><img loading="lazy" alt="Code lines: az apim create" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-10-66a6eb9bff7091cdb425e0c330d4afed.png" width="780" height="201" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-prepare-your-app-hosting-environmentsaks-or-app-service">Step 3. Prepare your app hosting environments—AKS or App Service<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#step-3-prepare-your-app-hosting-environmentsaks-or-app-service" class="hash-link" aria-label="Direct link to Step 3. Prepare your app hosting environments—AKS or App Service" title="Direct link to Step 3. Prepare your app hosting environments—AKS or App Service">​</a></h2>
<p>With the Azure OpenAI instance in place and our API Management configuration created, we have one more piece to set up before we can start building and deploying our app. We need to determine what type of service we’re going to use in Azure for hosting the front-end, middleware, and back-end app code.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="choose-your-deployment-technology">Choose your deployment technology<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#choose-your-deployment-technology" class="hash-link" aria-label="Direct link to Choose your deployment technology" title="Direct link to Choose your deployment technology">​</a></h3>
<p>Depending on your preferences or business requirements, you can choose either <strong>Azure Kubernetes Service (AKS)</strong> or <strong>Azure App Service</strong> when deploying your app to Azure.</p>
<p>To recap, here’s a quick high-level overview of the <strong>AKS</strong> versus <strong>App Service</strong>.</p>
<table><thead><tr><th>Feature</th><th>AKS</th><th>App Service</th></tr></thead><tbody><tr><td>Flexibility</td><td>More control, containerized apps</td><td>Simplified, fully managed</td></tr><tr><td>Scalability</td><td>High customization and scalability</td><td>Easy scaling for small to medium-sized apps</td></tr><tr><td>Use case</td><td>Ideal for complex, enterprise apps</td><td>Ideal for rapid deployment</td></tr></tbody></table>
<p>Both are robust options, and you can select the one that best fits your business needs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-azure-app-service-path">Use the Azure App Service path<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#use-the-azure-app-service-path" class="hash-link" aria-label="Direct link to Use the Azure App Service path" title="Direct link to Use the Azure App Service path">​</a></h3>
<p>Create a separate App Service instance for the front-end, middleware, and back-end services.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions-2">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#azure-portal-instructions-2" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h4>
<p><strong>Create a web app</strong>. In the Azure portal, search for <strong>App Service</strong> and create a new app.</p>
<p>In the first section of the resource creation wizard, select the correct <strong>Runtime stack</strong>:</p>
<ul>
<li>For the back-end service, select <strong>Java 21</strong>.</li>
<li>For the middleware service, select <strong>Java 17</strong>.</li>
<li>For the front-end service, select <strong>Node 20 LTS</strong>.</li>
</ul>
<p>Complete the resource creation wizard, and select <strong>Create</strong> to deploy the App Service instance.</p>
<p><img loading="lazy" alt="The &amp;quot;Create Web App&amp;quot; screen in the Azure portal." src="https://azure.github.io/Cloud-Native/assets/images/2-1b-11-d6827500436eddb1d8c30d9ab9057bf7.png" width="594" height="782" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions-2">CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#cli-instructions-2" class="hash-link" aria-label="Direct link to CLI instructions" title="Direct link to CLI instructions">​</a></h3>
<ol>
<li>Create a resource group (optional).</li>
</ol>
<p>If you need to create a resource group, use the following command, replacing <code>&lt;resource-group-name&gt;</code> with your desired name and <code>&lt;location&gt;</code> with the region (for example, eastus, westeurope):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az group create --name &lt;resource-group-name&gt; --location &lt;location&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Create an App Service plan.</li>
</ol>
<p>First, create an App Service plan, which defines the region, pricing tier, and scaling options of your App Service instance:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az appservice plan create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name &lt;your-app-service-plan-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group &lt;your-resource-group-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sku B1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --is-linux </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>--sku B1</code>: Specifies the pricing tier (Basic B1).</li>
<li><code>--is-linux</code>: Specifies that the app will run on Linux.</li>
</ul>
<p><img loading="lazy" alt="Code lines: az appservice plan create" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-12-fad3d5f5a9ce3d57e6b9bec26871ca65.png" width="780" height="495" class="img_ev3q"></p>
<ol start="3">
<li>
<p>Create a web app.</p>
<p>To create a web app, use the following command:</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az webapp create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group &lt;your-resource-group-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --plan &lt;your-app-service-plan-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name &lt;your-backend-app-service-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --runtime "JAVA:21-java21"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Runtime specifications</strong></p>
<ul>
<li>Back end:
<code>--runtime "JAVA:21-java21"</code>: Specifies the Java 21 runtime.</li>
<li>Middleware:
<code>--runtime "JAVA:17-java17"</code>: Specifies the Java 17 runtime.</li>
<li>Front end:
<code>--runtime "NODE:22-lts"</code>: Specifies the Node.js 22 runtime.</li>
</ul>
<p>Use these runtime values in your <code>az webapp</code> create commands when setting up the respective services for back-end, middleware, and front-end applications.</p>
<p><img loading="lazy" alt="Code lines: az webapp create" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-13-e454c0b3b824bf0834ce56b1f4b550b6.png" width="750" height="780" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-azure-kubernetes-service-aks-path">Use the Azure Kubernetes Service (AKS) path<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#use-the-azure-kubernetes-service-aks-path" class="hash-link" aria-label="Direct link to Use the Azure Kubernetes Service (AKS) path" title="Direct link to Use the Azure Kubernetes Service (AKS) path">​</a></h3>
<p>To deploy your Kubernetes-based resources, you need to perform two actions:</p>
<ol>
<li>Set up a <strong>container registry</strong> to host your application’s container images.</li>
<li><strong>Create a Kubernetes cluster</strong>.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions-3">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#azure-portal-instructions-3" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h4>
<p>Create a container registry.</p>
<ol>
<li>In the Azure portal, search for <strong>Kubernetes Service</strong> and create a new AKS cluster.</li>
<li>Complete the resource creation wizard, and select <strong>Create</strong> to deploy the container registry.</li>
</ol>
<p><img loading="lazy" alt="The &amp;quot;Create container registry&amp;quot; screen in the Azure portal." src="https://azure.github.io/Cloud-Native/assets/images/2-1b-14-347ae5c6cb2169f8221eb2651080dbf1.png" width="633" height="782" class="img_ev3q"></p>
<p>Create a Kubernetes cluster.</p>
<ol>
<li>In the Azure portal, search for <strong>Kubernetes Service</strong> and create a new Kubernetes cluster.</li>
<li>Complete the resource creation wizard, and select <strong>Create</strong> to deploy the cluster.</li>
</ol>
<p><img loading="lazy" alt="The &amp;quot;Create Kubernetes cluster&amp;quot; screen in the Azure portal." src="https://azure.github.io/Cloud-Native/assets/images/2-1b-15-fc283d90185bdbca0cb247d05e2fd6ae.png" width="749" height="782" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions-3">CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#cli-instructions-3" class="hash-link" aria-label="Direct link to CLI instructions" title="Direct link to CLI instructions">​</a></h4>
<ol>
<li>
<p>Create a resource group (optional).</p>
<p>If you need to create a resource group, use the following command, replacing <code>&lt;resource-group-name&gt;</code> with your desired name and <code>&lt;location&gt;</code> with the region (for example, eastus, westeurope):</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az group create --name &lt;resource-group-name&gt; --location &lt;location&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Create an Azure container registry.</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  az acr create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group &lt;your-resource-group-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name &lt;your-acr-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --sku Standard \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --admin-enabled true </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Replace <code>&lt;your-acr-name&gt;</code> with the name you want for your container registry. The <code>--sku Standard</code> specifies the Azure Container Registry tier, and <code>--admin-enabled true</code> enables admin access.</p>
<p><strong>Command parameters</strong></p>
<ul>
<li>
<p><code>--sku Standard</code>: Specifies the pricing tier for the Azure container registry. (<strong>Standard</strong> is a good default option.)</p>
</li>
<li>
<p><code>--admin-enabled true</code>: Enables admin access for easier management of the Azure container registry.</p>
<p><img loading="lazy" alt="Code lines: az acr create" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-16-5f535db5f14fc49e1cfe52be2133cb68.png" width="780" height="412" class="img_ev3q"></p>
</li>
</ul>
<ol start="3">
<li>Create an AKS cluster:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az aks create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource-group &lt;your-resource-group-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name &lt;your-frontend-aks-cluster-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --node-count 3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --enable-addons monitoring \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --generate-ssh-keys \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --node-vm-size Standard_DS2_v2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="Code lines: az aks create" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-17-7e4b9580aa78bad8eda5dde4ea7f97e6.png" width="570" height="212" class="img_ev3q"></p>
<p><img loading="lazy" alt="Second set of code lines: az aks create" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-18-7a084ce8058ce43cb69dec2bb0b27024.png" width="570" height="212" class="img_ev3q"></p>
<p><img loading="lazy" alt="Third set of code lines: az aks create" src="https://azure.github.io/Cloud-Native/assets/images/2-1b-19-ceac067656d006c57371ed9c756c70e4.png" width="570" height="212" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Learn more on Technical leaders’ <a href="https://aka.ms/AAI_TDMApps_Plan?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">guide to building intelligent apps</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>In this post, we walked through creating the Azure OpenAI instance that will serve as the core of our app’s content generation capabilities. We finished up our setup tasks by configuring Azure API Management, and then we created the hosting resources we need to deploy our app to Azure.</p>
<p>In our next post, we’ll discuss how you can start building and running the app on your local dev machine.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional resources<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-2#additional-resources" class="hash-link" aria-label="Direct link to Additional resources" title="Direct link to Additional resources">​</a></h3>
<ul>
<li><a href="https://developer.microsoft.com/reactor/series/S-1381/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Register for Demo Bytes</a>, a snackable playlist of demos designed to help you skill up on AI powered app development.</li>
</ul>]]></content>
        <author>
            <name>#30Days Of IA</name>
            <uri>https://azure.github.io/Cloud-Native/Build-IA/</uri>
        </author>
        <category label="Build-Intelligent-Apps" term="Build-Intelligent-Apps"/>
        <category label="30-days-of-IA-2024" term="30-days-of-IA-2024"/>
        <category label="learn-live" term="learn-live"/>
        <category label="demo-bytes" term="demo-bytes"/>
        <category label="community-gallery" term="community-gallery"/>
        <category label="azure-kubernetes-service" term="azure-kubernetes-service"/>
        <category label="azure-functions" term="azure-functions"/>
        <category label="azure-openai" term="azure-openai"/>
        <category label="azure-container-apps" term="azure-container-apps"/>
        <category label="azure-cosmos-db" term="azure-cosmos-db"/>
        <category label="github-copilot" term="github-copilot"/>
        <category label="github-codespaces" term="github-codespaces"/>
        <category label="github-actions" term="github-actions"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[1.2a Setting up your development environment Part 1]]></title>
        <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1</id>
        <link href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1"/>
        <updated>2024-09-23T09:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn what you need to set up and configure your development environment before we start to build our example generative AI app.]]></summary>
        <content type="html"><![CDATA[
<p>Learn what you need to set up and configure your development environment before we start to build our example generative AI app.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-we-cover">What we cover:<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#what-we-cover" class="hash-link" aria-label="Direct link to What we cover:" title="Direct link to What we cover:">​</a></h3>
<ul>
<li>Installing required development tools and services on your local machine</li>
<li>Configuring the Azure Cosmos DB that the back-end application uses</li>
<li>Setting up the Azure Key Vault that will store application secrets</li>
<li>Creating a Microsoft Entra ID app registration to enable Microsoft Account sign-in for our app</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>As we introduced in the previous post, this series walks you through building an example AI-powered content generation app for <strong>Best For You Organics Company</strong>. This app will help our fictitious company support a new skin-care product by generating a variety of marketing materials, including social media posts, blog articles, and email campaigns. Tailored specifically for the skin-care industry, the app will allow them to efficiently create and customize content for different platforms, enabling them to more effectively reach their target audience.</p>
<p>In this blog, we take you through setting up your local development environment and configuring several essential services in the Azure portal. You install tools, such as Git, Java, and Node.js, and set up Azure resources, such as Azure Cosmos DB and Azure Key Vault.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="local-machine-setup">Local machine setup<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#local-machine-setup" class="hash-link" aria-label="Direct link to Local machine setup" title="Direct link to Local machine setup">​</a></h2>
<p>Before diving into the Azure components, let’s ensure that your local development machine is equipped with all the tools you need to build the app.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-install-git">Step 1. Install Git.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-1-install-git" class="hash-link" aria-label="Direct link to Step 1. Install Git." title="Direct link to Step 1. Install Git.">​</a></h3>
<p>Git is essential for version control and managing your project’s source code.</p>
<ol>
<li><strong>Download Git</strong>. Go to <a href="https://learn.microsoft.com/devops/develop/git/install-and-set-up-git?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Install and set up Git</a>, and download the installer for your operating system.</li>
<li><strong>Installation</strong>. Run the installer. Unless you have specific preferences, use the default settings.</li>
<li><strong>Verify installation</strong>. Open your terminal and run:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   git --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response" src="https://azure.github.io/Cloud-Native/assets/images/2-1-1-048444deb097be39c6d11b953478d08d.png" width="632" height="80" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-install-java-17-and-21">Step 2. Install Java (17 and 21).<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-2-install-java-17-and-21" class="hash-link" aria-label="Direct link to Step 2. Install Java (17 and 21)." title="Direct link to Step 2. Install Java (17 and 21).">​</a></h3>
<p>Your Spring Boot back end requires both Java 17 and 21.</p>
<ol>
<li><strong>Download</strong>. Obtain both versions from <a href="https://learn.microsoft.com/java/openjdk/download?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Download the Microsoft Build of OpenJDK</a>.</li>
<li><strong>Configure</strong>. You can manage multiple Java versions using update alternatives (Linux) or SDKMAN (for Linux/Mac). For Windows, use Java Development Kit (JDK) tools, like JDKTool.</li>
<li><strong>Verify installation</strong>. Open your terminal and run:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   java -version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response" src="https://azure.github.io/Cloud-Native/assets/images/2-1-2-844b0aee14de7c7b375872b3673d43f1.gif" width="780" height="59" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-install-the-azure-cli">Step 3. Install the Azure CLI.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-3-install-the-azure-cli" class="hash-link" aria-label="Direct link to Step 3. Install the Azure CLI." title="Direct link to Step 3. Install the Azure CLI.">​</a></h3>
<p>The Azure CLI is essential for managing your Azure resources from the terminal.</p>
<ol>
<li><strong>Download the Azure CLI</strong>. Follow the instructions in <a href="https://learn.microsoft.com/cli/azure/install-azure-cli?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">How to install the Azure CLI</a>.</li>
<li><strong>Sign in to Azure</strong>. After installing the Azure CLI, sign in. Open your terminal and run:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response" src="https://azure.github.io/Cloud-Native/assets/images/2-1-3-b9fae33fcb68738999da91ee9bed6fd2.png" width="1466" height="186" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-install-nodejs-and-set-up-react">Step 4. Install Node.js and set up React.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-4-install-nodejs-and-set-up-react" class="hash-link" aria-label="Direct link to Step 4. Install Node.js and set up React." title="Direct link to Step 4. Install Node.js and set up React.">​</a></h3>
<p>We use Node.js for managing front-end dependencies and running the React development server.</p>
<ol>
<li><strong>Install Node.js</strong>. Go to <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js</a>, and download the appropriate version for your system.</li>
<li><strong>Verify installation</strong>. Confirm that Node.js is correctly installed. Open your terminal and run:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   node -v &amp;&amp; npm -v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response" src="https://azure.github.io/Cloud-Native/assets/images/2-1-4-8fe98e180875bdc258adf9648125457e.png" width="450" height="112" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-install-an-integrated-development-environment">Step 5. Install an integrated development environment.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-5-install-an-integrated-development-environment" class="hash-link" aria-label="Direct link to Step 5. Install an integrated development environment." title="Direct link to Step 5. Install an integrated development environment.">​</a></h3>
<p>You can use your preferred integrated development environment (IDE), but we recommend <strong>Visual Studio Code</strong> and <strong>IntelliJ IDEA</strong> for Java and JavaScript development.</p>
<ul>
<li><a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">Install Visual Studio Code</a>.<!-- -->
<ul>
<li>or</li>
</ul>
</li>
<li><a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener noreferrer">Install IntelliJ IDEA</a>.</li>
</ul>
<p>Both IDEs support Azure integrations through plugins for managing Azure resources and services.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="azure-setup">Azure setup<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#azure-setup" class="hash-link" aria-label="Direct link to Azure setup" title="Direct link to Azure setup">​</a></h2>
<p>Now that your local environment is ready, let’s configure the Azure resources you need to build and run the app.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-set-up-azure-basics">Step 1. Set up Azure basics.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-1-set-up-azure-basics" class="hash-link" aria-label="Direct link to Step 1. Set up Azure basics." title="Direct link to Step 1. Set up Azure basics.">​</a></h3>
<p>Before you start configuring resources, choose the Azure account you want to use. If you want to use the Azure CLI to configure Azure resources, perform a few configuration steps:</p>
<ul>
<li><strong>Create a new account—unless you already have one (optional)</strong>.<br>
<!-- -->If you don’t have an existing Azure account that you want to use when creating Azure resources, create a new one. Go to the <a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer">Azure portal</a> and sign up. Choose the subscription plan that fits your business needs.</li>
<li><strong>Configure the Azure CLI, if you want use it (optional)</strong>.<br>
<!-- -->The steps throughout this series include instructions for using either the browser-based Azure portal or the command-line Azure CLI tool. If you want to use the Azure CLI but don’t already have it installed, follow these steps:<!-- -->
<ul>
<li>Follow the instructions provided at <a href="https://learn.microsoft.com/cli/azure/install-azure-cli?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Install Azure CLI</a>.</li>
<li>Verify the installation. Open your terminal or command prompt and run:</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response" src="https://azure.github.io/Cloud-Native/assets/images/2-1-5-510b58ec9e02ce976aaade6a8b0b038f.png" width="1427" height="774" class="img_ev3q"></p>
<p>After installing and verifying the Azure CLI, follow these steps to sign in, list your subscriptions, and select a subscription:</p>
<ol>
<li>Sign in to Azure. Run the following command:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This opens a web browser for you to authenticate your Azure account. After successful authentication, the CLI automatically lists your subscriptions and asks you to select one by number.</p>
<ol start="2">
<li>
<p>Select a subscription. After you sign in, a prompt is displayed.</p>
<p><img loading="lazy" alt="image of terminal response" src="https://azure.github.io/Cloud-Native/assets/images/2-1-6-a0977a4b4191be6f3d41d1cda55a6638.png" width="1431" height="433" class="img_ev3q"></p>
</li>
<li>
<p>Type the number corresponding to the subscription you want to select, and press <code>Enter</code>. After you select the subscription, it is set as the default for your current session.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-create-azure-cosmos-db-resource-mongodb-api">Step 2. Create Azure Cosmos DB resource (MongoDB API).<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-2-create-azure-cosmos-db-resource-mongodb-api" class="hash-link" aria-label="Direct link to Step 2. Create Azure Cosmos DB resource (MongoDB API)." title="Direct link to Step 2. Create Azure Cosmos DB resource (MongoDB API).">​</a></h3>
<p>Cosmos DB will serve as the database for storing your application data, such as customer information and product details.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#azure-portal-instructions" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h4>
<ol>
<li>
<p><strong>Go to the Azure Portal</strong> and search for <strong>"Cosmos DB"</strong>.</p>
</li>
<li>
<p>Click on <strong>"Create"</strong> and select <strong>MongoDB API</strong>.</p>
</li>
<li>
<p>You will see two options: <strong>Request unit (RU) database account</strong> and <strong>vCore cluster (Recommended)</strong>. Choose Request unit (RU) database account.</p>
</li>
<li>
<p><strong>Configure the Request Units per second (RU/s)</strong> based on your application's scale (e.g., 400 RU/s as a starting point for small applications). The RU/s determines how many operations Cosmos DB can handle per second, so adjust it according to your expected load and usage.</p>
</li>
<li>
<p>Proceed with the rest of the setup, such as specifying the <strong>resource group</strong>, <strong>region</strong>, and <strong>database name</strong>.</p>
</li>
<li>
<p>Once the Cosmos DB account is created, you can add a <strong>database</strong> and <strong>collections</strong> to organize your data.</p>
<p><img loading="lazy" alt="image of Cosmos DB setup in Azure Portal" src="https://azure.github.io/Cloud-Native/assets/images/2-1-7-7d2c3de853c014fc34c8fe66fc354399.png" width="1429" height="611" class="img_ev3q"></p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions">CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#cli-instructions" class="hash-link" aria-label="Direct link to CLI instructions" title="Direct link to CLI instructions">​</a></h4>
<ol>
<li>Create a resource group (if you don’t already have one) by running the following command:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az group create --name &lt;resource-group-name&gt; --location &lt;location&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response" src="https://azure.github.io/Cloud-Native/assets/images/2-1-8-a4b35aa02ad872e4bfaa0545a18c7a6e.png" width="1430" height="362" class="img_ev3q"></p>
<ol start="2">
<li>
<p>Create an Azure Cosmos DB account with MongoDB API.</p>
<p>Use the following command to create an Azure Cosmos DB account with the MongoDB API, and specify throughput in Request Units per second (RU/s):</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az cosmosdb create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --name &lt;cosmos-account-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --resource-group &lt;resource-group-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --kind MongoDB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --locations regionName=&lt;location&gt; failoverPriority=0 isZoneRedundant=False \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --default-consistency-level Eventual \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --enable-automatic-failover false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>
<p>Create a MongoDB database with a specific throughput.</p>
<p>After creating the Azure Cosmos DB account, create a MongoDB database and set the throughput (RU/s):</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az cosmosdb mongodb database create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --account-name &lt;cosmos-account-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --name &lt;database-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --resource-group &lt;resource-group-name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response" src="https://azure.github.io/Cloud-Native/assets/images/2-1-9-3c4a36a58afbdfe051718310d42ea395.png" width="1428" height="706" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-create-azure-storage-account">Step 3. Create Azure Storage account.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-3-create-azure-storage-account" class="hash-link" aria-label="Direct link to Step 3. Create Azure Storage account." title="Direct link to Step 3. Create Azure Storage account.">​</a></h3>
<p>Our Azure Storage account is used to store any static files (for example, product brochures or images).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions-1">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#azure-portal-instructions-1" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h4>
<ol>
<li>In the Azure portal, search for <strong>storage account</strong> and create a new one.</li>
<li>Choose <strong>Blob Storage</strong> for storing documents and media.</li>
<li>Complete the resource creation wizard, and select <strong>Create</strong> to deploy the storage account.</li>
</ol>
<p><img loading="lazy" alt="image of storage account in Azure Portal" src="https://azure.github.io/Cloud-Native/assets/images/2-1-10-99fba4ad9f6337728e5af417024978f9.png" width="1220" height="1430" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions-1">CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#cli-instructions-1" class="hash-link" aria-label="Direct link to CLI instructions" title="Direct link to CLI instructions">​</a></h4>
<ol>
<li>
<p>Determine whether resource group exists (optional).</p>
<p>Use the following command:</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az group show --name &lt;resource-group-name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If the resource group exists, it returns the details.</li>
<li>If it doesn't exist, it throws an error.</li>
</ul>
<ol start="2">
<li>
<p>Create the resource group (optional).</p>
<p>If the resource group doesn't exist, create it using the following command, replacing <code>&lt;resource-group-name&gt;</code> with your desired name for the resource group and <code>&lt;location&gt;</code> with the Azure region where you want to deploy the resource, (for example, eastus, westus):</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az group create --name &lt;resource-group-name&gt; --location &lt;location&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>
<p>Create the storage account.</p>
<p>Use the following command to create the Azure Storage account, replacing <code>&lt;storage-account-name&gt;</code> with a globally unique name for your storage account; replacing <code>&lt;resource-group-name&gt;</code> with the name of the resource group you created or chose; and replacing <code>&lt;location&gt;</code> with the Azure region where you want to deploy the storage account (for example, eastus, westeurope):</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az storage account create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --name &lt;storage-account-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --resource-group &lt;resource-group-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --location &lt;location&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --sku Standard_LRS \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --kind StorageV2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response to creating the Azure Storage account" src="https://azure.github.io/Cloud-Native/assets/images/2-1-11-fbc6df7f2756d9af001768cd4b640cf7.png" width="1168" height="1430" class="img_ev3q"></p>
<ol start="4">
<li>
<p>Verify storage account creation.</p>
<p>To ensure that the storage account was created successfully, list all storage accounts in the resource group:</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az storage account list --resource-group &lt;resource-group-name&gt; --output table</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response to verify storage account creation" src="https://azure.github.io/Cloud-Native/assets/images/2-1-12-21fc7cdf14818baa9d90dfb9695915c2.png" width="1430" height="121" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-set-up-azure-key-vault">Step 4. Set up Azure Key Vault.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-4-set-up-azure-key-vault" class="hash-link" aria-label="Direct link to Step 4. Set up Azure Key Vault." title="Direct link to Step 4. Set up Azure Key Vault.">​</a></h3>
<p>To securely store our secrets, like API keys and connection strings, we use Azure Key Vault.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions-2">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#azure-portal-instructions-2" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h4>
<ol>
<li>
<p><strong>Create a key vault</strong>. In the portal, search for key vault and create one.</p>
</li>
<li>
<p><strong>Register an application</strong>. In Microsoft Entra ID, register your application to grant it access to the key vault.</p>
</li>
<li>
<p><strong>Assign managed identity</strong>. Enable Managed Identity to allow secure access from your application.</p>
</li>
<li>
<p>Complete the resource creation wizard, and select <strong>Create</strong> to deploy the key vault.</p>
<p><img loading="lazy" alt="image of key vault in Azure Portal" src="https://azure.github.io/Cloud-Native/assets/images/2-1-13-ca66bc299cc9eea06151841a5ac9911b.png" width="1220" height="1430" class="img_ev3q"></p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions-2">CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#cli-instructions-2" class="hash-link" aria-label="Direct link to CLI instructions" title="Direct link to CLI instructions">​</a></h4>
<ol>
<li>
<p>Create a resource group (optional).</p>
<p>If you need to create a resource group (like we did in the Azure Cosmos DB steps), use the following command, replacing <code>&lt;resource-group-name&gt;</code> with your desired name and <code>&lt;location&gt;</code> with the region (for example, eastus, westeurope):</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az group create --name &lt;resource-group-name&gt; --location &lt;location&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>
<p>Create the Azure key vault.</p>
<p>Now, use the following command to create the Azure key vault, replacing <code>&lt;key-vault-name&gt;</code> with a globally unique name for the key vault; replacing <code>&lt;resource-group-name&gt;</code> with the name of the resource group created or selected in the previous step; and replacing <code>&lt;location&gt;</code> with your preferred Azure region. Note that “--sku standard” is a common pricing tier. You can also use premium if you need additional features like Hardware Security Module (HSM) support.</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az keyvault create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --name &lt;key-vault-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --resource-group &lt;resource-group-name&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --location &lt;location&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     --sku standard</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response to creating the Azure key vault" src="https://azure.github.io/Cloud-Native/assets/images/2-1-14-37bfb963d64160ec3d02561a34758ac0.png" width="1431" height="885" class="img_ev3q"></p>
<ol start="3">
<li>
<p>Verify key vault creation.</p>
<p>To verify that the key vault was created, you can list all key vaults in the specified resource group:</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   az keyvault list --resource-group &lt;resource-group-name&gt; --output table</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response to verifying key vault creation" src="https://azure.github.io/Cloud-Native/assets/images/2-1-15-5ded1bce3065b8243875b17351754a8c.png" width="1266" height="146" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Join the next snackable AI Demo Bytes to explore how to <a href="https://aka.ms/demo-bytes/ep5?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">add generative AI capabilities to your web apps</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-use-microsoft-entra-id-to-create-an-app-registration-for-microsoft-account-sign-in">Step 5. Use Microsoft Entra ID to create an app registration for Microsoft account sign-in.<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#step-5-use-microsoft-entra-id-to-create-an-app-registration-for-microsoft-account-sign-in" class="hash-link" aria-label="Direct link to Step 5. Use Microsoft Entra ID to create an app registration for Microsoft account sign-in." title="Direct link to Step 5. Use Microsoft Entra ID to create an app registration for Microsoft account sign-in.">​</a></h3>
<p>To support multi-user access, including sign-in from any Microsoft account, register your application in Microsoft Entra ID.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-portal-instructions-3">Azure portal instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#azure-portal-instructions-3" class="hash-link" aria-label="Direct link to Azure portal instructions" title="Direct link to Azure portal instructions">​</a></h4>
<ol>
<li>
<p>Navigate to Microsoft Entra ID.</p>
<ul>
<li>In the Azure portal, search for <strong>Microsoft Entra ID</strong>, and select <strong>Manage → App registrations</strong>.</li>
</ul>
</li>
<li>
<p>Register a new application.</p>
<ol>
<li>Select <strong>New registration</strong>.</li>
<li><strong>Name</strong>. Enter a name for your application (for example, <strong>ContentGenApp</strong>).</li>
<li><strong>Supported account types</strong>. Select <strong>Accounts in any organizational directory (Any Microsoft Entra ID tenant - Multitenant) and personal Microsoft accounts (e.g. Skype, Xbox)</strong>.</li>
<li><strong>Redirect URI</strong>. Set this to the front end's callback URL.<!-- -->
<ul>
<li>For local development (React app running locally), use <a href="http://localhost:3000/" target="_blank" rel="noopener noreferrer">http://localhost:3000</a>.</li>
<li>For production (when deployed on <a href="https://learn.microsoft.com/azure/aks/what-is-aks?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure Kubernetes Service (AKS)</a> or <a href="https://learn.microsoft.com/azure/app-service/overview/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure App Service</a>), add the URL for the App Service or AKS deployment you plan to create for this app (We’ll create these in our next post). For example, <a href="https://your-app.azurewebsites.net/" target="_blank" rel="noopener noreferrer">https://your-app.azurewebsites.net</a> for App Service or <a href="https://your-aks-domain.com/" target="_blank" rel="noopener noreferrer">https://your-aks-domain.com</a> for AKS.</li>
<li>If you plan to use a custom domain for your application, add that domain here (for example, <a href="https://your-custom-domain.com/" target="_blank" rel="noopener noreferrer">https://your-custom-domain.com</a>).</li>
</ul>
</li>
</ol>
<p><strong>Important</strong>: Ensure that all potential URLs (local, deployed, and custom domain) are listed as redirect URIs.</p>
<p><img loading="lazy" alt="image of application registration in Microsoft Entra ID" src="https://azure.github.io/Cloud-Native/assets/images/2-1-16-6e8e9cf28830c64437f9e97a82e70227.png" width="1428" height="715" class="img_ev3q"></p>
</li>
<li>
<p>Configure API permissions.</p>
<ol>
<li>Go to the <strong>API permissions</strong> tab, and select <strong>Add a permission</strong>.</li>
<li>Choose <strong>Microsoft Graph → Delegated permissions</strong>, and then select the following permissions:<!-- -->
<ul>
<li><strong>User.Read</strong>. Allows users to sign in and read their profile.</li>
</ul>
</li>
<li><strong>Grant admin consent</strong>. After permissions are added, select <strong>Grant admin consent</strong> for your organization.</li>
</ol>
<p><img loading="lazy" alt="image of API permissions configuration" src="https://azure.github.io/Cloud-Native/assets/images/2-1-17-7accd8db654dd286ed22b6647e9f06fd.png" width="1430" height="665" class="img_ev3q"></p>
</li>
<li>
<p>Configure authentication settings.</p>
<ol>
<li>Go to the <strong>Authentication</strong> tab, and add your <strong>redirect URIs</strong> (both local and production URLs).</li>
<li>Enable <strong>ID tokens</strong> to authenticate users.</li>
</ol>
<p><img loading="lazy" alt="image in Azure Portal of authentication settings configuration" src="https://azure.github.io/Cloud-Native/assets/images/2-1-18-c77fd44d51fe8ad01af17c233066715b.png" width="1429" height="873" class="img_ev3q"></p>
</li>
</ol>
<p>This revision integrates <strong>Microsoft Entra ID</strong> and highlights the navigation flow for app registration through the <strong>Manage</strong> section. It also ensures that you're set up for both local development and production environments using <strong>AKS</strong>, <strong>App Service</strong>, or a <strong>custom domain</strong>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cli-instructions-3">CLI instructions<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#cli-instructions-3" class="hash-link" aria-label="Direct link to CLI instructions" title="Direct link to CLI instructions">​</a></h4>
<p>You’ll use the following script when performing these instructions.</p>
<p>Shell script: <code>create-azure-ad-app.sh</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Function to display help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function display_help() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Usage: $0 --name &lt;App Name&gt; --redirect-uris &lt;Redirect URI 1&gt; &lt;Redirect URI 2&gt; ... [options]"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Options:"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --name              The display name of the Azure AD App."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --redirect-uris     Space-separated list of redirect URIs to configure."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "  --help              Display this help message and exit."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Function to check if the user is logged in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function check_azure_login() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Checking Azure CLI login status..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  az account show &amp;&gt; /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ $? -ne 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo "You are not logged in. Logging in now..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    az login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [ $? -ne 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo "Azure login failed. Exiting script."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo "You are already logged in."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Parse command line arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APP_NAME=""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REDIRECT_URIS=()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while [[ $# -gt 0 ]]; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case "$1" in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      APP_NAME="$2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --redirect-uris)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shift</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      while [[ $# -gt 0 &amp;&amp; ! "$1" =~ ^-- ]]; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        REDIRECT_URIS+=("$1")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shift</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --help)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      display_help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo "Unknown option: $1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      display_help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  esac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ensure required arguments are provided</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ -z "$APP_NAME" || ${#REDIRECT_URIS[@]} -eq 0 ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Error: Both --name and --redirect-uris are required."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  display_help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 0: Check if logged in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_azure_login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">API_PERMISSION="e1fe6dd8-ba31-4d61-89e7-88639da4683d"  # User.Read permission ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GRAPH_API="00000003-0000-0000-c000-000000000000"        # Microsoft Graph API ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIGN_IN_AUDIENCE="AzureADandPersonalMicrosoftAccount"    # Supported account types</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Define the required resource accesses in JSON format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REQUIRED_RESOURCE_ACCESS=$(cat &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "resourceAppId": "$GRAPH_API",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "resourceAccess": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "id": "$API_PERMISSION",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "type": "Scope"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 1: Check if the app already exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APP_ID=$(az ad app list --filter "displayName eq '$APP_NAME'" --query "[0].appId" -o tsv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -z "$APP_ID" ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "App doesn't exist. Creating the app registration..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Step 2: Create the app registration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  APP_ID=$(az ad app create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --display-name "$APP_NAME" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --required-resource-accesses "$REQUIRED_RESOURCE_ACCESS" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --web-redirect-uris "${REDIRECT_URIS[@]}" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --enable-id-token-issuance true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --enable-access-token-issuance true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --sign-in-audience "$SIGN_IN_AUDIENCE" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --query appId -o tsv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ -z "$APP_ID" ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo "App creation failed. Exiting script."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "App created with ID: $APP_ID"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "App already exists with ID: $APP_ID. Updating the redirect URIs..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Step 3: Update the redirect URIs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  az ad app update --id "$APP_ID" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --web-redirect-uris "${REDIRECT_URIS[@]}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if [ $? -ne 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo "Failed to update redirect URIs. Exiting script."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo "Redirect URIs updated for app ID: $APP_ID"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Display the app details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "Here are the details of the app:"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az ad app show --id "$APP_ID"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run the script:</p>
<ol>
<li>Save the script. Save the preceding script as create-azure-ad-app.sh.</li>
<li>Make the script executable:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x create-azure-ad-app.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Run the script.</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./create-azure-ad-app.sh --name &lt;YOUR_APP_NAME&gt; --redirect-uris http://localhost:3000 https://your-custom-domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of terminal response after running the script" src="https://azure.github.io/Cloud-Native/assets/images/2-1-19-02526725c7fe24438aed574901ff5ea8.png" width="1429" height="378" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Join live experts to dive into <a href="https://aka.ms/learn-live/ep3?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">operational excellence with AKS</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>In this blog, we’ve covered setting up your local development environment and creating the Azure-based database, storage, and secret management services you’ll use when running an AI powered content generation sample application in Java. However, there’s still one critical piece of infrastructure to provision before you can start building and deploying the app.</p>
<p>In the next blog, we’ll cover how to set up and configure <a href="https://learn.microsoft.com/azure/ai-services/openai/overview?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure OpenAI Service</a> to power this sample app.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional resources<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/setting-up-your-development-environment-1#additional-resources" class="hash-link" aria-label="Direct link to Additional resources" title="Direct link to Additional resources">​</a></h2>
<ul>
<li><a href="https://developer.microsoft.com/reactor/series/S-1381/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Register for Demo Bytes</a>, a snackable playlist of demos designed to help you skill up on AI powered app development.</li>
</ul>]]></content>
        <author>
            <name>#30Days Of IA</name>
            <uri>https://azure.github.io/Cloud-Native/Build-IA/</uri>
        </author>
        <category label="Build-Intelligent-Apps" term="Build-Intelligent-Apps"/>
        <category label="30-days-of-IA-2024" term="30-days-of-IA-2024"/>
        <category label="learn-live" term="learn-live"/>
        <category label="demo-bytes" term="demo-bytes"/>
        <category label="community-gallery" term="community-gallery"/>
        <category label="azure-kubernetes-service" term="azure-kubernetes-service"/>
        <category label="azure-functions" term="azure-functions"/>
        <category label="azure-openai" term="azure-openai"/>
        <category label="azure-container-apps" term="azure-container-apps"/>
        <category label="azure-cosmos-db" term="azure-cosmos-db"/>
        <category label="github-copilot" term="github-copilot"/>
        <category label="github-codespaces" term="github-codespaces"/>
        <category label="github-actions" term="github-actions"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[1.1 Use Generative AI to build intelligent apps]]></title>
        <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps</id>
        <link href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps"/>
        <updated>2024-09-19T09:00:00.000Z</updated>
        <summary type="html"><![CDATA[Combine the power of AI, cloud-scale data, and cloud-native app development to create highly differentiated digital experiences. Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure.]]></summary>
        <content type="html"><![CDATA[
<p>In this blog series, discover how you can use Azure services to take advantage of generative AI capabilities to build an intelligent application.  </p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-well-cover">What We’ll Cover<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#what-well-cover" class="hash-link" aria-label="Direct link to What We’ll Cover" title="Direct link to What We’ll Cover">​</a></h2>
<ul>
<li>Why generative AI?</li>
<li>A high-level overview of our example scenario</li>
<li>An overview of the deployment options </li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-generative-ai">Why generative AI?<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#why-generative-ai" class="hash-link" aria-label="Direct link to Why generative AI?" title="Direct link to Why generative AI?">​</a></h2>
<p>Unlike traditional AI systems that follow predefined rules, generative AI models use deep learning techniques to generate outputs such as text, images, music, and even code in a way that mimics human creativity. If you’re reading this, you’re likely interested in how you can harness these capabilities to build new and innovative solutions for your organization or your customers. But what benefits does this new technology bring, and when would you use it? </p>
<p>For businesses, one of the main benefits of generative AI is enhanced productivity. By automating tasks such as content creation, customer service responses, and data analysis, you can significantly reduce tasks that your teams previously had to do manually, and this automation can result in radically increased efficiency. Marketing teams, for instance, can use generative AI to draft personalized content or generate ideas for campaigns, accelerating time to market. Similarly, customer support teams can make the most of AI-powered chatbots that provide accurate responses based on large datasets, supporting faster and more consistent handling of customer requests or issues. </p>
<p>In addition to the productivity benefits, intelligent apps built by using generative AI can scale to meet the needs of growing businesses, allowing these businesses to meet increased demand for personalized solutions and messaging. AI helps your business to do this without sacrificing quality or capabilities. </p>
<p>In this series, we show you how you can combine multiple Azure products and services to effectively build an example generative AI application that supports marketing teams. </p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-example-application">The example application<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#the-example-application" class="hash-link" aria-label="Direct link to The example application" title="Direct link to The example application">​</a></h2>
<p>In our example scenario, we’re building a solution for the <strong>Best For You Organics Company</strong>, which is releasing an innovative, new skin-care product designed to enhance natural beauty and promote skin health. In a competitive market, it’s crucial for marketing efforts to create engaging content that captures the attention of potential customers and aids the marketing team in market penetration. </p>
<p>Through this blog series, you can learn to use Azure services to build an application that supports the Best For You Organics Company marketing team, making the most of the capabilities of Azure to create exceptional customer experiences and generate engaging marketing content.  </p>
<p>Our solution generates the following types of content to assist the marketing team: </p>
<ul>
<li>
<p><strong>Social media posts</strong>. Announcements, product highlights, customer testimonials, and promotional offers, with the hashtags #Skincare #NaturalBeauty #BestForYouOrganics </p>
</li>
<li>
<p><strong>Blog articles</strong>. In-depth articles on skin-care tips, the benefits of natural ingredients, and product usage guides </p>
</li>
<li>
<p><strong>Email content</strong>. Product launches, exclusive offers, skin-care routines, and collateral </p>
</li>
</ul>
<p>The application is built using a three-part architecture consisting of a <strong>back end</strong>, <strong>middleware</strong>, and <strong>front end</strong>, deployed on either <strong>Azure Kubernetes Service (AKS)</strong> or <strong>Azure App Service</strong>. This architecture forms the foundation for integrating modern cloud and AI technologies, which is our focus throughout this case study. </p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ai-and-net">AI and .Net<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#ai-and-net" class="hash-link" aria-label="Direct link to AI and .Net" title="Direct link to AI and .Net">​</a></h3><p>In this series, we’ll walk through the basics of building a Java based content generation application. However, if you’re also interested in building intelligent apps using .Net, you can learn more from the following resources: </p><ul>
<li><a href="https://learn.microsoft.com/dotnet/ai?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">AI for .NET Developers | Microsoft Learn</a> </li>
<li><a href="https://devblogs.microsoft.com/dotnet/build-gen-ai-with-dotnet-8/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Building Generative AI apps with .NET 8 | .Net Blog</a></li>
<li><a href="https://learn.microsoft.com/training/paths/develop-ai-solutions-azure-openai/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Develop Generative AI solutions with Azure OpenAI Service - Training | Microsoft Learn</a></li>
<li><a href="https://learn.microsoft.com/collections/qp6xfmodr6q6px?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Dive deeper into .NET + AI collection | Microsoft Learn</a></li>
<li><a href="https://learn.microsoft.com/training/paths/develop-ai-agents-azure-open-ai-semantic-kernel-sdk/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Develop AI agents using Azure OpenAI and the Semantic Kernel SDK - Training | Microsoft Learn</a></li>
<li><a href="https://devblogs.microsoft.com/dotnet/add-ai-to-your-dotnet-apps-easily-with-prompty/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Add AI to Your .NET Apps Easily with Prompty | .Net Blog</a>  </li>
<li><a href="https://devblogs.microsoft.com/dotnet/using-phi3-csharp-with-onnx-for-text-and-vision-samples-md/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Using Phi-3 &amp; C# with ONNX for text and vision samples | .Net Blog</a>  </li>
<li><a href="https://github.com/dotnet/ai-samples" target="_blank" rel="noopener noreferrer">AI Samples for .NET | GitHub</a> </li>
<li><a href="https://github.com/Azure-Samples/azure-search-openai-demo-csharp" target="_blank" rel="noopener noreferrer">Azure Samples: ChatGPT + Enterprise data with Azure OpenAI and Azure AI Search (.NET) | GitHub</a>  </li>
<li><a href="https://www.youtube.com/playlist?list=PLdo4fOcmZ0oX0Hrq9KqhQfZNAcDF5VPNt" target="_blank" rel="noopener noreferrer">.NET AI Community Standup playlist | YouTube</a> </li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="application-flow">Application flow<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#application-flow" class="hash-link" aria-label="Direct link to Application flow" title="Direct link to Application flow">​</a></h4>
<p>The content generation process in the application is simple yet powerful. Here's how the flow works, from the user's perspective: </p>
<ol>
<li>
<p><strong>User input</strong>. The user provides details, such as the type of content they need—whether it's an email campaign, social media post, or blog article (steps 1-4 in the diagram below). </p>
</li>
<li>
<p><strong>Back-end processing</strong>. The system retrieves necessary data, such as customer demographics, product details, and relevant information stored in the back end (steps 5-6 in the diagram). </p>
</li>
<li>
<p><strong>Content generation</strong>. The <strong>middleware</strong> communicates with <strong>Azure OpenAI Service</strong> to generate content based on the provided input and back-end data, helping to ensure that the content is contextually relevant (steps 7-9 in the diagram). </p>
</li>
<li>
<p><strong>Result display</strong>. The generated content is then displayed on the <strong>ReactJS front end</strong>, where the user can review, copy, and implement it directly into their marketing campaigns (step 10 in diagram). </p>
</li>
</ol>
<p>Let’s now look at the data flow for this application flow to understand how Azure OpenAI can be used in a Retrieval-Augmented Generation (RAG) architecture pattern. </p>
<p><img loading="lazy" alt="diagram of data flow for this application" src="https://azure.github.io/Cloud-Native/assets/images/1-1-f596e2e96666cf16edac7b8f5642897f.png" width="1600" height="669" class="img_ev3q"></p>
<p>This flow allows for fast and efficient content creation while tailoring the output to specific campaign needs, all powered by AI. </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="github-repository">GitHub repository<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#github-repository" class="hash-link" aria-label="Direct link to GitHub repository" title="Direct link to GitHub repository">​</a></h4>
<p>The project’s full source code can be found in the <a href="https://github.com/Azure-Samples/Java-AI-Based-Content-Generator" target="_blank" rel="noopener noreferrer">GitHub repository for the Java AI-based content generator</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="technologies-used">Technologies used <a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#technologies-used" class="hash-link" aria-label="Direct link to Technologies used " title="Direct link to Technologies used ">​</a></h4>
<p>Our application makes the most of several cutting-edge technologies, each serving a critical role in the system: 
 </p>
<ul>
<li><a href="https://learn.microsoft.com/azure/ai-services/openai/overview?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure OpenAI Service</a>. At the core of content generation is Azure OpenAI, which uses GPT models to create coherent and relevant content based on user input. The Chat Completion API (GPT-4o) generates the text, while the embedding model helps ensure that data retrieved for content is semantically relevant to the user's needs. </li>
<li><a href="https://learn.microsoft.com/azure/key-vault/general/overview?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure Key Vault</a>. For secure storage of secrets such as API keys, credentials, and sensitive configuration data, Key Vault is integrated into the system. This helps ensure that all sensitive data is stored securely and retrieved only when needed. </li>
<li><a href="https://learn.microsoft.com/entra/fundamentals/whatis?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Microsoft Entra ID</a> (formerly Azure Active Directory). Microsoft Entra ID is used for authentication and identity management, supporting secure access to the back end and to APIs. It helps effectively manage user roles and access permissions. </li>
<li><a href="https://learn.microsoft.com/entra/identity/managed-identities-azure-resources/overview?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Managed identity</a>. The application uses managed identity to securely access Azure resources without hard-coding credentials. This simplifies the authentication process when interacting with services like Key Vault and Azure Cosmos DB. </li>
<li><a href="https://learn.microsoft.com/azure/app-service/overview?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure App Service</a> and <a href="https://learn.microsoft.com/azure/aks/what-is-aks?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure Kubernetes Service (AKS)</a>.The application supports two deployment models: App Service and AKS. Both provide scalable infrastructure but differ in flexibility and complexity (more on this in the "<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#choosing-the-right-deployment-technology-for-you">Choosing the right deployment technology</a> for you" section). </li>
<li><a href="https://learn.microsoft.com/azure/api-management/api-management-key-concepts?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure API Management</a>. API Management manages the API gateway, controlling access between the front end, middleware, and back end. With features like Cross-Origin Resource Sharing (CORS), throttling, rate limiting, and authentication, API Management supports efficient communication and security across the system.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Learn more on Technical leaders’ <a href="https://aka.ms/AAI_TDMApps_Plan?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">guide to building intelligent apps</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="choosing-the-right-deployment-technology-for-you">Choosing the right deployment technology for you<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#choosing-the-right-deployment-technology-for-you" class="hash-link" aria-label="Direct link to Choosing the right deployment technology for you" title="Direct link to Choosing the right deployment technology for you">​</a></h2>
<p>The application can be deployed by using either <strong>Azure App Service</strong> or <strong>Azure Kubernetes Service (AKS)</strong>, depending on your business needs. Both options provide advantages, but the choice often depends on the application’s complexity and scale.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-app-service">Azure App Service<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#azure-app-service" class="hash-link" aria-label="Direct link to Azure App Service" title="Direct link to Azure App Service">​</a></h4>
<ul>
<li>
<p><strong>Simplicity</strong>. App Service is a fully managed platform as a service (PaaS) that abstracts the underlying infrastructure. This allows for quick deployments with less overhead. </p>
</li>
<li>
<p><strong>Cost-effective</strong>. For small to medium-sized applications, App Service can reduce operational costs by automating much of the infrastructure management. </p>
</li>
<li>
<p><strong>Use case</strong>. The service is ideal for businesses looking for rapid deployment without the need for extensive control over infrastructure. It works well for straightforward applications with predictable workloads.</p>
</li>
</ul>
<p><img loading="lazy" alt="architecture diagram using Azure App Service" src="https://azure.github.io/Cloud-Native/assets/images/1-2-e76f7ae3000b3f590bf463dc3ce73d41.png" width="1280" height="720" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-kubernetes-service-aks">Azure Kubernetes Service (AKS)<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#azure-kubernetes-service-aks" class="hash-link" aria-label="Direct link to Azure Kubernetes Service (AKS)" title="Direct link to Azure Kubernetes Service (AKS)">​</a></h4>
<ul>
<li>
<p><strong>Flexibility</strong>. AKS offers more control over infrastructure, allowing for fine-tuned customization of containerized microservices. </p>
</li>
<li>
<p><strong>Scalability</strong>. The service is ideal for applications with large-scale operations or high customization requirements. It allows for horizontal scaling and integration with multiple cloud-native tools. </p>
</li>
<li>
<p><strong>Use case</strong>. AKS is best suited for enterprise-level applications or businesses requiring multi-container orchestration and complex workloads.</p>
</li>
</ul>
<p><img loading="lazy" alt="architecture diagram using Azure Kubernetes Service" src="https://azure.github.io/Cloud-Native/assets/images/1-3-4ccdafe5c7e81ea5693a0943648dafef.png" width="1280" height="720" class="img_ev3q"></p>
<p>Both options are scalable and robust, and businesses can select the one that aligns best with their operational needs and scale of application. </p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>In today’s post, we introduced you to the example app that we’ll build in this series—the Best For You Organics content generation app. We discussed our goals, overall approach, and the architecture that we’re using to create this app.</p>
<p>In our next post, we cover the <strong>environment you’ll set up</strong> to prepare for the development of the application. Learn how to configure your local environment; set up Java, Spring Boot, and ReactJS; and integrate with Azure services, like Azure OpenAI, Key Vault, and more.</p>
<p>Each subsequent post will dive deeper into the specific technologies that power this AI-driven application. Stay tuned as we explore everything from back-end data management to deploying on AKS or App Service.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional resources<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/use-generative-ai-to-build-intelligent-apps#additional-resources" class="hash-link" aria-label="Direct link to Additional resources" title="Direct link to Additional resources">​</a></h2>
<ul>
<li>
<p>To help you build the skills you need to create intelligent apps by using Azure OpenAI, complete the <a href="https://learn.microsoft.com/training/modules/get-started-openai/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Get started with Azure OpenAI Service</a> module. </p>
</li>
<li>
<p>Register for live learning or a demo playlist on <a href="https://aka.ms/bia/events?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Build Intelligent Apps</a> on Azure.</p>
</li>
</ul>]]></content>
        <author>
            <name>#30Days Of IA</name>
            <uri>https://azure.github.io/Cloud-Native/Build-IA/</uri>
        </author>
        <category label="Build-Intelligent-Apps" term="Build-Intelligent-Apps"/>
        <category label="30-days-of-IA-2024" term="30-days-of-IA-2024"/>
        <category label="learn-live" term="learn-live"/>
        <category label="demo-bytes" term="demo-bytes"/>
        <category label="community-gallery" term="community-gallery"/>
        <category label="azure-kubernetes-service" term="azure-kubernetes-service"/>
        <category label="azure-functions" term="azure-functions"/>
        <category label="azure-openai" term="azure-openai"/>
        <category label="azure-container-apps" term="azure-container-apps"/>
        <category label="azure-cosmos-db" term="azure-cosmos-db"/>
        <category label="github-copilot" term="github-copilot"/>
        <category label="github-codespaces" term="github-codespaces"/>
        <category label="github-actions" term="github-actions"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Kick-off #30Days of IA]]></title>
        <id>https://azure.github.io/Cloud-Native/30-days-of-ia-2024/kick-off</id>
        <link href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/kick-off"/>
        <updated>2024-09-10T09:00:00.000Z</updated>
        <summary type="html"><![CDATA[Combine the power of AI, cloud-scale data, and cloud-native app development to create highly differentiated digital experiences. Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure.]]></summary>
        <content type="html"><![CDATA[
<p>In today’s fast-paced digital world, staying ahead means harnessing the power of technology to create smarter, more responsive applications. We’re excited to introduce you to our new edition of Build '#IntelligentApps', your go-to destination for skilling up on how to leverage AI to transform your applications and drive innovation.</p>
<p>We’re bringing together a comprehensive suite of content designed to guide you through the latest in AI powered application development. Our goal is to empower developers, data scientists, and business leaders with the knowledge and tools needed to leverage AI effectively. Follow along for a sneak peek at what to expect.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-well-cover">What We’ll Cover<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/kick-off#what-well-cover" class="hash-link" aria-label="Direct link to What We’ll Cover" title="Direct link to What We’ll Cover">​</a></h2>
<ul>
<li>What is Build Intelligent Apps?</li>
<li>How can you <em>participate</em>?</li>
<li>How can you <em>skill up</em>? (in just 30 Days)</li>
</ul>
<p><img loading="lazy" alt="Build intelligent apps" src="https://azure.github.io/Cloud-Native/assets/images/30-days-of-ia-2024-build-ia-banner-026f80a6be3454d467eeb985c05866a9.jpg" width="1300" height="300" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-ready-to-build-intelligentapps-starting-september-16">Get Ready to Build #IntelligentApps starting September 16!<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/kick-off#get-ready-to-build-intelligentapps-starting-september-16" class="hash-link" aria-label="Direct link to Get Ready to Build #IntelligentApps starting September 16!" title="Direct link to Get Ready to Build #IntelligentApps starting September 16!">​</a></h2>
<p>Today, we kick-off with new content and activities for you to skill up on all things Intelligent Apps on Azure with “how-to” blogs, events, and community interactions! Read on to learn about what is coming!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="explore-our-initiatives">Explore Our Initiatives<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/kick-off#explore-our-initiatives" class="hash-link" aria-label="Direct link to Explore Our Initiatives" title="Direct link to Explore Our Initiatives">​</a></h2>
<p>We have a number of initiatives exclusively curated to build an engaging learning journey for you to skill up on relevant technologies for building intelligent apps.</p>
<ul>
<li><a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024" target="_blank" rel="noopener noreferrer">#30Days of IA</a> - 4 themed weeks of blogs on AI led application development in Java or Python using Azure Application Platform, Azure Data Platform and Azure AI.</li>
<li><a href="https://aka.ms/FallForIA/LearnLive" target="_blank" rel="noopener noreferrer">Learn Live Series</a> – 5 weekly livestream episodes on AI app development in Python or .NET.</li>
<li><a href="https://azure.github.io/Cloud-Native/Build-IA/DemoBytes" target="_blank" rel="noopener noreferrer">Demo Bytes</a> – snackable demo playlist on building intelligent apps in Java, Python, .NET and using GitHub Copilot.</li>
<li><a href="https://aka.ms/build-ia/csc" target="_blank" rel="noopener noreferrer">AI Skills Challenge</a> – show your skills by competing with peers to complete learn modules and earn a badge.</li>
</ul>
<p><img loading="lazy" alt="Build intelligent apps" src="https://azure.github.io/Cloud-Native/assets/images/30-days-of-ia-2024-cloud-skills-modules-7325712ca36084eaac10f41fb9a35d54.jpg" width="1920" height="1080" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-for-the-events"><a href="https://aka.ms/bia/events?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Register for the events!</a><a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/kick-off#register-for-the-events" class="hash-link" aria-label="Direct link to register-for-the-events" title="Direct link to register-for-the-events">​</a></h2><p>What are 4 things you can do today, to jumpstart your learning journey?</p><ul>
<li>
<p><strong>Register</strong>  for <a href="https://aka.ms/bia/events?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Learn Live</a> (free, online) – weekly live learning with SMEs</p>
<ul>
<li>September 12 | Episode 1: <a href="https://developer.microsoft.com/reactor/events/23495/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Data-driven AI applications and multi-modal search</a></li>
<li>September 18 | Episode 2: <a href="https://developer.microsoft.com/reactor/events/23702/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Containerizing and Deploying AI Workloads on AKS</a></li>
<li>September 25 | Episode 3: <a href="https://developer.microsoft.com/reactor/events/23497/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Operational Excellence with AKS</a></li>
<li>October 2 | Episode 4: <a href="https://developer.microsoft.com/reactor/events/23656/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Get Started Incorporating AI into Your .NET Applications and Service</a></li>
<li>October 9 | Episode 5: <a href="https://developer.microsoft.com/reactor/events/23657/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Modernize Your Apps Using GenAI Without Rewriting the Code</a></li>
</ul>
</li>
<li>
<p><strong>Register</strong> for <a href="https://aka.ms/bia/events?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Demo Bytes</a> (free, online) - snackable demo playlist</p>
<ul>
<li>September 16 | Episode 1: <a href="https://developer.microsoft.com/reactor/events/23702/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">AKS Automated Deployments - Streamlining Kubernetes Deployments</a></li>
<li>September 17 | Episode 2: <a href="https://developer.microsoft.com/reactor/events/23587/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Deliver AI infused app innovation with Open Liberty on AKS</a></li>
<li>September 19 | Episode 3: <a href="https://developer.microsoft.com/reactor/events/23697/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Fine-tuning open-source models made easy with KAITO</a></li>
<li>September 23 | Episode 4: <a href="https://developer.microsoft.com/reactor/events/23588/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Get your on-prem apps AI-ready using GitHub Copilot</a></li>
<li>September 24 | Episode 5: <a href="https://developer.microsoft.com/reactor/events/23590/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Add Generative AI Capabilities to your Web Apps</a></li>
<li>September 26 | Episode 6: <a href="https://developer.microsoft.com/reactor/events/23592/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Apply Auto-Scaling and Load Testing to your AI Applications</a></li>
<li>September 30 | Episode 7: <a href="https://developer.microsoft.com/reactor/events/23593/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Configure &amp; Deploy Intelligent Java SpringBoot Apps on Azure App Service</a></li>
<li>October 1 | Episode 8: <a href="https://developer.microsoft.com/reactor/events/23594/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">End-to-End AI application deployments with GitHub Copilot</a></li>
<li>October 3 | Episode 9: <a href="https://developer.microsoft.com/reactor/events/23595/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Extending GitHub Copilot to chat with your Postgres Database</a></li>
<li>October 7 | Episode 10: <a href="https://developer.microsoft.com/reactor/events/23596/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Architecting a Unified AI Stack: Secure, Responsible, and Scalable</a></li>
<li>October 8 | Episode 11: <a href="https://developer.microsoft.com/reactor/events/23597/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">10x Developer with GitHub Copilot</a></li>
<li>October 10 | Episode 12: <a href="https://developer.microsoft.com/reactor/events/23598/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Building and Running Intelligent Spring Apps on Azure Container Apps</a></li>
<li>October 14 | Episode 13: <a href="https://developer.microsoft.com/reactor/events/23599/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Ingest your own content using Azure Functions OpenAI Triggers &amp; Bindings</a></li>
<li>October 15 | Episode 14: <a href="https://developer.microsoft.com/reactor/events/23600/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">GenAI Gateway Capabilities in Azure API Management</a></li>
<li>October 17 | Episode 15: <a href="https://developer.microsoft.com/reactor/events/23601/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Elevate Policy Authoring Experience in API Management</a></li>
</ul>
</li>
<li>
<p><strong>Register</strong> for the <a href="https://aka.ms/intelligent-apps/csc?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">AI Skills Challenge</a> to earn a Microsoft Learn badge – ends on <em>November 1</em>!.</p>
</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="30days-of-intelligent-apps">#30Days Of Intelligent Apps<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/kick-off#30days-of-intelligent-apps" class="hash-link" aria-label="Direct link to #30Days Of Intelligent Apps" title="Direct link to #30Days Of Intelligent Apps">​</a></h2>
<p><a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024" target="_blank" rel="noopener noreferrer">#30Days of IA</a> is a series of “how-to” blog posts grouped into themed weeks - taking you from core concepts to end-to-end solution examples in 30 days. Each blog will provide conceptual lessons paired with exercises and resources to help you reinforce learnings and take next steps.</p>
<p>This series takes you through learning journey in <strong>four stages</strong>, each building on the previous week to help you skill up in a beginner-friendly way:</p>
<ul>
<li><strong>Week 1</strong>: Build AI powered content generation <a href="https://azure.microsoft.com/blog/build-next-generation-ai-powered-applications-on-microsoft-azure/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">intelligent app in Java on Azure Kubernetes Service (AKS)</a></li>
<li><strong>Week 2</strong>: Build AI powered content generation <a href="https://azure.microsoft.com/blog/build-next-generation-ai-powered-applications-on-microsoft-azure/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">intelligent app in Java on Azure App Service</a></li>
<li><strong>Week 3</strong>: Build your own copilot with <a href="https://azure.microsoft.com/products/ai-studio/?msockid=115fb720d83d62ad12f8a380d9876328&amp;ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure AI Studio</a>, <a href="https://github.com/microsoft/prompty" target="_blank" rel="noopener noreferrer">Prompty</a> and AKS</li>
<li><strong>Week 4</strong>: Infuse AI-assisted development tools to <a href="https://www.microsoft.com/research/publication/the-space-of-developer-productivity-theres-more-to-it-than-you-think/?msockid=115fb720d83d62ad12f8a380d9876328&amp;ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">enhance your efforts</a> and experience.</li>
</ul>
<p>We will start with defining intelligent apps and then expand on how to build with cloud technologies like <a href="https://azure.microsoft.com/products/kubernetes-service/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure Kubernetes Service (AKS)</a>, <a href="https://azure.microsoft.com/products/app-service/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Azure App Service</a>, <a href="https://azure.microsoft.com/products/api-management/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">Secure API Management</a>, and <a href="https://github.com/features/copilot?ef_id=_k_77f1fde05f071240ccbe9b3b760f8c57_k_&amp;OCID=AIDcmmb150vbv1_SEM__k_77f1fde05f071240ccbe9b3b760f8c57_k_&amp;msclkid=77f1fde05f071240ccbe9b3b760f8c57" target="_blank" rel="noopener noreferrer">GitHub Copilot</a> as well as integrate AI and cloud-scale data. You will learn how to build end-to-end scenarios for real world application development based on <a href="https://learn.microsoft.com/azure/architecture/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">reference architectures</a>. Before we dive deep on intelligent apps, here is a high-level overview of the <strong>Intelligent Apps</strong> landscape on Azure for you to leverage the most comprehensive, trusted cloud to prime the customer and employee experiences.</p>
<p><img loading="lazy" alt="diagram of intelligent apps on Azure AI application platform" src="https://azure.github.io/Cloud-Native/assets/images/azure-ai-application-platform-2d270b371e1a9a64c0a43fc41da4c657.jpeg" width="781" height="440" class="img_ev3q"></p>
<p>The Azure application platform is designed to help you deliver on the promise of intelligent applications. It’s an <a href="https://azure.microsoft.com/solutions/build-modernize-intelligent-apps?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">integrated platform</a> that encompasses developer services, application services, databases, and <a href="https://azure.microsoft.com/solutions/ai/?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">AI</a> services. Leveraging Azure’s robust security capabilities and principles around governance and <a href="https://www.microsoft.com/ai/responsible-ai?ocid=biafy25h1_30daysofia_webpage_azuremktg" target="_blank" rel="noopener noreferrer">responsible AI</a>, the platform supports what you already use to help you make your apps intelligent. The developer stack on Azure also integrates AI, enhancing productivity for developers’ efficiency.</p>
<p>There are eight key areas in which you can reinvent experiences for external customers as well as reshape internal processes to derive high productivity.</p>
<p><img loading="lazy" alt="image of use cases for reinventing customer experiences with intelligent apps" src="https://azure.github.io/Cloud-Native/assets/images/customer-experiences-2b0b13a22e09f52d962c40a8417e6d3f.jpeg" width="781" height="440" class="img_ev3q"></p>
<p><img loading="lazy" alt="image of use cases for reshaping business processes with intelligent apps" src="https://azure.github.io/Cloud-Native/assets/images/reshaping-business-processes-1289a2f34f6d078c26d9a0c5e9f5ea1b.jpeg" width="781" height="440" class="img_ev3q"></p>
<p>Bring your applications to a modern application platform in the cloud for AI, which leverages a cloud data platform at scale, and agile development methods with DevOps. Embrace the most effective approaches to enhance both customer and employee experiences. Azure offers the latest apps, data, AI and is the most comprehensive, trusted cloud.</p>
<p>To start with the basics for understanding AI app development concepts, explore <a href="https://azure.github.io/Cloud-Native/30DaysOfIA/" target="_blank" rel="noopener noreferrer">#30Days of IA (2023)</a> and <a href="https://azure.github.io/Cloud-Native/60DaysOfIA/" target="_blank" rel="noopener noreferrer">#60Days of IA</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lets-get-started">Let’s Get Started<a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/kick-off#lets-get-started" class="hash-link" aria-label="Direct link to Let’s Get Started" title="Direct link to Let’s Get Started">​</a></h2>
<p>Now you know everything! We hope you are as excited as we are to dive into a full month of active learning and doing! Don't forget to <a href="https://azure.github.io/Cloud-Native/30-days-of-ia-2024/rss.xml" target="_blank" rel="noopener noreferrer">subscribe</a> for updates in your favorite feed reader. <strong>And, look out for our first Intelligent Apps blog.</strong></p>]]></content>
        <author>
            <name>Devanshi Joshi</name>
            <uri>https://github.com/devanshidiaries</uri>
        </author>
        <category label="Build-Intelligent-Apps" term="Build-Intelligent-Apps"/>
        <category label="30-days-of-IA-2024" term="30-days-of-IA-2024"/>
        <category label="learn-live" term="learn-live"/>
        <category label="demo-bytes" term="demo-bytes"/>
        <category label="community-gallery" term="community-gallery"/>
        <category label="azure-kubernetes-service" term="azure-kubernetes-service"/>
        <category label="azure-functions" term="azure-functions"/>
        <category label="azure-openai" term="azure-openai"/>
        <category label="azure-container-apps" term="azure-container-apps"/>
        <category label="azure-cosmos-db" term="azure-cosmos-db"/>
        <category label="github-copilot" term="github-copilot"/>
        <category label="github-codespaces" term="github-codespaces"/>
        <category label="github-actions" term="github-actions"/>
    </entry>
</feed>