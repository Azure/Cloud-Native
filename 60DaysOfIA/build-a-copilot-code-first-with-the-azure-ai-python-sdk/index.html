<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-blog-60daysofIA" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">4.2 Build A Copilot Code-First with the Azure AI Python SDK | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" name="description" content="Have a generative AI application you want to build, but don&#x27;t know where to start? In this blog post, we introduce the Azure AI Studio Python Quickstart Sample, explain the end-to-end development workflow, then show you how you can get started customizing it, to explore your own application requirements."><meta data-rh="true" name="keywords" content="azure,azureai,copilot,aisdk"><meta data-rh="true" property="article:published_time" content="2024-03-12T09:00:00.000Z"><meta data-rh="true" property="article:author" content="https://azure.github.io/Cloud-Native/Build-IA/"><meta data-rh="true" property="article:tag" content="Build-Intelligent-Apps,60-days-of-IA,learn-live,hack-together,community-buzz,ask-the-expert,azure-kubernetes-service,azure-functions,azure-openai,azure-container-apps,azure-cosmos-db,github-copilot,github-codespaces,github-actions"><meta data-rh="true" property="og:url" content="https://azure.github.io/cloud-native/60daysofia/build-a-copilot-code-first-with-the-azure-ai-python-sdk"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" property="og:description" content="Have a generative AI application you want to build, but don&#x27;t know where to start? In this blog post, we introduce the Azure AI Studio Python Quickstart Sample, explain the end-to-end development workflow, then show you how you can get started customizing it, to explore your own application requirements."><meta data-rh="true" property="og:image" content="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/60daysofIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk"><meta data-rh="true" name="twitter:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" name="twitter:description" content="Have a generative AI application you want to build, but don&#x27;t know where to start? In this blog post, we introduce the Azure AI Studio Python Quickstart Sample, explain the end-to-end development workflow, then show you how you can get started customizing it, to explore your own application requirements."><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@devanshidiaries"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/60daysofIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30-days-of-ia-2024/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30-days-of-ia-2024/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.cf5fa7e1.css">
<script src="/Cloud-Native/assets/js/runtime~main.f0325e06.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.2244487d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/Cloud-Native/"></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarBackground_Iz1u"><div class="container"><div class="row"><div class="col col--8 col--offset-2 announcementBarContainer_QNjo"><div class="col-demo"><p class="announcementBarContent_tvcd">Learn to use <a class="announcementLink_qKCm" target="_blank" href="https://developer.microsoft.com/reactor/events/23599/?ocid=biafy25h1_cn_webpage_azuremktg" data-bi-area="AnnouncementBar" data-bi-name="Announcement">Azure Functions OpenAI to ingest your own content</a> | Give us a üåü <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></p></div></div><div class="col col--2 announcementBarIconContainer_GQot"><div class="col-demo"><a href="https://github.com/azure/cloud-native" target="_blank" class="icon_QeTG" aria-label="Visit us on GitHub"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" class="icon_QeTG" aria-label="Subscribe to RSS"><svg width="24" height="24" viewBox="0 0 333333 333333" xmlns="http://www.w3.org/2000/svg" fill="#f49c4f"><path d="M166667 0c92048 0 166667 74619 166667 166667s-74619 166667-166667 166667S0 258715 0 166667 74619 0 166667 0zm-57698 203357c-11551 0-20938 9418-20938 20897 0 11537 9386 20857 20938 20857 11587 0 20967-9320 20967-20857 0-11479-9378-20897-20967-20897zm-20918-61899v30148c19632 0 38081 7677 51977 21585 13883 13868 21548 32406 21548 52114h30276c0-57254-46585-103838-103801-103838v-9zm38-53431v30154c70007 0 126979 57031 126979 127116l30235 3c0-86697-70539-157270-157212-157270l-2-3z"></path></svg></a><svg viewBox="0 0 24 24" width="24" height="24" class="icon_Kj6K"><path fill="white" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#60DaysOfIA</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/kick-off">Kick-off #60Days of IA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/harnessing-the-power-of-intelligent-apps">1. Harnessing the power of Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/power-up-crafting-an-intelligent-energy-forecasting-application-using-azure-kubernetes-service">2. Power Up: Crafting an Intelligent Energy Forecasting Application Using Azure Kubernetes Service</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-1">2.1 Forecasting Energy Usage with Intelligent Apps Part 1: Laying the Groundwork with AKS, KAITO, and LLaMA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-2">2.2 Forecasting Energy Usage with Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-3">2.3 Forecasting Energy Usage with Intelligent Apps Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/cosmos-db-and-intelligent-apps-a-match-made-for-innovation">3. Cosmos DB and Intelligent Apps: A Match Made for Innovation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-1">3.1 Dynamic Repricing of Products Using Intelligent Apps Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-2">3.2 Dynamic Repricing of Products Using Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-3">3.3 Dynamic Repricing of Products Using Intelligent Apps Part 3: Graphing and Displaying Price Forecasts in a Web Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/fuel-your-intelligent-apps-with-azure-ai">4. Fuel Your Intelligent Apps with Azure AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-contoso-chat-end-to-end">4.1 Build Contoso Chat End-to-End</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk">4.2 Build A Copilot Code-First with the Azure AI Python SDK</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-prompt-flow">4.3 Build a Copilot on Azure Code-First with Prompt Flow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-langchain">4.4 Build a Copilot on Azure Code-First with Langchain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/deploying-your-copilot-on-azure">4.5 Deploying Your Copilot On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/the-role-of-platform-engineering-in-developing-intelligent-apps">5 The Role of Platform Engineering in Developing Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-1">6.1 Creating a Virtual Stylist Chatbot ‚Äî Part 1: Analyzing Images with AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-2">6.2 Creating a Virtual Stylist Chatbot ‚Äî Part 2: Adding a Chatbot Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-3">6.3 Creating a Virtual Stylist Chatbot ‚Äî Part 3: Deploying the App</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-1">6.4 Building a Multichannel Notification System (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-2">6.5 Building a Multichannel Notification System (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-1">7.1 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-2">7.2 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-3">7.3 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-1">7.4 Real-time Voice Sentiment Analysis System 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-2">7.5 Real-time Voice Sentiment Analysis System 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/managing-the-cost-of-intelligent-apps">8 Managing the Cost of Intelligent Apps</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Have a generative AI application you want to build, but don&#x27;t know where to start? In this blog post, we introduce the Azure AI Studio Python Quickstart Sample, explain the end-to-end development workflow, then show you how you can get started customizing it, to explore your own application requirements."><link itemprop="image" href="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta itemprop="keywords" content="azure,azureai,copilot,aisdk"><header><h1 class="title_f1Hy" itemprop="headline">4.2 Build A Copilot Code-First with the Azure AI Python SDK</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-03-12T09:00:00.000Z" itemprop="datePublished">March 12, 2024</time> ¬∑ <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://azure.github.io/Cloud-Native/img/logo-2024.png" alt="#60Days Of IA" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">#60Days Of IA</span></a></div><small class="avatar__subtitle" itemprop="description">BuildIA Content Team</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody">
<p><strong>Welcome to Day 2Ô∏è‚É£ of the Azure AI week on #60Days Of IA</strong></p>
<p>Let&#x27;s recap what we learned so far. In our <em>kickoff</em> post we set the stage by describing our application scenario (Contoso Chat), the paradigm shift for generative AI apps (LLM Ops) and the unified platform for streamlining development (Azure AI Studio). In the next post we walked through the signature <a href="https://aka.ms/aitour/contoso-chat" target="_blank" rel="noopener noreferrer">Contoso Chat</a> application sample to understand how we can implement that scenario using Azure AI Studio and Prompt flow - from building the chat function, to evaluating it, deploying it to a hosted endpoint, then testing that API in a chat client.</p>
<p>But what if you want to get started building your own application scenario? Over the next three posts, we&#x27;ll look at <em>starter samples</em> that will get you from ideation (define chat function) to operationalization (deploy chat API) using different tools and frameworks to simplify orchestration.</p>
<p>Ready? Let&#x27;s go!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-youll-learn-today">What You&#x27;ll Learn Today<a href="#what-youll-learn-today" class="hash-link" aria-label="Direct link to What You&#x27;ll Learn Today" title="Direct link to What You&#x27;ll Learn Today">‚Äã</a></h2>
<ul>
<li>What is the copilot architecture?</li>
<li>What is the Azure AI SDK?</li>
<li>What is the Quickstart sample?</li>
<li>How can I customize and extend this for my scenario?</li>
<li><strong>Challenge:</strong> Fork <a href="https://github.com/Azure-Samples/aistudio-python-quickstart-sample" target="_blank" rel="noopener noreferrer">this quickstart</a> and build it, then extend it with your data.</li>
<li><strong>Resources:</strong> Bookmark <a href="https://aka.ms/ai-studio/collection?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">this collection</a> for training &amp; documentation.</li>
</ul>
<br>
<p><img loading="lazy" alt="Build a Copilot on Azure Code-First with Azure AI SDK" src="/Cloud-Native/assets/images/banner-4d2eba8f8235ac22e80ba59b0b9a3651.png" width="1000" height="420" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1--learning-objectives">1 | Learning Objectives<a href="#1--learning-objectives" class="hash-link" aria-label="Direct link to 1 | Learning Objectives" title="Direct link to 1 | Learning Objectives">‚Äã</a></h2>
<p>The <a href="https://github.com/Azure-Samples/aistudio-python-quickstart-sample" target="_blank" rel="noopener noreferrer">copilot ai-sdk quickstart</a> is a Python-based starter sample for a code-first approach to building a copilot experience on the Azure AI platform. Since this is the foundational sample, we&#x27;ll use it to explore some of the details of the implementation and set the stage for you to explore customizing it further for your application requirements.</p>
<p>By the end of this tutorial you should be able to:</p>
<ol>
<li>Explain the functional components of the copilot architecture</li>
<li>Explain the Azure resources required to implement a copilot</li>
<li>Explain the core functionality provided by the Azure AI SDK</li>
<li>Build, run, evaluate, and deploy, a basic copilot with Azure AI Studio.</li>
<li>Explore the Azure AI curated VS Code environment to customize the sample</li>
</ol>
<p>Keep in mind that this is a <em>quickstart sample</em> and is <strong>not meant for production use</strong>. We encourage you to extend and customize the sample to understand the platform capabilities and end-to-end development workflow. Make sure to validate the responses yourself and evaluate its suitability for your application needs in context.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-copilot-architecture">2| Copilot Architecture<a href="#2-copilot-architecture" class="hash-link" aria-label="Direct link to 2| Copilot Architecture" title="Direct link to 2| Copilot Architecture">‚Äã</a></h2>
<p>Let&#x27;s first revisit the high-level application architecture for our copilot and familiarize ourselves with the core functional components. Our goal is to <strong>build the chat function</strong> component and deploy it to get a hosted <strong>Copilot API</strong> endpoint that we can integrate into front-end applications to provide a conversational chatbot capability grounded in our data.
<img loading="lazy" alt="Copilot architecture" src="/Cloud-Native/assets/images/copilot-architecture-a14ddb6e2ac8e5ded7e544f1093325fc.png" width="2856" height="1292" class="img_ev3q"></p>
<p>Let&#x27;s review what we will need to implement this architecture:</p>
<ol>
<li><strong>Model Deployments</strong> - we need deployed models for chat and embeddings.</li>
<li><strong>Search Index</strong> - we need a search index populated with our product data.</li>
<li><strong>Azure Resources</strong> - we need to setup and configure our Azure AI project.</li>
<li><strong>App Evaluation</strong> - we need to evaluate copilot quality for responsible AI.</li>
<li><strong>App Deployment</strong> - we need to deploy the copilot for a hosted API endpoint.</li>
</ol>
<p>The <a href="https://github.com/Azure-Samples/aistudio-python-quickstart-sample" target="_blank" rel="noopener noreferrer">copilot ai-sdk quickstart</a> provides a starter codebase that implements this chat function using the Retrieval Augmented Generation (RAG) pattern with custom data. The implementation makes use of Azure AI Studio and the <a href="https://aka.ms/aistudio/docs/sdk?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI SDK (Python)</a> for a code-first approach. Since these technologies are currently in preview, we expect the sample to keep evolving quickly and <strong>recommend following the README-based tutorial there</strong> for the latest instructions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3--azure-ai-sdk">3 | Azure AI SDK<a href="#3--azure-ai-sdk" class="hash-link" aria-label="Direct link to 3 | Azure AI SDK" title="Direct link to 3 | Azure AI SDK">‚Äã</a></h2>
<p>Before we dive into the sample, let&#x27;s take a moment to learn about the <a href="https://learn.microsoft.com/python/api/overview/azure/ai?view=azure-python-preview?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI SDK for Python (preview)</a>. The SDK consists of two packages:</p>
<ul>
<li><a href="https://pypi.org/project/azure-ai-generative/" target="_blank" rel="noopener noreferrer">azure-ai-generative</a> - which provides the functionality needed for building, evaluating and deploying Generative AI applications. This has extra packages (index, evaluate, promptflow) you can use for enhanced local development capabilities - or optionally, remove if unused.</li>
<li><a href="https://pypi.org/project/azure-ai-resources/" target="_blank" rel="noopener noreferrer">azure-ai-resources</a> - which provides the functionality for connecting to, and managing, your Azure AI projects and resources. Use this for control plane operations to create and manage data, indexes, models and deployments.</li>
</ul>
<p>The generative package makes use of the resources package to <a href="https://learn.microsoft.com/azure/ai-studio/how-to/sdk-generative-overview#connecting-to-projects?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">create an <code>AIClient</code> instance</a> that can be used for connecting to the Azure AI project resources.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> azure</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ai</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">client </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> AIClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> azure</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">identity </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DefaultAzureCredential</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ai_client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AIClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    credential</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DefaultAzureCredential</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subscription_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;subscription_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource_group_name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;resource_group&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    project_name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;project_name&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once connected, you can use the generative package to build an index, run a local evaluation, or deploy chat functions and prompt flows, using the imports shown:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> azure</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ai</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">generative</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">index </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> build_index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> azure</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ai</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">generative</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">evaluate </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> evaluate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> azure</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ai</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">entities</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">deployment </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Deployment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To get started, you will need to <a href="https://learn.microsoft.com/en-us/azure/ai-studio/how-to/sdk-install?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">install the SDK</a> in your local development environment. When you use the quickstart sample with GitHub Codespaces or the Azure AI curated VS Code environment, the SDK comes pre-installed and ready to use.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4--using-the-quickstart-sample">4 | Using the Quickstart Sample<a href="#4--using-the-quickstart-sample" class="hash-link" aria-label="Direct link to 4 | Using the Quickstart Sample" title="Direct link to 4 | Using the Quickstart Sample">‚Äã</a></h2>
<p>The <a href="https://github.com/Azure-Samples/aistudio-python-quickstart-sample" target="_blank" rel="noopener noreferrer">copilot ai-sdk quickstart</a> provides a comprehensive <strong>README.md</strong> document that describes the step-by-step process for building, running, evaluating, and deploying, a starter copilot sample.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41--pre-requisites">4.1 | Pre-Requisites<a href="#41--pre-requisites" class="hash-link" aria-label="Direct link to 4.1 | Pre-Requisites" title="Direct link to 4.1 | Pre-Requisites">‚Äã</a></h3>
<p>To get started, you will need an active Azure subscription and have access to the Azure OpenAI service to create and deploy the required models for chat completion, chat evaluation and embedddings. You will also need a GitHub account.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42--setup-dev-environment">4.2 | Setup Dev Environment<a href="#42--setup-dev-environment" class="hash-link" aria-label="Direct link to 4.2 | Setup Dev Environment" title="Direct link to 4.2 | Setup Dev Environment">  ‚Äã</a></h3>
<p>The fastest way to get started exploring the sample is to fork the repo to your personal profile, then launch GitHub Codespaces by navigating to the &quot;Codespaces&quot; tab under the &quot;Code&quot; dropdown and creating a new codespace. Active codespaces are listed as shown below.</p>
<p><img loading="lazy" alt="Launch" src="/Cloud-Native/assets/images/01-launch-codespaces-1ad39efaa8d2fb4aaba22c3d862d4481.png" width="440" height="308" class="img_ev3q"></p>
<p>Once the Codespace is ready, you will see the Visual Studio Code editor view in your browser tab. Open the <strong>README.md</strong> in the editor, then follow the instructions to complete the tutorial.</p>
<p><img loading="lazy" alt="Run" src="/Cloud-Native/assets/images/03-running-codespaces-b22f43ec205440e361612be69b0fa8bf.png" width="1237" height="793" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43--initialize-azure-ai-resources">4.3 | Initialize Azure AI Resources<a href="#43--initialize-azure-ai-resources" class="hash-link" aria-label="Direct link to 4.3 | Initialize Azure AI Resources" title="Direct link to 4.3 | Initialize Azure AI Resources">‚Äã</a></h3>
<p>To build the copilot, we need to provision the Azure resources listed below.</p>
<ul>
<li>An <a href="https://learn.microsoft.com/azure/ai-studio/concepts/ai-resources?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI hub resource</a> to provide a working <em>team</em> environment and manage resource access, billing and more.</li>
<li>An <a href="https://learn.microsoft.com/azure/ai-studio/how-to/create-projects?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI project resource</a> to organize the data, models, and deployments for <em>an application</em>, and save its state for future use.</li>
<li>An <a href="https://learn.microsoft.com/en-us/azure/search/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI Search resource</a> to host the search index for our product data.</li>
<li>An <a href="https://learn.microsoft.com/azure/openai?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure OpenAI resource</a> to deploy the models for chat completion, chat evaluation and embeddings.</li>
</ul>
<p>For now, we will be creating these resources from the <a href="https://ai.azure.com?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI Studio UI</a> and <a href="https://portal.azure.com?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Portal</a> UI in the browser. However, we expect future support for a command-line (CLI) based approach for efficiency and automation. Refer to the sample README for the step-by-step guidance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="44--initialize-azure-configuration">4.4 | Initialize Azure Configuration<a href="#44--initialize-azure-configuration" class="hash-link" aria-label="Direct link to 4.4 | Initialize Azure Configuration" title="Direct link to 4.4 | Initialize Azure Configuration">‚Äã</a></h3>
<p>Once we&#x27;ve created the Azure resources, we need to configure our Visual Studio Code environment to connect to the cloud.  The repo comes with a <code>config.sample.json</code> that shows you the properties that need to be configured. The easiest way to set these is to download the <code>config.json</code> file from your Azure AI project resource and place it in the root folder. This information is then used to initialize the<code>AIClient</code> in the code, to support interactions with those resources, as explained earlier.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;subscription_id&quot;: &quot;your_subscription_id&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resource_group&quot;: &quot;your_resource_group&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;project_name&quot;: &quot;your_project_name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="45--configure-environment-variables">4.5 | Configure Environment Variables<a href="#45--configure-environment-variables" class="hash-link" aria-label="Direct link to 4.5 | Configure Environment Variables" title="Direct link to 4.5 | Configure Environment Variables">‚Äã</a></h3>
<p>The codebase comes with a sample <code>.env.sample</code> file that shows the environment variables you will need to configure, to run the sample. Copy this to <code>.env</code> then replace the placeholder strings with the values from the respective Azure resources you provisioned earlier. These environment variables will be used by the Azure AI SDK, to connect to relevant services (by endpoint) with required authentication (key) when implementing the chat function.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_SUBSCRIPTION_ID=replace_with_azure_subscription_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_API_TYPE=azure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_API_KEY=replace_with_openai_key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_API_BASE=replace_with_openai_base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_API_VERSION=replace_with_openai_version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_AI_SEARCH_ENDPOINT=replace_with_aisearch_target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_AI_SEARCH_KEY=replace_with_aisearch_key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_AI_SEARCH_INDEX_NAME=replace_with_aisearch_index_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_CHAT_MODEL=gpt-35-turbo-16k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-35-turbo-16k-0613</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_EVALUATION_MODEL=gpt-35-turbo-16k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_EVALUATION_DEPLOYMENT=&quot;gpt-35-turbo-16k-0613&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-ada-002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-ada-embedding-002-2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="46--explore-custom-data">4.6 | Explore Custom Data<a href="#46--explore-custom-data" class="hash-link" aria-label="Direct link to 4.6 | Explore Custom Data" title="Direct link to 4.6 | Explore Custom Data">‚Äã</a></h3>
<p>At this point, the base system configuration is done and we just need to populate the data (for the search index) and then run, evaluate, and iterate, the chat function till the response quality is acceptable. Let&#x27;s take a minute to explore the codebase <code>data/</code> folder to see the sample data we provide in the starter. We only use the product catalog data (to build the index) in <em>this</em> sample but you can explore usage of the other data types for advanced features or integrations later.</p>
<table><thead><tr><th>Data Folder</th><th>Data Description</th></tr></thead><tbody><tr><td><code>data/0-misc</code></td><td>General information - e.g., customer policies for org.</td></tr><tr><td><code>data/1-customer-info</code></td><td>Customer purchase records  - for 13 fictional customers</td></tr><tr><td><code>data/2-chat-history</code></td><td>Customer conversation history - for a subset of customers</td></tr><tr><td><code>data/3-product-info</code></td><td>Product catalog data - for 20 items in 7 categories</td></tr><tr><td><code>data/4-scores</code></td><td>Test data - for use in evaluations</td></tr><tr><td><code>data/5-prompt-templates</code></td><td>Example templates - for different contexts</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="47--explore-the-codebase">4.7 | Explore The Codebase<a href="#47--explore-the-codebase" class="hash-link" aria-label="Direct link to 4.7 | Explore The Codebase" title="Direct link to 4.7 | Explore The Codebase">‚Äã</a></h3>
<p>Here are the main files you need to be aware of:</p>
<table><thead><tr><th>File</th><th>Description</th></tr></thead><tbody><tr><td><code>src/run.py</code></td><td>The main entry point for executing core operations</td></tr><tr><td><code>src/streaming_utils.py</code></td><td>Functions for use in interactive conversation</td></tr><tr><td><code>src/copilot_aisdk/chat.py</code></td><td>The chat function implementation.</td></tr><tr><td><code>src/system-message.jinja2</code></td><td>The prompt template with system context (assistant)</td></tr></tbody></table>
<p>You can now execute the various steps of the end-to-end workflow as follows:</p>
<ul>
<li><code>python src/run.py --build-index</code> - to build the search index</li>
<li><code>python src/run.py --question &quot;which tent is the most waterproof?&quot;</code> - to test the chat function</li>
<li><code>python src/run.py --evaluate</code> - to evaluate the chat function</li>
<li><code>python src/run.py --deploy</code> - to deploy the chat function</li>
<li><code>python src/run.py --invoke</code> - to test the deployed chat API endpoint</li>
</ul>
<p>Note that the exact syntax and parameters used in these commands may evolve over time - so check the README in the sample for the latest instructions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="48--explore-the-chat-function">4.8 | Explore The Chat Function<a href="#48--explore-the-chat-function" class="hash-link" aria-label="Direct link to 4.8 | Explore The Chat Function" title="Direct link to 4.8 | Explore The Chat Function">‚Äã</a></h3>
<p>Let&#x27;s briefly talk about the custom code for the copilot, found in the <code>src/chat.py</code> file.</p>
<ul>
<li>The main entry point is the <code>chat_completion</code> function that takes a list of messages representing the conversation history.</li>
<li>The <code>get_documents</code> function extracts the last message (&quot;user question&quot;) and uses it to retrieve relevant search results using the OpenAI embeddings model and the Azure AI Search client respectively, in a <em>retrieval augmented generation</em> (RAG) pattern.</li>
<li>The <code>chat_completion</code> function then takes the returned response and crafts an enhanced prompt (with the system context template, initial user message, and returned search results) and sends the request to the OpenAI chat model for completion.</li>
<li>The returned response is then returned to the user either interactively, or by adding it to the conversation thread (in stream mode).</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5--operationalization">5 | Operationalization<a href="#5--operationalization" class="hash-link" aria-label="Direct link to 5 | Operationalization" title="Direct link to 5 | Operationalization">‚Äã</a></h2>
<p>The starter sample provides a simple sequence of command-line operations to build, run, evaluate, deploy, and test, the chat function. However, in a real-world scenario, you would integrate the deployed app with a front-end chat UI (like the Contoso Outdoors website) - and use the Azure AI Studio platform to further evaluate the chat function (batch runs), configure content filters (content safety), and monitor usage (performance) for iterative improvement. We&#x27;ll discuss some of these tools and practices in the final post of this series.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6--customizing-the-sample">6 | Customizing the Sample<a href="#6--customizing-the-sample" class="hash-link" aria-label="Direct link to 6 | Customizing the Sample" title="Direct link to 6 | Customizing the Sample">‚Äã</a></h2>
<p>The quickstart sample is a great starting point for exploring your own application scenarios using your own data. Note that the sample is not designed for production use - you will need to do your own validation and evaluation of responses to determine if the chat function is suitable for your application needs.</p>
<p>However, this is a great time to introduce you to the <em>cloud development environment</em> provided by the <a href="https://learn.microsoft.com/azure/ai-studio/how-to/develop-in-vscode?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI curated Visual Studio Code environment</a>.This allows you to open your fork of the sample directly from Azure AI Studio, creating a compute instance with a development environment that has the Azure AI SDK and other dependencies pre-installed. Watch this video from the Azure AI Studio team to see how that works - then replicate the process to jumpstart your application exploration journey.</p>
<iframe width="600" height="400" src="https://www.youtube.com/embed/UbJg7RNLi7E" title="Build generative AI applications using custom code with Azure AI" frameborder="0"></iframe>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">‚Äã</a></h2>
<p>We&#x27;ve referenced a number of links and samples in this post. Bookmark the <a href="https://aka.ms/ai-studio/collection?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer"><em>Azure AI Studio: Code-First Collection</em></a> and revisit it regularly for an updated list of resources for code-first development of generative AI applications on Azure.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps">Build-Intelligent-Apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/60-days-of-ia">60-days-of-IA</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/hack-together">hack-together</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/community-buzz">community-buzz</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-kubernetes-service">azure-kubernetes-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-openai">azure-openai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-container-apps">azure-container-apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-cosmos-db">azure-cosmos-db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-copilot">github-copilot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-codespaces">github-codespaces</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-actions">github-actions</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cloud-Native/60DaysOfIA/build-contoso-chat-end-to-end"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">4.1 Build Contoso Chat End-to-End</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-prompt-flow"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">4.3 Build a Copilot on Azure Code-First with Prompt Flow</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-youll-learn-today" class="table-of-contents__link toc-highlight">What You&#39;ll Learn Today</a></li><li><a href="#1--learning-objectives" class="table-of-contents__link toc-highlight">1 | Learning Objectives</a></li><li><a href="#2-copilot-architecture" class="table-of-contents__link toc-highlight">2| Copilot Architecture</a></li><li><a href="#3--azure-ai-sdk" class="table-of-contents__link toc-highlight">3 | Azure AI SDK</a></li><li><a href="#4--using-the-quickstart-sample" class="table-of-contents__link toc-highlight">4 | Using the Quickstart Sample</a><ul><li><a href="#41--pre-requisites" class="table-of-contents__link toc-highlight">4.1 | Pre-Requisites</a></li><li><a href="#42--setup-dev-environment" class="table-of-contents__link toc-highlight">4.2 | Setup Dev Environment</a></li><li><a href="#43--initialize-azure-ai-resources" class="table-of-contents__link toc-highlight">4.3 | Initialize Azure AI Resources</a></li><li><a href="#44--initialize-azure-configuration" class="table-of-contents__link toc-highlight">4.4 | Initialize Azure Configuration</a></li><li><a href="#45--configure-environment-variables" class="table-of-contents__link toc-highlight">4.5 | Configure Environment Variables</a></li><li><a href="#46--explore-custom-data" class="table-of-contents__link toc-highlight">4.6 | Explore Custom Data</a></li><li><a href="#47--explore-the-codebase" class="table-of-contents__link toc-highlight">4.7 | Explore The Codebase</a></li><li><a href="#48--explore-the-chat-function" class="table-of-contents__link toc-highlight">4.8 | Explore The Chat Function</a></li></ul></li><li><a href="#5--operationalization" class="table-of-contents__link toc-highlight">5 | Operationalization</a></li><li><a href="#6--customizing-the-sample" class="table-of-contents__link toc-highlight">6 | Customizing the Sample</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></div><footer><div></div></footer></div>
</body>
</html>