<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-blog-60daysofIA" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Learn in #60DaysOfIA | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" name="description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><meta data-rh="true" property="og:url" content="https://azure.github.io/cloud-native/60daysofia/build-a-copilot-on-azure-code-first-with-langchain"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" property="og:description" content="This project uses the AI Search service to create a vector store for a custom department store data.  To enable the user to ask questions our data in a conversational format, we&#x27;ll using Langchain to connect our prompt template with our Azure Open AI LLM."><meta data-rh="true" property="og:image" content="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/60daysofIA/build-a-copilot-on-azure-code-first-with-langchain"><meta data-rh="true" name="twitter:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" name="twitter:description" content="This project uses the AI Search service to create a vector store for a custom department store data.  To enable the user to ask questions our data in a conversational format, we&#x27;ll using Langchain to connect our prompt template with our Azure Open AI LLM."><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@devanshidiaries"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/page/4" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/page/4" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/60daysofIA/build-a-copilot-on-azure-code-first-with-langchain"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.f3055625.css">
<script src="/Cloud-Native/assets/js/runtime~main.8cad71c5.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.cf5d21df.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Cloud-Native/"><div class="navbar__logo"><img src="/Cloud-Native/img/logo-2024.png" alt="Azure Cloud Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Cloud-Native/img/logo-2024.png" alt="Azure Cloud Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Cloud-Native</b></a><a class="navbar__item navbar__link" href="/Cloud-Native/Build-IA/">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Cloud-Native/60DaysOfIA">Blog</a><a class="navbar__item navbar__link" href="/Cloud-Native/Build-IA/calendar/">Calendar</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Intelligent Apps</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/Build-IA/">Build Intelligent Apps | 2024</a></li><li><a class="dropdown__link" href="/Cloud-Native/60DaysOfIA">#60DaysOfIA</a></li><li><a class="dropdown__link" href="/Cloud-Native/30DaysOfIA">#30DaysOfIA</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Cloud Native</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/New-Year/">ü•≥ | New Year 2023</a></li><li><a class="dropdown__link" href="/Cloud-Native/cnny-2023">#30DaysOfCloudNative</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Serverless</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/serverless-september">üçÇ September | 2022</a></li><li><a href="https://dev.to/azure/serverlessseptember-2020-content-collection-443k" target="_blank" rel="noopener noreferrer" class="dropdown__link">üçÇ September | 2020<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://dev.to/azure/serverless-september-content-collection-2fhb" target="_blank" rel="noopener noreferrer" class="dropdown__link">üçÇ September | 2019<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/Cloud-Native/blog">#30DaysOfServerless</a></li></ul></div><a href="https://github.com/azure/cloud-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-rss-link" aria-label="Subscribe to RSS"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarContainer_QNjo"><div class="announcementBarContent_tvcd">Meet the Azure team at <a class="announcementLink_qKCm" target="_blank" href="https://aka.ms/aks-day" data-bi-area="AnnouncementBar" data-bi-name="KubeCon + Azure Day">KubeCon + Azure Day</a> - Give us a üåü <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#60DaysOfIA</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-3">2.3 Forecasting Energy Usage with Intelligent Apps Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-2">2.2 Forecasting Energy Usage with Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/deploying-your-copilot-on-azure">4.5 Deploying Your Copilot On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-langchain">4.4 Build a Copilot on Azure Code-First with Langchain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-prompt-flow">4.3 Build a Copilot on Azure Code-First with Prompt Flow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk">4.2 Build A Copilot Code-First with the Azure AI Python SDK</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-contoso-chat-end-to-end">4.1 Build Contoso Chat End-to-End</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/fuel-your-intelligent-apps-with-azure-ai">4. Fuel Your Intelligent Apps with Azure AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-3">3.3 Dynamic Repricing of Products Using Intelligent Apps Part 3: Graphing and Displaying Price Forecasts in a Web Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-2">3.2 Dynamic Repricing of Products Using Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-1">3.1 Dynamic Repricing of Products Using Intelligent Apps Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/cosmos-db-and-intelligent-apps-a-match-made-for-innovation">3. Cosmos DB and Intelligent Apps: A Match Made for Innovation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-1">2.1 Forecasting Energy Usage with Intelligent Apps Part 1: Laying the Groundwork with AKS, KAITO, and LLaMA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/power-up-crafting-an-intelligent-energy-forecasting-application-using-azure-kubernetes-service">2. Power Up: Crafting an Intelligent Energy Forecasting Application Using Azure Kubernetes Service</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/harnessing-the-power-of-intelligent-apps">1. Harnessing the power of Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/kick-off">Kick-off #60Days of IA</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This project uses the AI Search service to create a vector store for a custom department store data.  To enable the user to ask questions our data in a conversational format, we&#x27;ll using Langchain to connect our prompt template with our Azure Open AI LLM."><link itemprop="image" href="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta itemprop="keywords" content="AzureAlStudio,copilot,RAG,Langchain"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-langchain">4.4 Build a Copilot on Azure Code-First with Langchain</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-03-14T09:00:00.000Z" itemprop="datePublished">March 14, 2024</time> ¬∑ <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://azure.github.io/Cloud-Native/img/logo-2024.png" alt="#60Days Of IA" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">#60Days Of IA</span></a></div><small class="avatar__subtitle" itemprop="description">BuildIA Content Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p><strong>Welcome to Day 4Ô∏è‚É£ of the Azure AI week on #60Days Of IA</strong>
In the previous post, we learned about how to get started with the Azure AI SDK and Prompt Flow to build a Copilot. In today&#x27;s post we&#x27;ll be covering <code>building a copilot with custom code and data using Langchain</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-youll-learn-today">What You&#x27;ll Learn Today<a href="#what-youll-learn-today" class="hash-link" aria-label="Direct link to What You&#x27;ll Learn Today" title="Direct link to What You&#x27;ll Learn Today">‚Äã</a></h2>
<ul>
<li>Quickstart Sample: Using Langchain to build a copilot.</li>
<li>What is &quot;Langchain&quot; ?</li>
<li>Build the Copilot</li>
<li>Evaluate the Copilot</li>
<li>Deploy the Copilot</li>
<li><strong>Challenge</strong>: <a href="https://github.com/Azure-Samples/aistudio-python-langchain-sample/tree/main" target="_blank" rel="noopener noreferrer">Try this quickstart sample</a></li>
<li><strong>Resources</strong>: To learn more<!-- -->
<ul>
<li><a href="https://aka.ms/azureaistudio?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI Studio</a> - UI to explore, build &amp; manage AI solutions.</li>
<li><a href="https://learn.microsoft.com/azure/ai-studio?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI Studio Docs</a> - Azure AI Studio documentation.</li>
<li><a href="https://learn.microsoft.com/azure/ai-services/what-are-ai-services?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI Services</a> - Azure AI Services documentation.</li>
<li><a href="https://learn.microsoft.com/training/modules/improve-search-results-vector-search?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Training: Using vector search in Azure Cognitive Search</a></li>
<li><a href="https://learn.microsoft.com/azure/ai-studio/tutorials/deploy-chat-web-app?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Tutorial: Deploy a web app for chat on your data</a></li>
</ul>
</li>
</ul>
<br>
<p><img loading="lazy" alt="Build a Copilot on Azure Code-First with Langchain" src="/Cloud-Native/assets/images/BIA-4-ba7753c8afc145c9b84459b07a5132c6.png" width="1000" height="420" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1--introduction">1 | Introduction<a href="#1--introduction" class="hash-link" aria-label="Direct link to 1 | Introduction" title="Direct link to 1 | Introduction">‚Äã</a></h2>
<p>This project use the AI Search service to create a vector store for a custom department store data.  We will be using Azure Open AI&#x27;s text-embedding-ada-002 deployment for embedding the data in vectors. The vector representation of your data is stored in <a href="https://learn.microsoft.com/en-us/azure/search/search-what-is-azure-search?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI Search</a> (formerly known as &quot;Azure Cognitive Search&quot;).</p>
<p>To enable the user to ask questions our data in a conversational format, we&#x27;ll using Langchain to connect our prompt template with our Azure Open AI LLM.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/rag-pattern-9258e32b911bad45b26e89185e972eb1.png" width="800" height="101" class="img_ev3q"></p>
<p>We&#x27;ll use Retrieval Augmented Generation (RAG), a pattern used in AI which uses an LLM to generate answers with your own data. In addition, we&#x27;ll  construct prompt template to provide the scope of our dataset, as well as the context to the submit questions. Lastly, we&#x27;ll maintain the state of the conversation by store the chat history in the prompt.</p>
<p><strong>Custom Data:</strong> The sample data that we&#x27;ll be using in this project is a department store dataset.  The dataset contains a list of customers, orders, products and their descriptions, and their prices.  We&#x27;ll be using this dataset to create a copilot that can answer questions about the products in the dataset.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-langchain">What is Langchain?<a href="#what-is-langchain" class="hash-link" aria-label="Direct link to What is Langchain?" title="Direct link to What is Langchain?">‚Äã</a></h2>
<p>Langchain is a framework for developing applications powered by language models. It enables you to connect a language model such as Azure OpenAI to a prompt template including: prompt instructions, chat history, context of the chat conversation, few shot examples, content to ground its response in, etc.).  This helps facilitate end-users to interact with the application to ask questions and language models to generate responses in a conversational format.</p>
<p>In this exercise, we&#x27;ll be using ConversationalRetrievalChain, which is a subclass of langchain that handles chats that are based on retrieving data from documents or vector datasources. We will use it to connect the Azure OpenAI model, retriever, prompt template and chat memory in order to search the AI Search database to retrieve the most relevant response. To activate the instance you need an LLM model (ex. gpt-35-turbo) to retrieve response, the prompt template rules, and chat history.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2--pre-requisites">2 | Pre-Requisites<a href="#2--pre-requisites" class="hash-link" aria-label="Direct link to 2 | Pre-Requisites" title="Direct link to 2 | Pre-Requisites">‚Äã</a></h2>
<p>Completing the <a href="https://github.com/Azure-Samples/aistudio-python-langchain-sample/tree/main" target="_blank" rel="noopener noreferrer">tutorial</a> requires the following:</p>
<ol>
<li>An Azure subscription - <a href="https://azure.microsoft.com/free/cognitive-services?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Create one for free</a></li>
<li>Access to Azure OpenAI in the Azure Subscription - <a href="https://aka.ms/oai/access?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Request access here</a></li>
<li>Custom data to ground the copilot - <a href="https://github.com/Azure-Samples/aistudio-python-langchain-sample/tree/main/data/3-product-info" target="_blank" rel="noopener noreferrer">Sample product-info data is provided</a></li>
<li>A GitHub account - <a href="https://github.com/signup" target="_blank" rel="noopener noreferrer">Create one for free</a></li>
<li>Access to GitHub Codespaces - <a href="https://docs.github.com/en/billing/managing-billing-for-github-codespaces/about-billing-for-github-codespaces#monthly-included-storage-and-core-hours-for-personal-accounts" target="_blank" rel="noopener noreferrer">Free quota should be sufficient</a></li>
</ol>
<p>The tutorial uses Azure AI Studio which is currently in public preview.</p>
<ul>
<li>Read <a href="https://learn.microsoft.com/azure/ai-studio/reference/region-support#azure-public-regions?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">the documentation</a> to learn about regional availability of Azure AI Studio (preview)</li>
<li>Read the <a href="https://learn.microsoft.com/azure/ai-studio/faq?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI Studio FAQ</a> for answers to some commonly-asked questions.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-the-copilot-with-jupiter-notebook">Open the copilot with Jupiter notebook<a href="#open-the-copilot-with-jupiter-notebook" class="hash-link" aria-label="Direct link to Open the copilot with Jupiter notebook" title="Direct link to Open the copilot with Jupiter notebook">‚Äã</a></h2>
<p>We&#x27;ll be using Python SDK to create our copilot for the Contoso outdoor/camping gear AI Chat application.</p>
<p>Let&#x27;s begin by opening the <code>copilot_langchain.ipynb</code> notebook in the visual studio code (VS code) editor.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/3-select-kernel-4a590a2678ea34d42043775763a364f1.png" width="800" height="539" class="img_ev3q"></p>
<p>In VS code, click on <strong>Select Kernel</strong>. Then under Python Environments, select the <strong>Python 3.10.13</strong> environment you just created</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/3-python-env-9c38c584f04ed4365a4a09c5d9a3c217.png" width="800" height="561" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connect-to-azure-resources">Connect to azure resources<a href="#connect-to-azure-resources" class="hash-link" aria-label="Direct link to Connect to azure resources" title="Direct link to Connect to azure resources">‚Äã</a></h2>
<p>In order to access the resources you created in your project in AI studio, we&#x27;ll use the python SDK to authenticate and connect to them.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/conn-to-azure-d3f47ba3b62c95931dd3c5319bc3c667.png" width="800" height="271" class="img_ev3q"></p>
<p>To find the most relevant results from the vector database, we&#x27;ll be using Langchain&#x27;s retriever to search content from Azure AI Search.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/langchain-retriever-db15974322e58790f909b7cd71030445.png" width="1020" height="73" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-prompt-template">Create Prompt Template<a href="#create-prompt-template" class="hash-link" aria-label="Direct link to Create Prompt Template" title="Direct link to Create Prompt Template">‚Äã</a></h2>
<p>Prompt engineering is an integral part of providing good user experience and relevant answers.  To achieve that you&#x27;ll need to define a prompt template that includes system prompt rules, restrictions, chat history, input questions and context of conversation.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/prompt-template-94991e9e825cc5911bf333ceafa621b8.png" width="799" height="398" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-langchain-to-connect-azure-openai-and-prompt-template">Add Langchain to connect Azure OpenAI and Prompt template<a href="#add-langchain-to-connect-azure-openai-and-prompt-template" class="hash-link" aria-label="Direct link to Add Langchain to connect Azure OpenAI and Prompt template" title="Direct link to Add Langchain to connect Azure OpenAI and Prompt template">‚Äã</a></h2>
<p>To process the search results and apply the system rules, you need it initialize the LLM.  In our case, we&#x27;ll using AzureChatOpenAI class to specify the GPT-35-Turbo model deployment and settings we need for the chat.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/init-azure-openai-0b30056ffa1d37a6fb768c1a6e871e21.png" width="1024" height="118" class="img_ev3q"></p>
<p>All the dialogue that the end-user has with the chat needs retained to maintain the context of the conversation.  That&#x27;s why we are using the ConversationMemoryBuffer class to store the chat history.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/store-convo-e7af9adef38f169dfad207e47071fa59.png" width="1023" height="54" class="img_ev3q"></p>
<p>To search the AI search database, we&#x27;ll use a subclass of langchain to connect the Azure OpenAI, datasource retriever, prompt template and memory together.  When an instance of the langchain is invoke with an user input prompt, the retriever is used to search your data in AI Search.  The Azure OpenAI uses the prompt rules to process the response back to the user.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/config-langchain-b91e705d342577484133aaee2854f6f1.png" width="1024" height="141" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-copilot-with-jupiter-notebook">Run the copilot with Jupiter notebook<a href="#run-the-copilot-with-jupiter-notebook" class="hash-link" aria-label="Direct link to Run the copilot with Jupiter notebook" title="Direct link to Run the copilot with Jupiter notebook">‚Äã</a></h2>
<p>To run a single question &amp; answer through the sample copilot:</p>
<p>Click on <strong>Run All</strong> to run the notebook.</p>
<p><img loading="lazy" src="/Cloud-Native/assets/images/4-run-all-6e800f7c782b2de0e96bbff73f3ef27d.png" width="800" height="557" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="validate-your-copilot-by-asking-a-question-about-your-custom-data">Validate your copilot by asking a question about your custom data.<a href="#validate-your-copilot-by-asking-a-question-about-your-custom-data" class="hash-link" aria-label="Direct link to Validate your copilot by asking a question about your custom data." title="Direct link to Validate your copilot by asking a question about your custom data.">‚Äã</a></h2>
<p>Enter a question about the outdoor/camping gear and clothing products. For example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Which of your sleeping bags are polyester?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" src="/Cloud-Native/assets/images/5-question-7db74565dc1c2dbd15113ac7e853f154.png" width="800" height="92" class="img_ev3q"></p>
<p><code>The CozyNights Sleeping Bag (item_number: 7) and the MountainDream Sleeping Bag (item_number: 14) are both made of polyester.</code></p>
<p>Try asking another question. For example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">which tent is the most waterproof?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>In this exercise you learned how to use Azure AI Search to create and load your data into a vector store.  Next, you learned how to use prompt engineering by constructing <em>System Prompt</em> with instructions on how to engage with the user, the scope of the subject area to enforce grounding which prevents the LLM from providing responses that are not relevent to your data.  You should now be able to build AI applications using Lanchain to connect Azure OpenAI, your prompts, chat history, context and retriever of your data source.  You&#x27;ve now gained the knowledge on how to use the Retrieval Augmented Generation (RAG) pattern in AI which uses LLMs to generate answers with your own data.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps">Build-Intelligent-Apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/60-days-of-ia">60-days-of-IA</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/hack-together">hack-together</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/community-buzz">community-buzz</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-kubernetes-service">azure-kubernetes-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-openai">azure-openai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-container-apps">azure-container-apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-cosmos-db">azure-cosmos-db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-copilot">github-copilot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-codespaces">github-codespaces</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-actions">github-actions</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cloud-Native/60DaysOfIA/page/3"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/60DaysOfIA/page/5"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://learn.microsoft.com/ai?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">AI</a><span class="footer__link-separator">¬∑</span><a href="https://azure.microsoft.com/solutions/cloud-native-apps/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud-Native</a><span class="footer__link-separator">¬∑</span><a href="https://azure.microsoft.com/solutions/serverless/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Serverless</a><span class="footer__link-separator">¬∑</span><a href="https://aka.ms/CNNY/collection?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Collection</a><span class="footer__link-separator">¬∑</span><a href="https://developer.microsoft.com/java/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Java</a><span class="footer__link-separator">¬∑</span><a href="https://docs.microsoft.com/javascript/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">JavaScript</a><span class="footer__link-separator">¬∑</span><a href="https://dotnet.microsoft.com/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">.NET</a><span class="footer__link-separator">¬∑</span><a href="https://docs.microsoft.com/azure/developer/python/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python</a></div></div></div></footer><footer><div></div></footer></div>
</body>
</html>