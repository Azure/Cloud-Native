<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-blog-60daysofIA" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Learn in #60DaysOfIA | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" name="description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><meta data-rh="true" property="og:url" content="https://azure.github.io/cloud-native/60daysofia/real-time-voice-sentiment-analysis-system-1"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" property="og:description" content="Join us on a learning journey to build intelligent apps on Azure. Read all about the upcoming #BuildIntelligentApps initiative on this post!"><meta data-rh="true" property="og:image" content="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/60daysofIA/real-time-voice-sentiment-analysis-system-1"><meta data-rh="true" name="twitter:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" name="twitter:description" content="Azure and platform engineering pave the way for the efficient development, deployment, and maintenance of Intelligent Apps, triumphing over traditional approaches."><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@devanshidiaries"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/page/26" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/page/26" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/60daysofIA/real-time-voice-sentiment-analysis-system-1"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30-days-of-ia-2024/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30-days-of-ia-2024/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.fbc5305a.css">
<script src="/Cloud-Native/assets/js/runtime~main.f667aba8.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.36ad55fe.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/Cloud-Native/"></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarBackground_Iz1u"><div class="container"><div class="row"><div class="col col--8 col--offset-2 announcementBarContainer_QNjo"><div class="col-demo"><p class="announcementBarContent_tvcd">Learn to use <a class="announcementLink_qKCm" target="_blank" href="https://developer.microsoft.com/reactor/events/23599/?ocid=biafy25h1_cn_webpage_azuremktg" data-bi-area="AnnouncementBar" data-bi-name="Announcement">Azure Functions OpenAI to ingest your own content</a> | Give us a ðŸŒŸ <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></p></div></div><div class="col col--2 announcementBarIconContainer_GQot"><div class="col-demo"><a href="https://github.com/azure/cloud-native" target="_blank" class="icon_QeTG" aria-label="Visit us on GitHub"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" class="icon_QeTG" aria-label="Subscribe to RSS"><svg width="24" height="24" viewBox="0 0 333333 333333" xmlns="http://www.w3.org/2000/svg" fill="#f49c4f"><path d="M166667 0c92048 0 166667 74619 166667 166667s-74619 166667-166667 166667S0 258715 0 166667 74619 0 166667 0zm-57698 203357c-11551 0-20938 9418-20938 20897 0 11537 9386 20857 20938 20857 11587 0 20967-9320 20967-20857 0-11479-9378-20897-20967-20897zm-20918-61899v30148c19632 0 38081 7677 51977 21585 13883 13868 21548 32406 21548 52114h30276c0-57254-46585-103838-103801-103838v-9zm38-53431v30154c70007 0 126979 57031 126979 127116l30235 3c0-86697-70539-157270-157212-157270l-2-3z"></path></svg></a><svg viewBox="0 0 24 24" width="24" height="24" class="icon_Kj6K"><path fill="white" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#60DaysOfIA</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/kick-off">Kick-off #60Days of IA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/harnessing-the-power-of-intelligent-apps">1. Harnessing the power of Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/power-up-crafting-an-intelligent-energy-forecasting-application-using-azure-kubernetes-service">2. Power Up: Crafting an Intelligent Energy Forecasting Application Using Azure Kubernetes Service</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-1">2.1 Forecasting Energy Usage with Intelligent Apps Part 1: Laying the Groundwork with AKS, KAITO, and LLaMA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-2">2.2 Forecasting Energy Usage with Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-3">2.3 Forecasting Energy Usage with Intelligent Apps Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/cosmos-db-and-intelligent-apps-a-match-made-for-innovation">3. Cosmos DB and Intelligent Apps: A Match Made for Innovation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-1">3.1 Dynamic Repricing of Products Using Intelligent Apps Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-2">3.2 Dynamic Repricing of Products Using Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-3">3.3 Dynamic Repricing of Products Using Intelligent Apps Part 3: Graphing and Displaying Price Forecasts in a Web Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/fuel-your-intelligent-apps-with-azure-ai">4. Fuel Your Intelligent Apps with Azure AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-contoso-chat-end-to-end">4.1 Build Contoso Chat End-to-End</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk">4.2 Build A Copilot Code-First with the Azure AI Python SDK</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-prompt-flow">4.3 Build a Copilot on Azure Code-First with Prompt Flow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-langchain">4.4 Build a Copilot on Azure Code-First with Langchain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/deploying-your-copilot-on-azure">4.5 Deploying Your Copilot On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/the-role-of-platform-engineering-in-developing-intelligent-apps">5 The Role of Platform Engineering in Developing Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-1">6.1 Creating a Virtual Stylist Chatbot â€” Part 1: Analyzing Images with AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-2">6.2 Creating a Virtual Stylist Chatbot â€” Part 2: Adding a Chatbot Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-3">6.3 Creating a Virtual Stylist Chatbot â€” Part 3: Deploying the App</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-1">6.4 Building a Multichannel Notification System (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-2">6.5 Building a Multichannel Notification System (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-1">7.1 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-2">7.2 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-3">7.3 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-1">7.4 Real-time Voice Sentiment Analysis System 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-2">7.5 Real-time Voice Sentiment Analysis System 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/managing-the-cost-of-intelligent-apps">8 Managing the Cost of Intelligent Apps</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="In today&#x27;s fast-paced digital world, understanding customer sentiment in real-time during voice calls can provide businesses with a competitive edge. This guide will show developers how to build a robust real-time voice sentiment analysis application using several key Azure services."><link itemprop="image" href="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta itemprop="keywords" content="Cloud,Data,AI,AI/ML,intelligent apps,cloud-native,60-days,enterprise apps,digital experiences,app modernization,serverless,ai apps"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-1">7.4 Real-time Voice Sentiment Analysis System 1</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-17T09:00:00.000Z" itemprop="datePublished">April 17, 2024</time> Â· <!-- -->15 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://azure.github.io/Cloud-Native/img/logo-2024.png" alt="#60Days Of IA" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">#60Days Of IA</span></a></div><small class="avatar__subtitle" itemprop="description">BuildIA Content Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-voice-sentiment-analysis-system-using-azure-communication-services-azure-ai-and-azure-openai-part-1">Real-time Voice Sentiment Analysis System Using Azure Communication Services, Azure AI and Azure OpenAI (Part 1)<a href="#real-time-voice-sentiment-analysis-system-using-azure-communication-services-azure-ai-and-azure-openai-part-1" class="hash-link" aria-label="Direct link to Real-time Voice Sentiment Analysis System Using Azure Communication Services, Azure AI and Azure OpenAI (Part 1)" title="Direct link to Real-time Voice Sentiment Analysis System Using Azure Communication Services, Azure AI and Azure OpenAI (Part 1)">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">â€‹</a></h3>
<p>In today&#x27;s fast-paced digital world, understanding customer sentiment in real-time during voice calls can provide businesses with a competitive edge. This guide will show developers how to build a robust real-time voice sentiment analysis application using several key Azure services. Specifically, we&#x27;ll leverage:</p>
<ul>
<li><a href="https://learn.microsoft.com/azure/container-apps/overview?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Container Apps</a> to deploy the backend web API</li>
<li>ASP.NET Core web API backend for processing</li>
<li><a href="https://learn.microsoft.com/azure/communication-services/overview?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Communication Services</a> for handling voice calls</li>
<li><a href="https://learn.microsoft.com/azure/ai-services/language-service/overview?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI Language</a> and <a href="https://learn.microsoft.com/azure/ai-services/openai/overview?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure OpenAI</a> for analyzing sentiment</li>
<li>Node.js frontend for user interactions.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-diagram">Architecture diagram<a href="#architecture-diagram" class="hash-link" aria-label="Direct link to Architecture diagram" title="Direct link to Architecture diagram">â€‹</a></h4>
<p><img loading="lazy" alt="a diagram of the voice sentiment analysis application architecture" src="/Cloud-Native/assets/images/7-4-1-10c05055aa9dbbd1c536ca2de8a38d2f.png" width="649" height="402" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-of-the-sample-app">Frontend of the sample app<a href="#frontend-of-the-sample-app" class="hash-link" aria-label="Direct link to Frontend of the sample app" title="Direct link to Frontend of the sample app">â€‹</a></h4>
<p><img loading="lazy" alt="image of the Sentiment Score in a sample application" src="/Cloud-Native/assets/images/7-4-2-702d76ea4ee2e351d5ed81c0d67eeb4d.png" width="625" height="364" class="img_ev3q"></p>
<p>The sample app will manage Voice over IP (VoIP) and Public Switched Telephone Network (PSTN) calling capabilities, converting speech to text on the fly, and will evaluate the sentiment of the conversation in real-time. There are many scenarios where these capabilities could be used:</p>
<ol>
<li>
<p><strong>Customer Support Call Centers</strong>: Analyze customer sentiment in real-time during support calls, allowing agents to adjust their approach based on the emotional tone of the conversation. This can lead to improved customer satisfaction and faster resolution times.</p>
</li>
<li>
<p><strong>Market Research Interviews</strong>: Conduct telephonic interviews with participants and use sentiment analysis to gauge reactions to new product ideas or advertisements, providing valuable insights into market trends and consumer preferences.</p>
</li>
<li>
<p><strong>Telehealth Services</strong>: In virtual healthcare consultations, use the system to assess the sentiment of patients as they describe their symptoms or concerns. This can help healthcare providers better understand the patient&#x27;s emotional state and potentially improve diagnosis and patient care.</p>
</li>
<li>
<p><strong>Remote Education and E-Learning</strong>: For online classes or training sessions, analyze the sentiment of students&#x27; responses during voice interactions to assess engagement, comprehension, and the effectiveness of the teaching material.</p>
</li>
<li>
<p><strong>Financial Services</strong>: Use in banking and financial advice call centers to detect customer sentiment during calls, identifying potential issues or opportunities for additional services based on the emotional tone of the customer.</p>
</li>
<li>
<p><strong>Sales and Lead Generation</strong>: During sales calls, analyze potential customers&#x27; sentiment to tailor the pitch dynamically, improving conversion rates by aligning with the customers&#x27; emotional responses.</p>
</li>
</ol>
<p>By the end of this blog, you will understand how to:</p>
<ul>
<li>Set up and manage voice calling with Azure Communication Services.</li>
<li>Convert speech to text using Azure Communication Service Calling Captions.</li>
<li>Perform sentiment analysis on the text with both Azure AI Language and Azure Open AI Service.</li>
<li>Use ASP.NET Core and Node.js to tie these services together in a seamless application.</li>
</ul>
<p>Let&#x27;s get started.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tools-and-accounts-required">Tools and Accounts Required:<a href="#tools-and-accounts-required" class="hash-link" aria-label="Direct link to Tools and Accounts Required:" title="Direct link to Tools and Accounts Required:">â€‹</a></h4>
<ol>
<li>
<p><strong>Azure Account</strong>: An active Azure account is required to access Azure services like Azure Communication Services, Azure AI Language, and Azure OpenAI. If you don&#x27;t already have an account, you can sign up for a free trial <a href="https://azure.com/free?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Visual Studio Code</strong>: This powerful and lightweight code editor from Microsoft supports development in multiple languages including Node.js and C#. Download it from <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Azure CLI</strong>: The Azure Command Line Interface is a set of commands used to manage Azure resources directly from the terminal or command prompt. Download and installation instructions can be found <a href="https://docs.microsoft.com/cli/azure/install-azure-cli?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Postman</strong>: An API development tool that makes it easier to create, share, test, and document APIs. This is optional but recommended for testing your applicationâ€™s back-end services. Download Postman from <a href="https://www.postman.com/downloads/" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Node.js</strong>: Node.js is a JavaScript runtime that allows you to build scalable network applications. It&#x27;s essential for developing the front-end of our application. Download and install it from <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Docker</strong>: Docker is a platform for developing, shipping, and running applications. We&#x27;ll use it for containerizing and deploying our ASP.NET Core backend. Download and install it from <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="vs-code-extensions">VS Code Extensions:<a href="#vs-code-extensions" class="hash-link" aria-label="Direct link to VS Code Extensions:" title="Direct link to VS Code Extensions:">â€‹</a></h5>
<ol>
<li>
<p><strong>C# Dev Kit for Visual Studio Code</strong>: While VS Code does support C# development, this specific extension provides advanced features and functionalities tailored for C# development within Azure. It&#x27;s especially handy for Azure Functions development in C#. Install it from <a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csdevkit" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Azure Tools</strong>: This extension provides a set of tools for working with Azure services directly from VS Code. It&#x27;s a must-have for managing Azure resources and services. Install it from <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Docker Extension</strong>: This extension provides a set of tools for working with Docker containers directly from VS Code. It&#x27;s essential for containerizing and deploying our ASP.NET Core backend. Install it from <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Azure Container Apps Extension</strong>: This extension provides a set of tools for working with Azure Container Apps directly from VS Code. It&#x27;s essential for deploying our ASP.NET Core backend. Install it from <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurecontainerapps" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><strong>Azure Static Web Apps Extension</strong>: This extension provides a set of tools for working with Azure Static Web Apps directly from VS Code. It&#x27;s essential for deploying our Node.js frontend. Install it from <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Checkout the demo bytes forâ€¯<a href="https://developer.microsoft.com/en-us/reactor/series/S-1308/?wt.mc_id=blog_S-1308_webpage_reactor&amp;ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Intelligent Apps</a>â€¯with Azure Container Apps where the product team gives a walkthrough on using open-source vector databases and building a multi-LLM chat application.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-azure-resources">Creating Azure Resources<a href="#creating-azure-resources" class="hash-link" aria-label="Direct link to Creating Azure Resources" title="Direct link to Creating Azure Resources">â€‹</a></h3>
<p>With the prerequisites set, the next step is to create necessary Azure resources. These resources include Azure Communication Services for handling voice calls, Azure AI Language for sentiment analysis, and Azure OpenAI as an alternative for more complex sentiment analysis tasks. Hereâ€™s how to set each of these up.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-communication-services-resource">Azure Communication Services Resource<a href="#azure-communication-services-resource" class="hash-link" aria-label="Direct link to Azure Communication Services Resource" title="Direct link to Azure Communication Services Resource">â€‹</a></h4>
<p><strong>Azure Communication Services (ACS)</strong> will manage all aspects of voice calling within our application. To create a new ACS resource:</p>
<ol>
<li><strong>Open Azure Portal</strong>: Navigate to the <a href="https://portal.azure.com" target="_blank" rel="noopener noreferrer">Azure Portal</a> and sign in with your Azure account.</li>
<li><strong>Create Resource</strong>: Click on the &quot;+ Create a resource&quot; button found on the upper-left corner of the Azure Portal dashboard.</li>
<li><strong>Search for Communication Services</strong>: In the &quot;Search the Marketplace&quot; field, enter &quot;Communication Services&quot; and select it from the dropdown list.</li>
<li><strong>Create</strong>: Click the &quot;Create&quot; button.<!-- -->
<ol>
<li>
<p>On the &quot;Basics&quot; tab, fill in the required fields:</p>
<ol>
<li><strong>Subscription</strong>: Choose your Azure subscription.</li>
<li><strong>Resource group</strong>: Create a new resource group or select an existing one.</li>
<li><strong>Resource name</strong>: Enter a name for your Communication Services resource.</li>
<li><strong>Region</strong>: Select a region near you or your target audience.</li>
</ol>
</li>
<li>
<p>Click &quot;Review + create&quot; to review your settings and then click the &quot;Create&quot; button to provision the resource.</p>
</li>
</ol>
</li>
<li><strong>Configure</strong>:<!-- -->
<ol>
<li>Once the deployment is complete, navigate to your resource.</li>
<li>Under the &quot;Keys and Endpoint&quot; section, note down your connection string. You&#x27;ll need this to configure the backend of your application.</li>
</ol>
</li>
<li><strong>Get a UserToken</strong>  - For initial frontend testing, we need a user token. In your Azure Communication Services resource, navigate to the &quot;Identities &amp; User Access Tokens&quot; section and create a new user with &#x27;Voice and video calling (VOIP)&#x27; services. Note down the user token for use later in the tutorial.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="obtain-a-free-trial-phone-number">Obtain a Free Trial Phone Number<a href="#obtain-a-free-trial-phone-number" class="hash-link" aria-label="Direct link to Obtain a Free Trial Phone Number" title="Direct link to Obtain a Free Trial Phone Number">â€‹</a></h4>
<p>To enable PSTN calling capabilities (optional), you&#x27;ll need a phone number. Azure Communication Services offers a free trial phone number for testing purposes. Here&#x27;s how to obtain one:</p>
<ol>
<li>
<p><strong>Navigate to Your ACS Resource</strong>: Sign in to the <a href="https://portal.azure.com" target="_blank" rel="noopener noreferrer">Azure Portal</a> and go to your newly created Azure Communication Services resource.</p>
</li>
<li>
<p><strong>Phone Numbers Section</strong>: On the left-hand menu of your ACS resource overview page, find and select the <strong>Phone Numbers</strong> option. This section allows you to manage phone numbers associated with your ACS resource.</p>
</li>
<li>
<p><strong>Get Trial Number</strong>: Inside the Phone Numbers section, you&#x27;ll see an option to get a free trial phone number. Click on the <strong>Get</strong> button next to the Free Trial Number. Azure will prompt you with the terms and conditions for using a trial number. Please read through these carefully as they contain important information regarding the limitations and permitted use of the free trial number.</p>
</li>
<li>
<p><strong>Confirmation</strong>: After accepting the terms, Azure will automatically allocate a trial phone number to your ACS resource. This process may take a few moments. Once completed, the number will be displayed on the screen. Note this number as you will need it for configuring voice calling capabilities in your application.</p>
</li>
</ol>
<ul>
<li>
<p><strong>Note</strong>: The free trial phone number comes with certain limitations. For example, there may be restrictions on the number of calls that can be made or received, call duration, and available features compared to a purchased number. These restrictions are in place to manage the service&#x27;s use during the trial period.</p>
</li>
<li>
<p><strong>Note</strong>: If you don&#x27;t, or can&#x27;t, obtain a free trial phone number, you can still proceed with the rest of the tutorial. The application will work with VoIP calling capabilities, and you can always add a phone number later if needed. Either clone and run the <a href="https://learn.microsoft.com/azure/communication-services/quickstarts/voice-video-calling/getting-started-with-calling?tabs=uwp&amp;pivots=platform-web&amp;ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Communication Service Calling Quickstart</a> or the <a href="https://learn.microsoft.com/azure/communication-services/samples/calling-hero-sample?pivots=platform-web&amp;ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Calling Hero App</a> and use a user ID or group ID respective when making a call.</p>
</li>
</ul>
<p>Note down the phone number for use later in the tutorial.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-ai-resource">Azure AI Resource<a href="#azure-ai-resource" class="hash-link" aria-label="Direct link to Azure AI Resource" title="Direct link to Azure AI Resource">â€‹</a></h4>
<p>For basic sentiment analysis, we&#x27;ll use <strong>Azure AI Language</strong> services. Here&#x27;s how to set up this resource:</p>
<ol>
<li><strong>Create Resource</strong>: From the Azure Portal dashboard, click &quot;+ Create a resource&quot;.</li>
<li><strong>Search for AI Language</strong>: Type &quot;Language&quot; in the search bar and select &quot;Language&quot; from the results.</li>
<li><strong>Create</strong>: Press the &quot;Create&quot; button.<!-- -->
<ol>
<li>Complete the form:<!-- -->
<ol>
<li><strong>Subscription</strong> and <strong>Resource group</strong>: As before.</li>
<li><strong>Name</strong>: Give your AI Language service a unique name.</li>
<li><strong>Pricing tier</strong>: Select the pricing tier that fits your needs (you can start with the free tier for testing purposes).</li>
<li><strong>Region</strong>: Choose the same region as your Communication Services to minimize latency.</li>
</ol>
</li>
<li>Proceed to &quot;Review + create&quot; and then click &quot;Create&quot;.</li>
</ol>
</li>
<li><strong>Configure</strong>:<!-- -->
<ol>
<li>After your Language resource is deployed, go to it and note down the Key1 and Endpoint from the &quot;Keys and endpoint&quot; section.</li>
</ol>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-openai-resource">Azure OpenAI Resource<a href="#azure-openai-resource" class="hash-link" aria-label="Direct link to Azure OpenAI Resource" title="Direct link to Azure OpenAI Resource">â€‹</a></h4>
<p>To leverage more advanced AI capabilities, we also integrate <strong>Azure OpenAI Service</strong>. Setting up this resource involves:</p>
<ol>
<li><strong>Create Resource</strong>: Again, from the Azure Portal dashboard, click &quot;+ Create a resource&quot;.</li>
<li><strong>Search for OpenAI</strong>: Enter &quot;OpenAI&quot; in the search field and select &quot;OpenAI Service&quot; from the dropdown.</li>
<li><strong>Create</strong>: Hit the &quot;Create&quot; button.<!-- -->
<ol>
<li>Fill in the details like you did for the Language service, taking special note of the <strong>Subscription</strong>, <strong>Resource group</strong>, <strong>Name</strong>, <strong>Pricing tier</strong>, and <strong>Region</strong>.</li>
<li>Review your settings and click &quot;Create&quot;.</li>
</ol>
</li>
<li><strong>Configure</strong>: Before you can generate text or inference, you need to deploy a model. You can select from one of several available models in Azure OpenAI Studio. To deploy a model, follow these steps:<!-- -->
<ul>
<li>Sign in to <a href="https://oai.azure.com/" target="_blank" rel="noopener noreferrer">Azure OpenAI Studio</a></li>
<li>Choose the subscription and the Azure OpenAI resource to work with and select Use resource.</li>
<li>Under Management select Deployments.</li>
<li>Select Create new deployment and configure the following fields: Model, Deployment name</li>
</ul>
</li>
<li><strong>Keys</strong>: Once deployed, navigate to the OpenAI resource in Azure Portal. - In the &quot;Keys and endpoint&quot; section, copy Key1 and Endpoint. These will be crucial for integrating advanced sentiment analysis into your application.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developing-the-nodejs-frontend">Developing the Node.js Frontend<a href="#developing-the-nodejs-frontend" class="hash-link" aria-label="Direct link to Developing the Node.js Frontend" title="Direct link to Developing the Node.js Frontend">â€‹</a></h3>
<p>In this section, we&#x27;ll dive into creating the front-end of our real-time voice sentiment analysis application using Node.js. The front end will provide a simple yet functional user interface (UI) for making voice calls and displaying closed captions generated from the conversation. We&#x27;ll also ensure it can display the sentiment analysis results in real-time.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-your-nodejs-environment">Setting Up Your Node.js Environment<a href="#setting-up-your-nodejs-environment" class="hash-link" aria-label="Direct link to Setting Up Your Node.js Environment" title="Direct link to Setting Up Your Node.js Environment">â€‹</a></h4>
<p>First, ensure Node.js is installed on your development machine. If not, download and install it from the <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">official Node.js website</a>. With Node.js installed, you can now set up your project environment.</p>
<ol>
<li>
<p>Create a New Directory: Create a new folder for your project. This is where all your Node.js front-end files will reside.</p>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir voice-sentiment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd voice-sentiment </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Initialize Your Project</strong>: Run the following command to create a <code>package.json</code> file, which will keep track of your project dependencies.</p>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm init -y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Install Parcel</strong>: We&#x27;ll use Parcel, a web application bundler, for a seamless development experience. Install Parcel as a development dependency.</p>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install parcel --save-dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Install Azure Communication Calling SDK</strong>: This SDK is essential for integrating voice calling features in our front-end.</p>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install @azure/communication-calling --save</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-ui-for-calling">Creating the UI for Calling<a href="#creating-the-ui-for-calling" class="hash-link" aria-label="Direct link to Creating the UI for Calling" title="Direct link to Creating the UI for Calling">â€‹</a></h4>
<p>Now, let&#x27;s create the basic structure of our frontend application. This includes setting up HTML, CSS, and JavaScript files.</p>
<ol>
<li>
<p><strong>HTML</strong>: Create an index.html file in your project root. This file will serve as the entry point for your application.</p>
<p><code>html</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!DOCTYPE html&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;html lang=&quot;en&quot;&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;head&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;meta charset=&quot;UTF-8&quot;&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;title&gt;Real-time Voice Sentiment Analysis&lt;/title&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;link rel=&quot;stylesheet&quot; href=&quot;styles.css&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/head&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;body&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div id=&quot;app&quot;&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;input type=&quot;text&quot; id=&quot;callee-phone-input&quot; placeholder=&quot;Enter Phone Number&quot;&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;button id=&quot;call-phone-button&quot;&gt;Start Call&lt;/button&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;button id=&quot;hang-up-phone-button&quot; disabled&gt;Hang Up&lt;/button&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div id=&quot;captionsArea&quot;&gt;&lt;/div&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;script src=&quot;app.js&quot;&gt;&lt;/script&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/body&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/html&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>CSS</strong>: Create a <code>styles.css</code> file to style your application. Feel free to customize the styles as per your preference.</p>
<p><code>css</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">body { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-family: Arial, sans-serif; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    display: flex; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    justify-content: center; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    align-items: center; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height: 100vh; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    margin: 0; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    background-color: #f5f5f5; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#app { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    text-align: center; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">input[type=&quot;text&quot;], button { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    padding: 10px; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    margin: 10px; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    border: 1px solid #ccc; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    border-radius: 5px; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#captionsArea { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    margin-top: 20px; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>JavaScript</strong>: Create an <code>app.js</code> file. This is where we&#x27;ll write the logic for initializing voice calling and handling sentiment analysis.</p>
</li>
</ol>
<p>Let&#x27;s start by setting up a basic structure for making and ending calls using the Azure Communication Calling SDK you previously installed.</p>
<p><code>javascript</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { CallClient, CallAgent } from &#x27;@azure/communication-calling&#x27;; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let callAgent; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let acsPhoneNumber; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let tokenCredential; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let captions; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const calleeInput = document.getElementById(&#x27;callee-phone-input&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const callButton = document.getElementById(&#x27;call-phone-button&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const hangUpButton = document.getElementById(&#x27;hang-up-phone-button&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function initCallAgent() { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const callClient = new CallClient(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Hard code token for now, will be replaced with actual token later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tokenCredential = new AzureCommunicationTokenCredential(&quot;&lt;&lt;TOKEN_FROM_AZURE_PORTAL&gt;&gt;&quot;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    acsPhoneNumber = &quot;&lt;&lt;PHONE_NUMBER_FROM_AZURE_PORTAL&gt;&gt;&quot;; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    callAgent = await callClient.createCallAgent(tokenCredential);  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attachCallListeners(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function attachCallListeners() { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    callButton.addEventListener(&#x27;click&#x27;, startCall); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hangUpButton.addEventListener(&#x27;click&#x27;, endCall); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function startCall() { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const callee = calleeInput.value; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (callee) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const call = callAgent.startCall([{phoneNumber: callee}]); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // More call handling code here </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function endCall() { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (call) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await call.hangUp({forEveryone: true}); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // toggle button states </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hangUpPhoneButton.disabled = true; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        callPhoneButton.disabled = false; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">initCallAgent(); </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Note</strong>: Make sure to replace placeholders like <code>tokenCredential</code> with actual values obtained from your backend or Azure Communication Services resource.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-and-running-your-application">Testing and Running Your Application<a href="#testing-and-running-your-application" class="hash-link" aria-label="Direct link to Testing and Running Your Application" title="Direct link to Testing and Running Your Application">â€‹</a></h4>
<ol>
<li>
<p><strong>Run Your Application</strong>: Use Parcel to serve your application. Run the following command in your project root.</p>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx parcel index.html </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Visit the URL provided by Parcel to view your application.</li>
</ul>
</li>
<li>
<p><strong>Testing</strong>: Test the calling functionality by entering a valid phone number and clicking the &quot;Start Call&quot; button. Ensure you have backend support to handle getting a token for Azure Communication Services.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handle-userids-and-groupids">Handle UserIds and GroupIds<a href="#handle-userids-and-groupids" class="hash-link" aria-label="Direct link to Handle UserIds and GroupIds" title="Direct link to Handle UserIds and GroupIds">â€‹</a></h4>
<p>If you didn&#x27;t acquire a phone number above, we&#x27;ll add code here to handle user and group ids. This will allow you to make calls without a phone number. To startCall() add:</p>
<p><code>javascript</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// start a call to phone </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const callee = calleePhoneInput.value; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const guidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const phoneNumberPattern = /^\+\d+$/; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const userIdPattern = /^8:acs:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}_[0-9a-f-]+$/i; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (guidPattern.test(callee)) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    call = callAgent.join({ groupId: callee}); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else if (phoneNumberPattern.test(callee)) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    call = callAgent.startCall( </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [{phoneNumber: callee}], { alternateCallerId: {phoneNumber: acsPhoneNumber} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else if (userIdPattern.test(callee)) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    call = callAgent.startCall({ communicationUserId: callee }); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.error(&#x27;Invalid input. Must be a phone number, user ID, or GUID&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-captions">Adding Captions<a href="#adding-captions" class="hash-link" aria-label="Direct link to Adding Captions" title="Direct link to Adding Captions">â€‹</a></h4>
<p>Under <code>More calling code here</code> add the following code to check for, and enable, captions:</p>
<p><code>javascript</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">captions = call.feature(Features.Captions).captions; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transcript = []; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!captions.isCaptionsFeatureActive) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await captions.startCaptions({ spokenLanguage: &#x27;en-us&#x27; }); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    captions.on(&#x27;CaptionsReceived&#x27;, captionsReceivedHandler); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch (e) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.error(&#x27;startCaptions failed&#x27;, e); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add a <code>captionsReceivedHandler</code> function to parse the captions and add it to the caption area:</p>
<p><code>javascript</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function captionsReceivedHandler(captionsReceivedEvent) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mri = &#x27;&#x27;; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (captionData.speaker.identifier.kind === &#x27;communicationUser&#x27;) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mri = captionData.speaker.identifier.communicationUserId; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mri = mri.slice(-8); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else if (captionData.speaker.identifier.kind === &#x27;microsoftTeamsUser&#x27;) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mri = captionData.speaker.identifier.microsoftTeamsUserId; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mri = mri.slice(-8); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else if (captionData.speaker.identifier.kind === &#x27;phoneNumber&#x27;) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mri = captionData.speaker.identifier.phoneNumber; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let displayName = captionData.speaker.displayName || mri; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Get the captions area container </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let captionAreasContainer = document.getElementById(&#x27;captionsArea&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Generate a class name based on the MRI </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const newClassName = `prefix${mri.replace(/[:\-+]/g, &#x27;&#x27;)}`; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Generate the caption text </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const captionText = `${captionData.timestamp.toUTCString()} ${displayName}: ${captionData.captionText ?? captionData.spokenText}`; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Try to find an existing caption container </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let captionContainer = captionAreasContainer.querySelector(`.${newClassName}[isNotFinal=&#x27;true&#x27;]`); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // If no existing caption container was found, create a new one </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!captionContainer) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        captionContainer = document.createElement(&#x27;div&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        captionContainer.setAttribute(&#x27;isNotFinal&#x27;, &#x27;true&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        captionContainer.classList.add(newClassName, &#x27;caption-item&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        captionAreasContainer.appendChild(captionContainer); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Set the caption text </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    captionContainer.textContent = captionText; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // If the caption is final, update the &#x27;isNotFinal&#x27; attribute </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (captionData.resultType === &#x27;Final&#x27;) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        captionContainer.setAttribute(&#x27;isNotFinal&#x27;, &#x27;false&#x27;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Test the calling functionality by entering a valid phone number (or user ID, or group ID) and clicking the &quot;Start Call&quot; button.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">â€‹</a></h3>
<p>Continue to theâ€¯<a href="https://azure.github.io/cloud-native/60daysofia/real-time-voice-sentiment-analysis-system-2" target="_blank" rel="noopener noreferrer">next part</a>â€¯of this topic to further explore building, deploying and testing your intelligent app for a real=time voice analysis system.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps">Build-Intelligent-Apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/60-days-of-ia">60-days-of-IA</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/hack-together">hack-together</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/community-buzz">community-buzz</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-kubernetes-service">azure-kubernetes-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-openai">azure-openai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-container-apps">azure-container-apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-cosmos-db">azure-cosmos-db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-copilot">github-copilot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-codespaces">github-codespaces</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-actions">github-actions</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cloud-Native/60DaysOfIA/page/25"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/60DaysOfIA/page/27"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer><div></div></footer></div>
</body>
</html>