<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-blog-60daysofIA" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">28 posts tagged with &quot;Build-Intelligent-Apps&quot; | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" property="og:url" content="https://azure.github.io/cloud-native/60daysofia/building-a-multichannel-notification-system-1"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" property="og:description" content="This blog post outlines a step-by-step guide on building such a multichannel notification system with Azure Functions and Azure Communication Services."><meta data-rh="true" property="og:image" content="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/60daysofIA/building-a-multichannel-notification-system-1"><meta data-rh="true" name="twitter:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" name="twitter:description" content="This blog post outlines a step-by-step guide on building such a multichannel notification system with Azure Functions and Azure Communication Services."><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@devanshidiaries"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps/page/21" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps/page/21" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/60daysofIA/building-a-multichannel-notification-system-1"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30-days-of-ia-2024/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30-days-of-ia-2024/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.cf5fa7e1.css">
<script src="/Cloud-Native/assets/js/runtime~main.527183df.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.4bf38dd3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/Cloud-Native/"></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarBackground_Iz1u"><div class="container"><div class="row"><div class="col col--8 col--offset-2 announcementBarContainer_QNjo"><div class="col-demo"><p class="announcementBarContent_tvcd">Learn to use <a class="announcementLink_qKCm" target="_blank" href="https://developer.microsoft.com/reactor/events/23599/?ocid=biafy25h1_cn_webpage_azuremktg" data-bi-area="AnnouncementBar" data-bi-name="Announcement">Azure Functions OpenAI to ingest your own content</a> | Give us a ðŸŒŸ <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></p></div></div><div class="col col--2 announcementBarIconContainer_GQot"><div class="col-demo"><a href="https://github.com/azure/cloud-native" target="_blank" class="icon_QeTG" aria-label="Visit us on GitHub"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" class="icon_QeTG" aria-label="Subscribe to RSS"><svg width="24" height="24" viewBox="0 0 333333 333333" xmlns="http://www.w3.org/2000/svg" fill="#f49c4f"><path d="M166667 0c92048 0 166667 74619 166667 166667s-74619 166667-166667 166667S0 258715 0 166667 74619 0 166667 0zm-57698 203357c-11551 0-20938 9418-20938 20897 0 11537 9386 20857 20938 20857 11587 0 20967-9320 20967-20857 0-11479-9378-20897-20967-20897zm-20918-61899v30148c19632 0 38081 7677 51977 21585 13883 13868 21548 32406 21548 52114h30276c0-57254-46585-103838-103801-103838v-9zm38-53431v30154c70007 0 126979 57031 126979 127116l30235 3c0-86697-70539-157270-157212-157270l-2-3z"></path></svg></a><svg viewBox="0 0 24 24" width="24" height="24" class="icon_Kj6K"><path fill="white" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#60DaysOfIA</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/kick-off">Kick-off #60Days of IA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/harnessing-the-power-of-intelligent-apps">1. Harnessing the power of Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/power-up-crafting-an-intelligent-energy-forecasting-application-using-azure-kubernetes-service">2. Power Up: Crafting an Intelligent Energy Forecasting Application Using Azure Kubernetes Service</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-1">2.1 Forecasting Energy Usage with Intelligent Apps Part 1: Laying the Groundwork with AKS, KAITO, and LLaMA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-2">2.2 Forecasting Energy Usage with Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-3">2.3 Forecasting Energy Usage with Intelligent Apps Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/cosmos-db-and-intelligent-apps-a-match-made-for-innovation">3. Cosmos DB and Intelligent Apps: A Match Made for Innovation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-1">3.1 Dynamic Repricing of Products Using Intelligent Apps Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-2">3.2 Dynamic Repricing of Products Using Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-3">3.3 Dynamic Repricing of Products Using Intelligent Apps Part 3: Graphing and Displaying Price Forecasts in a Web Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/fuel-your-intelligent-apps-with-azure-ai">4. Fuel Your Intelligent Apps with Azure AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-contoso-chat-end-to-end">4.1 Build Contoso Chat End-to-End</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk">4.2 Build A Copilot Code-First with the Azure AI Python SDK</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-prompt-flow">4.3 Build a Copilot on Azure Code-First with Prompt Flow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-langchain">4.4 Build a Copilot on Azure Code-First with Langchain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/deploying-your-copilot-on-azure">4.5 Deploying Your Copilot On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/the-role-of-platform-engineering-in-developing-intelligent-apps">5 The Role of Platform Engineering in Developing Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-1">6.1 Creating a Virtual Stylist Chatbot â€” Part 1: Analyzing Images with AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-2">6.2 Creating a Virtual Stylist Chatbot â€” Part 2: Adding a Chatbot Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-3">6.3 Creating a Virtual Stylist Chatbot â€” Part 3: Deploying the App</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-1">6.4 Building a Multichannel Notification System (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-2">6.5 Building a Multichannel Notification System (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-1">7.1 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-2">7.2 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-3">7.3 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-1">7.4 Real-time Voice Sentiment Analysis System 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-2">7.5 Real-time Voice Sentiment Analysis System 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/managing-the-cost-of-intelligent-apps">8 Managing the Cost of Intelligent Apps</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>28 posts tagged with &quot;Build-Intelligent-Apps&quot;</h1><a href="/Cloud-Native/60DaysOfIA/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This blog post outlines a step-by-step guide on building such a multichannel notification system with Azure Functions and Azure Communication Services."><link itemprop="image" href="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta itemprop="keywords" content="Cloud,Data,AI,AI/ML,intelligent apps,cloud-native,60-days,enterprise apps,digital experiences,app modernization,serverless,ai apps"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-1">6.4 Building a Multichannel Notification System (1)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-01T09:00:00.000Z" itemprop="datePublished">April 1, 2024</time> Â· <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://azure.github.io/Cloud-Native/img/logo-2024.png" alt="#60Days Of IA" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">#60Days Of IA</span></a></div><small class="avatar__subtitle" itemprop="description">BuildIA Content Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-a-multichannel-notification-system-with-azure-functions-and-azure-communication-services1">Building a Multichannel Notification System with Azure Functions and Azure Communication Servicesâ€¯(1)<a href="#building-a-multichannel-notification-system-with-azure-functions-and-azure-communication-services1" class="hash-link" aria-label="Direct link to Building a Multichannel Notification System with Azure Functions and Azure Communication Servicesâ€¯(1)" title="Direct link to Building a Multichannel Notification System with Azure Functions and Azure Communication Servicesâ€¯(1)">â€‹</a></h2>
<p>In the interconnected digital era, it&#x27;s crucial for businesses and services to communicate effectively with their audience. A robust notification system that spans various communication channels can greatly enhance user engagement and satisfaction. This blog post outlines a step-by-step guide on building such a multichannel notification system with Azure Functions and Azure Communication Services.</p>
<p>Leveraging serverless architecture and the reach of Azure Communication Services, your application can dynamically generate and send messages via SMS, Email, and WhatsApp. By incorporating OpenAI GPTs, the system can create content that is not only relevant and timely but personalized, making communication more impactful.</p>
<p><img loading="lazy" alt="image of email composer assist from Chat GPT" src="/Cloud-Native/assets/images/6-4-1-3902e9d9d69f62ab113708b811f040ee.gif" width="560" height="350" class="img_ev3q"></p>
<p>Architecture Diagram</p>
<p><img loading="lazy" alt="Architecture Diagram" src="/Cloud-Native/assets/images/6-4-2-703c0063473fb0097ea053bd645531fe.png" width="1487" height="935" class="img_ev3q"></p>
<p>Here are some practical scenarios where a multichannel notification system is valuable:</p>
<ol>
<li><strong>Financial Alerts</strong>: Banks and financial services can send fraud alerts, transaction confirmations, and account balance updates.</li>
<li><strong>Healthcare Reminders</strong>: Clinics and pharmacies can notify patients about appointment schedules, vaccinations, or prescription refills.</li>
<li><strong>Security Verification</strong>: Services requiring secure authentication can utilize two-factor authentication prompts sent via SMS or WhatsApp.</li>
<li><strong>Marketing and Promotions</strong>: Retailers can craft and distribute targeted marketing messages and promotions, thereby driving customer engagement.</li>
<li><strong>Infrastructure Notifications</strong>: Utility companies can alert customers about service disruptions, maintenance schedules, or conservation tips.</li>
<li><strong>E-commerce Updates</strong>: Online retailers can inform customers about order confirmations, shipping details, and delivery tracking.</li>
</ol>
<p>The foundation of this solution is <a href="https://docs.microsoft.com/azure/azure-functions/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Functions</a>, a flexible, event-driven platform for running scalable applications with minimal overhead. We will utilize <a href="https://docs.microsoft.com/azure/communication-services/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Communication Services</a>, which provides reliable APIs for Email, SMS, and WhatsApp messaging. To generate content, we use <a href="https://openai.com/blog/introducing-gpts" target="_blank" rel="noopener noreferrer">OpenAI GPTs</a>, which enables the creation of sophisticated, context-aware text that can be used in notifications.</p>
<p>By following this tutorial, you will gain the knowledge and practical experience necessary to implement a scalable multichannel notification platform that can serve a wide array of communication needs. Let&#x27;s get started on your path to building a cutting-edge, serverless messaging system on Azure.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">â€‹</a></h3>
<p>Before we dive into building our multichannel notification system with Azure Functions and Azure Communication Services, you will need to ensure that the following tools and accounts set up:</p>
<ol>
<li><strong>Azure Account</strong>: You&#x27;ll need a Microsoft Azure account to create and manage resources on Azure. If you haven&#x27;t got one yet, you can <a href="https://azure.microsoft.com/free/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">create a free account here</a>.</li>
<li><strong>Visual Studio Code</strong>: We&#x27;ll be using Visual Studio Code (VS Code) as our Integrated Development Environment (IDE) for writing and debugging our code. Download and install it from <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">here</a>.</li>
<li><strong>Azure Functions Extension for Visual Studio Code</strong>: This extension provides you with a seamless experience for developing Azure Functions. It can be installed from the <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions" target="_blank" rel="noopener noreferrer">VS Code marketplace</a>.</li>
<li><strong>C# Dev Kit</strong>: Since we&#x27;re writing our Azure Functions in C#, this extension is necessary for getting C# support in VS Code. You can install it from the <a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csdevkit" target="_blank" rel="noopener noreferrer">VS Code marketplace</a>.</li>
<li><strong>Azure CLI</strong>: The Azure Command-Line Interface (CLI) will be used to create and manage Azure resources from the command line. For installation instructions, visit the Azure CLI installation <a href="https://docs.microsoft.com/cli/azure/install-azure-cli?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">documentation page</a>.</li>
<li><strong>Postman</strong>: Although not strictly necessary, Postman is a handy tool for testing our HTTP-triggered Azure Functions without having to write a front-end application. You can download Postman from <a href="https://www.getpostman.com/" target="_blank" rel="noopener noreferrer">getpostman.com</a>.</li>
</ol>
<p>With the prerequisites in place, you&#x27;re ready to set up your development environment, which we will cover in the following section.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Register for <strong><a href="https://aka.ms/serverless-learn-live/ep4?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Episode 4</a></strong>â€¯of the new hands-on live learning series with an SME <strong>onâ€¯Intelligent Apps with Serverless on Azure</strong>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-resources">Creating Resources<a href="#creating-resources" class="hash-link" aria-label="Direct link to Creating Resources" title="Direct link to Creating Resources">â€‹</a></h3>
<p>To get started with building a multichannel notification system, we&#x27;ll need to create several resources within Azure. This section will walk you through setting up your Azure environment using the Azure CLI. Ensure that you have the Azure CLI installed on your machine and that you&#x27;re logged into your Azure account.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-communication-services">Azure Communication Services<a href="#azure-communication-services" class="hash-link" aria-label="Direct link to Azure Communication Services" title="Direct link to Azure Communication Services">â€‹</a></h4>
<ol>
<li>Azure Communication Services (ACS) provides the backbone for our notification system, allowing us to send SMS, Email, and WhatsApp messages. The steps below create resources for all three communication channels. However, you can choose one or more depending upon your preference. <strong>Log in to Azure</strong>:</li>
</ol>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az login </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li><strong>Create a Resource Group (if necessary)</strong>: This groups all your resources in one collection.</li>
</ol>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az group create --name &lt;YourResourceGroupName&gt; --location &lt;PreferredLocation&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Replace <code>&lt;YourResourceGroupName&gt;</code> with a name for your new resource group and <code>&lt;PreferredLocation&gt;</code> with the Azure region you prefer (e.g., eastus).</p>
<ol start="3">
<li><strong>Create ACS Resource</strong>: This will be the main ACS resource where we manage communications capabilities.</li>
</ol>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az communication create --name &lt;YourACSResourceName&gt; --location Global --data-location UnitedStates --resource-group &lt;YourResourceGroupName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Replace <code>&lt;YourACSResourceName&gt;</code> with a unique name for your ACS resource and <code>&lt;YourResourceGroupName&gt;</code> with the name of your resource group.</p>
<p>After creating the resource, retrieve the connection string as you will need it to connect your Azure Function to ACS. Copy the one marked as primary.</p>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az communication list-key --name &lt;YourACSResourceName&gt; --resource-group &lt;YourResourceGroupName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-communication-services-for-email">Azure Communication Services for Email<a href="#azure-communication-services-for-email" class="hash-link" aria-label="Direct link to Azure Communication Services for Email" title="Direct link to Azure Communication Services for Email">â€‹</a></h4>
<p>To set up Azure Communication Services Email, you&#x27;ll need to follow a few steps in the Azure Portal:</p>
<ol>
<li><strong>Create the Email Communications Service resource using the portal</strong>: Provision a new Email Communication Services resource in <a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer">Azure portal</a> using the instructions <a href="https://learn.microsoft.com/azure/communication-services/quickstarts/email/create-email-communication-resource?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">here</a>. Make sure to select the same resource group as your ACS resource.</li>
</ol>
<p><img loading="lazy" alt="image of Email Communication Services in Azure" src="/Cloud-Native/assets/images/6-4-3-35cb19b75199c2f1d99ca8ccd54a4c45.png" width="560" height="208" class="img_ev3q"></p>
<p><img loading="lazy" alt="image of Email Communication Services resource fields in Azure" src="/Cloud-Native/assets/images/6-4-4-ac5d4a8f741448dbb43b046a9bd31da2.png" width="560" height="486" class="img_ev3q"></p>
<ol start="2">
<li><strong>Configure the Email Communications Service</strong>: You will need to configure domains and sender authentication for email. Provision an <a href="https://learn.microsoft.com/azure/communication-services/quickstarts/email/add-azure-managed-domains?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Managed Domain</a> or set up your <a href="https://learn.microsoft.com/azure/communication-services/quickstarts/email/add-custom-verified-domains?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Custom Verified Domain</a> depending on your use case.</li>
</ol>
<p><img loading="lazy" alt="image of Email Communication Services configurations in Azure" src="/Cloud-Native/assets/images/6-4-5-71e69ca8bfed32db167d0e647c42424a.png" width="700" height="315" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-communication-services-for-sms">Azure Communication Services for SMS<a href="#azure-communication-services-for-sms" class="hash-link" aria-label="Direct link to Azure Communication Services for SMS" title="Direct link to Azure Communication Services for SMS">â€‹</a></h4>
<p>To send SMS messages, you will need to acquire a phone number through ACS. The phone number has a cost associated with it. If you want to avoid that, continue with Email and WhatsApp only.</p>
<ol>
<li><strong>Get a Phone Number</strong>: Navigate to the <strong>Phone Numbers</strong> blade in your ACS resource on the <a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer">Azure portal</a> and follow the steps to <a href="https://learn.microsoft.com/azure/communication-services/quickstarts/telephony/get-phone-number?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">get a phone number</a> that&#x27;s capable of sending and receiving SMS.</li>
</ol>
<p><img loading="lazy" alt="image of Email Communication Services phone number features in Azure" src="/Cloud-Native/assets/images/6-4-6-4b7de05784a52edff92db5cb46bb4a4f.png" width="1680" height="1338" class="img_ev3q"></p>
<ol start="2">
<li><strong>Note the Phone Number</strong>: After acquiring a phone number, note it down as it will be used to send SMS messages from your Azure Function.</li>
</ol>
<p><img loading="lazy" alt="image of Email Communication Services resource once configured in Azure" src="/Cloud-Native/assets/images/6-4-7-4371c03c6de84b5145ce4592c3b8f71b.png" width="1680" height="663" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="whatsapp-for-business">WhatsApp for Business<a href="#whatsapp-for-business" class="hash-link" aria-label="Direct link to WhatsApp for Business" title="Direct link to WhatsApp for Business">â€‹</a></h4>
<p>Sending WhatsApp messages requires setting up a WhatsApp Business account.</p>
<ol>
<li><strong>Set up a WhatsApp Business Account</strong>: Follow the instructions for connecting a <a href="https://learn.microsoft.com/azure/communication-services/quickstarts/advanced-messaging/whatsapp/connect-whatsapp-business-account?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">WhatsApp business account</a> with Azure Communication Services.</li>
<li><strong>Note the WhatsApp Configuration</strong>: Once set up, make a note of the necessary configuration details such as the phone number and WhatsApp Business API credentials, as they will be needed in your Azure Function.</li>
</ol>
<p><img loading="lazy" alt="image of Email Communication Services configuration channels in Azure" src="/Cloud-Native/assets/images/6-4-8-4f1f46cb387148c3503ca8dfbdf92841.png" width="1487" height="346" class="img_ev3q"></p>
<p>By following these steps, you will have created the necessary resources to build a multichannel notification system that can reach users through SMS, Email, and WhatsApp. Next, we&#x27;ll proceed with setting up your Azure Function and integrating these services into it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-environment">Setting Up Environment<a href="#setting-up-environment" class="hash-link" aria-label="Direct link to Setting Up Environment" title="Direct link to Setting Up Environment">â€‹</a></h3>
<p>With the prerequisites out of the way, let&#x27;s prepare our environment to develop our multichannel notification system using Azure Functions and Azure Communication Services.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-function-app-project">Creating the Function App Project<a href="#creating-the-function-app-project" class="hash-link" aria-label="Direct link to Creating the Function App Project" title="Direct link to Creating the Function App Project">â€‹</a></h4>
<p>Open Visual Studio Code and follow these steps to create a new Azure Functions project:</p>
<ol>
<li>Click on the Azure icon in the Activity Bar on the side of Visual Studio Code to open the Azure Functions extension.</li>
<li>In the Azure Functions extension, click on the &#x27;Create New Project&#x27; icon, choose a directory for your project, and select &#x27;Create New Project Here&#x27;.</li>
</ol>
<p><img loading="lazy" alt="mage of a new Azure Functions project in Visual Studio Code" src="/Cloud-Native/assets/images/6-4-9-35a0ed42485365b08ef242bb42ca7a0e.png" width="560" height="419" class="img_ev3q"></p>
<ol start="3">
<li>Choose the language for your project. We will select C# for this tutorial.</li>
<li>Select the template for your first function. For this project, an HTTP-triggered function is a good starting point since we want to receive HTTP requests to send out notifications.</li>
<li>Provide a function name, such as <code>EmailTrigger</code>, and set the authorization level to anonymous or function, depending on your security preference.</li>
</ol>
<p>After you have completed these steps, your Azure Functions project will be set up with all the necessary files in the chosen directory.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-necessary-packages">Installing the Necessary Packages<a href="#installing-the-necessary-packages" class="hash-link" aria-label="Direct link to Installing the Necessary Packages" title="Direct link to Installing the Necessary Packages">â€‹</a></h4>
<p>Now itâ€™s time to add the packages necessary for integrating Azure Communication Services:</p>
<ol>
<li>Open the integrated terminal in Visual Studio Code by clicking on &#x27;Terminal&#x27; in the top menu and then selecting &#x27;New Terminal&#x27;.</li>
<li>Add the Azure Communication Services packages to your project:</li>
</ol>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dotnet add package Azure.Communication.Email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dotnet add package Azure.Communication.Sms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dotnet add package Azure.Communication.Messages --prerelease</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-environment-variables">Setting Up Environment Variables<a href="#setting-up-environment-variables" class="hash-link" aria-label="Direct link to Setting Up Environment Variables" title="Direct link to Setting Up Environment Variables">â€‹</a></h4>
<p>You should store configuration details like connection strings and phone numbers as environment variables instead of hardcoding them into your functions. To do so in Azure Functions, add them to the <code>local.settings.json</code> file, which is used for local development.</p>
<p>Edit the <code>local.settings.json</code> file to include your Azure Communication Services (ACS) connection string and phone numbers:</p>
<p><code>json</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;IsEncrypted&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Values&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;AzureWebJobsStorage&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;FUNCTIONS_WORKER_RUNTIME&quot;: &quot;dotnet&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;COMMUNICATION_SERVICES_CONNECTION_STRING&quot;: &quot;&lt;acs_connection_string&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SENDER_PHONE_NUMBER&quot;: &quot;&lt;acs_sms_phone_number&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;WHATSAPP_NUMBER&quot;: &quot;&lt;acs_whatsapp_number&gt;&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SENDER_EMAIL_ADDRESS&quot;: &quot;&lt;acs_email_address&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Be sure to replace <code>&lt;acs_connection_string&gt;</code>, <code>&lt;acs_sms_phone_number&gt;</code>, <code>&lt;acs_whatsapp_number&gt;</code>, and <code>&lt;acs_email_address&gt;</code> with your actual Azure storage account connection string, Azure Communication Services connection string, SMS phone number, WhatsApp number, and sending email address.</p>
<p>Remember not to commit the <code>local.settings.json</code> file to source control if it contains sensitive information. Configure similar settings in the Application Settings for your Azure Function when you deploy to Azure.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="coding-the-emailtrigger">Coding the EmailTrigger<a href="#coding-the-emailtrigger" class="hash-link" aria-label="Direct link to Coding the EmailTrigger" title="Direct link to Coding the EmailTrigger">â€‹</a></h3>
<p>Creating a functional <code>EmailTrigger</code> Azure Function involves starting from the default template provided by Azure Functions for C# and enhancing it with the necessary logic and services to handle email sending. In this section, we guide you through the steps to transform the default template into the finished <code>EmailTrigger</code> function.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-set-up-the-function-template">Step 1: Set Up the Function Template<a href="#step-1-set-up-the-function-template" class="hash-link" aria-label="Direct link to Step 1: Set Up the Function Template" title="Direct link to Step 1: Set Up the Function Template">â€‹</a></h4>
<p>Start by using the default HTTP triggered function template provided by Visual Studio Code for creating an Azure Functions project. It will have the necessary usings, function name attribute, and a simple HTTP trigger that returns a welcome message. Select your project in the Workspace pane and click on the &#x27;Create Function&#x27; button in the Azure Functions extension. Choose &#x27;HTTP trigger&#x27; as the template and provide a name for the function, such as <code>EmailTrigger</code>. Set the authorization level to anonymous or function, depending on your security preference.</p>
<p><img loading="lazy" alt="image of creating a new function in Visio Studio Code" src="/Cloud-Native/assets/images/6-4-10-ba200a9a6bf83ceab1f8fcf4b5cfb69b.png" width="840" height="498" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-add-azure-communication-services-email-reference">Step 2: Add Azure Communication Services Email Reference<a href="#step-2-add-azure-communication-services-email-reference" class="hash-link" aria-label="Direct link to Step 2: Add Azure Communication Services Email Reference" title="Direct link to Step 2: Add Azure Communication Services Email Reference">â€‹</a></h4>
<p>Add a reference to using Azure.Communication.Email then create a property in the EmailTrigger class to hold an instance of EmailClient and a property to hold the email sender address.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private readonly EmailClient _emailClient;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private string? sender = Environment.GetEnvironmentVariable(&quot;SENDER_EMAIL_ADDRESS&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-read-configuration-and-initialize-emailclient">Step 3: Read Configuration and Initialize EmailClient<a href="#step-3-read-configuration-and-initialize-emailclient" class="hash-link" aria-label="Direct link to Step 3: Read Configuration and Initialize EmailClient" title="Direct link to Step 3: Read Configuration and Initialize EmailClient">â€‹</a></h4>
<p>Within the <code>EmailTrigger</code> class constructor, read the Azure Communication Services connection string from the environment variables using <code>Environment.GetEnvironmentVariable()</code> method and initialize an instance of <code>EmailClient</code> with the connection string.</p>
<p>Make sure to handle the possibility that the environment variable may be null and throw an appropriate exception if it is not set.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">string? connectionString = Environment.GetEnvironmentVariable(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (connectionString is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throw new InvalidOperationException(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING environment variable is not set.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_emailClient = new EmailClient(connectionString);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-define-the-request-model">Step 4: Define the Request Model<a href="#step-4-define-the-request-model" class="hash-link" aria-label="Direct link to Step 4: Define the Request Model" title="Direct link to Step 4: Define the Request Model">â€‹</a></h4>
<p>Create a request model class <code>EmailRequest</code> inside the <code>EmailTrigger</code> class to represent the expected payload. This model includes the subject, HTML content, and recipient email address.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class EmailRequest </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string Subject { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string HtmlContent { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string Recipient { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-parse-the-request-body">Step 5: Parse the Request Body<a href="#step-5-parse-the-request-body" class="hash-link" aria-label="Direct link to Step 5: Parse the Request Body" title="Direct link to Step 5: Parse the Request Body">â€‹</a></h4>
<p>Modify the <code>Run</code> function to be async since we&#x27;ll be performing asynchronous operations.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public async Task&lt;IActionResult&gt; Run([HttpTrigger(AuthorizationLevel.Anonymous, &quot;post&quot;)] HttpRequest req)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Use <code>StreamReader</code> to read the request body and deserialize it into the <code>EmailRequest</code> object using <code>System.Text.Json.JsonSerializer</code>.</p>
<p>Handle the case where the deserialization fails by returning a <code>BadRequestResult</code>.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">string requestBody = await new StreamReader(req.Body).ReadToEndAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EmailRequest? data = JsonSerializer.Deserialize&lt;EmailRequest&gt;(requestBody, new JsonSerializerOptions() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PropertyNamingPolicy = JsonNamingPolicy.CamelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (data is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new BadRequestResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-6-define-the-sender-and-send-the-email">Step 6: Define the Sender and Send the Email<a href="#step-6-define-the-sender-and-send-the-email" class="hash-link" aria-label="Direct link to Step 6: Define the Sender and Send the Email" title="Direct link to Step 6: Define the Sender and Send the Email">â€‹</a></h4>
<p>Instantiate a sender email address string that will be passed to the <code>SendAsync</code> method of the EmailClient instance. Replace the static email &#x27;<a href="mailto:DoNotReply@effaa622-a003-4676-b27e-6b9e7a783581.azurecomm.net" target="_blank" rel="noopener noreferrer">DoNotReply@effaa622-a003-4676-b27e-6b9e7a783581.azurecomm.net</a>&#x27; with your configured sender address in the actual implementation.</p>
<p>Use a try-catch block to send the email using the <code>SendAsync</code> method and catch any <code>RequestFailedException</code> to log any errors.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">_logger.LogInformation(&quot;Sending email...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EmailSendOperation emailSendOperation = await _emailClient.SendAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Azure.WaitUntil.Completed,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data.Recipient,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data.Subject,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data.HtmlContent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_logger.LogInformation($&quot;Email Sent. Status = {emailSendOperation.Value.Status}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_logger.LogInformation($&quot;Email operation id = {emailSendOperation.Id}&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-7-return-a-success-response">Step 7: Return a Success Response<a href="#step-7-return-a-success-response" class="hash-link" aria-label="Direct link to Step 7: Return a Success Response" title="Direct link to Step 7: Return a Success Response">â€‹</a></h4>
<p>Once the email send operation is completed, return an <code>OkObjectResult</code> indicating the success of the operation.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return new OkObjectResult(&quot;Email sent successfully!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="final-code">Final Code<a href="#final-code" class="hash-link" aria-label="Direct link to Final Code" title="Direct link to Final Code">â€‹</a></h4>
<p>After completing all the above steps, your <code>EmailTriggerAzure Function</code> should look as follows:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.IO;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Text.Json;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading.Tasks;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Azure;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Azure.Communication.Email;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.Azure.Functions.Worker;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.Extensions.Logging;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace ACSGPTFunctions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class EmailTrigger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly ILogger&lt;EmailTrigger&gt; _logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly EmailClient _emailClient;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public EmailTrigger(ILogger&lt;EmailTrigger&gt; logger)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger = logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            string? connectionString = Environment.GetEnvironmentVariable(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (connectionString is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new InvalidOperationException(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING environment variable is not set.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _emailClient = new EmailClient(connectionString);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public class EmailRequest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string Subject { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string HtmlContent { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string Recipient { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Function(&quot;EmailTrigger&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;IActionResult&gt; Run([HttpTrigger(AuthorizationLevel.Anonymous, &quot;post&quot;)] HttpRequest req) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger.LogInformation(&quot;Processing request.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            string requestBody = await new StreamReader(req.Body).ReadToEndAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            EmailRequest? data = JsonSerializer.Deserialize&lt;EmailRequest&gt;(requestBody, new JsonSerializerOptions() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PropertyNamingPolicy = JsonNamingPolicy.CamelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (data is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return new BadRequestResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var sender = &quot;DoNotReply@effaa622-a003-4676-b27e-6b9e7a783581.azurecomm.net&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogInformation(&quot;Sending email...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                EmailSendOperation emailSendOperation = await _emailClient.SendAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Azure.WaitUntil.Completed,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    sender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    data.Recipient,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    data.Subject,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    data.HtmlContent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                );â€¯ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogInformation($&quot;Email Sent. Status = {emailSendOperation.Value.Status}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogInformation($&quot;Email operation id = {emailSendOperation.Id}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            catch (RequestFailedException ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogInformation($&quot;Email send operation failed with error code: {ex.ErrorCode}, message: {ex.Message}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return new ObjectResult(new { error = ex.Message }) { StatusCode = 500 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new OkObjectResult(&quot;Email sent successfully!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This completed <code>EmailTriggerAzure</code> Function is now ready to be part of a multichannel notification system, handling the email communication channel.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">â€‹</a></h3>
<p>Continue to the <a href="https://azure.github.io/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-2" target="_blank" rel="noopener noreferrer">next part</a> of this topic to further explore building, deploying and testing your intelligent app for a multichannel notification system.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps">Build-Intelligent-Apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/60-days-of-ia">60-days-of-IA</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/hack-together">hack-together</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/community-buzz">community-buzz</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-kubernetes-service">azure-kubernetes-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-openai">azure-openai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-container-apps">azure-container-apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-cosmos-db">azure-cosmos-db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-copilot">github-copilot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-codespaces">github-codespaces</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-actions">github-actions</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps/page/20"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps/page/22"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer><div></div></footer></div>
</body>
</html>