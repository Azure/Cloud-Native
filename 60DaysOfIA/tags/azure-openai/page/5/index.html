<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-blog-60daysofIA" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">28 posts tagged with &quot;azure-openai&quot; | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" property="og:url" content="https://azure.github.io/cloud-native/60daysofia/forecasting-energy-usage-with-intelligent-apps-2"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" property="og:description" content="In this series, you&#x27;ll create an Intelligent App powered by Azure Kubernetes Service (AKS) to forecast energy usage and cost."><meta data-rh="true" property="og:image" content="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/60daysofIA/forecasting-energy-usage-with-intelligent-apps-2"><meta data-rh="true" name="twitter:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" name="twitter:description" content="In this series, you&#x27;ll create an Intelligent App powered by Azure Kubernetes Service (AKS) to forecast energy usage and cost."><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@devanshidiaries"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/tags/azure-openai/page/5" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/tags/azure-openai/page/5" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/60daysofIA/forecasting-energy-usage-with-intelligent-apps-2"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30-days-of-ia-2024/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30-days-of-ia-2024/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.912b9083.css">
<script src="/Cloud-Native/assets/js/runtime~main.9a0d86f2.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.9f1339b2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/Cloud-Native/"></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarBackground_Iz1u"><div class="container"><div class="row"><div class="col col--8 col--offset-2 announcementBarContainer_QNjo"><div class="col-demo"><p class="announcementBarContent_tvcd">Learn to use <a class="announcementLink_qKCm" target="_blank" href="https://developer.microsoft.com/reactor/events/23599/?ocid=biafy25h1_cn_webpage_azuremktg" data-bi-area="AnnouncementBar" data-bi-name="Announcement">Azure Functions OpenAI to ingest your own content</a> | Give us a 🌟 <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></p></div></div><div class="col col--2 announcementBarIconContainer_GQot"><div class="col-demo"><a href="https://github.com/azure/cloud-native" target="_blank" class="icon_QeTG" aria-label="Visit us on GitHub"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" class="icon_QeTG" aria-label="Subscribe to RSS"><svg width="24" height="24" viewBox="0 0 333333 333333" xmlns="http://www.w3.org/2000/svg" fill="#f49c4f"><path d="M166667 0c92048 0 166667 74619 166667 166667s-74619 166667-166667 166667S0 258715 0 166667 74619 0 166667 0zm-57698 203357c-11551 0-20938 9418-20938 20897 0 11537 9386 20857 20938 20857 11587 0 20967-9320 20967-20857 0-11479-9378-20897-20967-20897zm-20918-61899v30148c19632 0 38081 7677 51977 21585 13883 13868 21548 32406 21548 52114h30276c0-57254-46585-103838-103801-103838v-9zm38-53431v30154c70007 0 126979 57031 126979 127116l30235 3c0-86697-70539-157270-157212-157270l-2-3z"></path></svg></a><svg viewBox="0 0 24 24" width="24" height="24" class="icon_Kj6K"><path fill="white" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#60DaysOfIA</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/kick-off">Kick-off #60Days of IA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/harnessing-the-power-of-intelligent-apps">1. Harnessing the power of Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/power-up-crafting-an-intelligent-energy-forecasting-application-using-azure-kubernetes-service">2. Power Up: Crafting an Intelligent Energy Forecasting Application Using Azure Kubernetes Service</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-1">2.1 Forecasting Energy Usage with Intelligent Apps Part 1: Laying the Groundwork with AKS, KAITO, and LLaMA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-2">2.2 Forecasting Energy Usage with Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-3">2.3 Forecasting Energy Usage with Intelligent Apps Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/cosmos-db-and-intelligent-apps-a-match-made-for-innovation">3. Cosmos DB and Intelligent Apps: A Match Made for Innovation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-1">3.1 Dynamic Repricing of Products Using Intelligent Apps Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-2">3.2 Dynamic Repricing of Products Using Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-3">3.3 Dynamic Repricing of Products Using Intelligent Apps Part 3: Graphing and Displaying Price Forecasts in a Web Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/fuel-your-intelligent-apps-with-azure-ai">4. Fuel Your Intelligent Apps with Azure AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-contoso-chat-end-to-end">4.1 Build Contoso Chat End-to-End</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk">4.2 Build A Copilot Code-First with the Azure AI Python SDK</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-prompt-flow">4.3 Build a Copilot on Azure Code-First with Prompt Flow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-langchain">4.4 Build a Copilot on Azure Code-First with Langchain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/deploying-your-copilot-on-azure">4.5 Deploying Your Copilot On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/the-role-of-platform-engineering-in-developing-intelligent-apps">5 The Role of Platform Engineering in Developing Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-1">6.1 Creating a Virtual Stylist Chatbot — Part 1: Analyzing Images with AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-2">6.2 Creating a Virtual Stylist Chatbot — Part 2: Adding a Chatbot Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-3">6.3 Creating a Virtual Stylist Chatbot — Part 3: Deploying the App</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-1">6.4 Building a Multichannel Notification System (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-2">6.5 Building a Multichannel Notification System (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-1">7.1 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-2">7.2 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-3">7.3 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-1">7.4 Real-time Voice Sentiment Analysis System 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-2">7.5 Real-time Voice Sentiment Analysis System 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/managing-the-cost-of-intelligent-apps">8 Managing the Cost of Intelligent Apps</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>28 posts tagged with &quot;azure-openai&quot;</h1><a href="/Cloud-Native/60DaysOfIA/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="In this series, you’ll create an Intelligent App powered by Azure Kubernetes Service (AKS) to forecast energy usage and cost."><link itemprop="image" href="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta itemprop="keywords" content="Cloud-Scale,Data,AI,AI/ML,intelligent apps,cloud-native,60-days,enterprise apps,digital experiences,app modernization"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-2">2.2 Forecasting Energy Usage with Intelligent Apps Part 2</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-03-05T09:05:00.000Z" itemprop="datePublished">March 5, 2024</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://azure.github.io/Cloud-Native/img/logo-2024.png" alt="#60Days Of IA" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">#60Days Of IA</span></a></div><small class="avatar__subtitle" itemprop="description">BuildIA Content Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p><img loading="lazy" alt="Graphic of a bar chart with a magnifying glass in front of it. To the left of the magnifying glass is a lightning bolt. At the bottom of the graphic is text that reads, &amp;quot;Forecasting Energy Usage with Intelligent Apps: Making Predictions.&amp;quot;" src="/Cloud-Native/assets/images/2-2-1-5d5b7a390c60123a537e7ab426daafcc.png" width="624" height="380" class="img_ev3q"></p>
<p><em>This three-part series demonstrates how to create an Intelligent App that forecasts future energy consumption and pricing based on historical data. In this second article, you’ll build out an app that analyzes historical data on energy consumption to build a forecasting model that forecasts future energy usage/pricing based on parameters input by the user.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="forecasting-energy-usage-with-intelligent-apps-part-2-making-predictions">Forecasting Energy Usage with Intelligent Apps Part 2: Making Predictions<a href="#forecasting-energy-usage-with-intelligent-apps-part-2-making-predictions" class="hash-link" aria-label="Direct link to Forecasting Energy Usage with Intelligent Apps Part 2: Making Predictions" title="Direct link to Forecasting Energy Usage with Intelligent Apps Part 2: Making Predictions">​</a></h2>
<p>In <a href="https://azure.github.io/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-1" target="_blank" rel="noopener noreferrer">Part 1 of this series</a>, you set up an <a href="https://azure.microsoft.com/products/kubernetes-service?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Kubernetes Service</a> (AKS) cluster, installed <a href="https://azure.microsoft.com/updates/preview-ai-toolchain-operator-addon-for-aks/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Kubernetes AI Toolchain Operator</a> (KAITO), and configured KAITO with Llama 2. In this article, you’ll use the groundwork from Part 1 to build the Intelligent App.</p>
<p>Using historical data analysis and an open-source dataset, you’ll construct a model capable of predicting future energy usage and pricing with the flexibility of user-defined parameters.</p>
<p>Let’s get started!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3>
<p>To follow this tutorial, ensure you:</p>
<ul>
<li>Completed Part 1 of this series</li>
<li>Have a Jupyter notebook or a preferred Python integrated development environment (IDE), like <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">Visual Studio Code</a>, downloaded</li>
<li><a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">kubectl</a>, the Kubernetes command-line tool, installed</li>
<li>The <a href="https://github.com/contentlab-io/Microsoft-Forecasting-Energy-Usage-with-Intelligent-Apps/tree/main/Part%202" target="_blank" rel="noopener noreferrer">Forecast API source code</a> downloaded</li>
</ul>
<p>For a sneak peek of the final product, check out the <a href="https://github.com/contentlab-io/Microsoft-Forecasting-Energy-Usage-with-Intelligent-Apps/tree/main/Part%202" target="_blank" rel="noopener noreferrer">complete project code</a>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Checkout the <a href="https://aka.ms/learn-live-building-intelligent-apps-aks-ep3?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Intelligent Apps on AKS: Episode 3</a>, a technical deep dive hands-on training with an expert on how OpenCost, Prometheus, and Grafana with AKS can improve intelligent apps.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="predicting-energy-consumption-and-pricing-with-an-intelligent-app">Predicting Energy Consumption and Pricing with an Intelligent App<a href="#predicting-energy-consumption-and-pricing-with-an-intelligent-app" class="hash-link" aria-label="Direct link to Predicting Energy Consumption and Pricing with an Intelligent App" title="Direct link to Predicting Energy Consumption and Pricing with an Intelligent App">​</a></h3>
<p>The Intelligent App will analyze historical data on energy consumption to build a regression model. For this tutorial, you’ll use an open-source <a href="https://www.kaggle.com/datasets/nicholasjhana/energy-consumption-generation-prices-and-weather" target="_blank" rel="noopener noreferrer">Kaggle dataset</a> named “Hourly energy demand generation and weather.”</p>
<p>At a high level, you’ll take the following steps to build the Intelligent App:</p>
<ul>
<li><strong>Dataset analysis and feature engineering</strong>—You’ll start by examining the dataset. For this tutorial, you want to understand the relationships between energy consumption, pricing, and influencing factors like time. You’ll engineer new features from the raw data. This includes working hours, the day of the week, and the month.</li>
<li><strong>Model training</strong>—You’ll use XGBoost as a suitable regression model, as it accounts for both time elements and external factors. You’ll train it using the processed Kaggle dataset. The goal is to teach our model to identify patterns and make reliable predictions of electricity prices.</li>
<li><strong>User input</strong>—The app will let users provide parameters, such as a date, time, amount of electricity generated from burning, and more. The model will use these inputs to generate predictions.</li>
<li><strong>Report generation</strong>—Llama2 will come into play here. It will help you create a clear and informative report summarizing the user’s input, the model’s predictions, and any insights derived from the analysis.</li>
</ul>
<p><strong>Note:</strong> To keep this article focused, we’ll assume you have a pre-cleaned dataset with engineered features. If you’d like to see the details of this process, <a href="https://github.com/contentlab-io/Microsoft-Forecasting-Energy-Usage-with-Intelligent-Apps/blob/main/Part%202/data/predicting-future-energy-pricing.ipynb" target="_blank" rel="noopener noreferrer">refer to this notebook</a>.</p>
<p>With the steps above completed, you need to split the data into training and testing sets using the code below. Doing so allows you to predict “price actual” — the target feature for this tutorial.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Define the target feature </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">target = &#x27;price actual&#x27; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Split data into feature matrix (X) and target vector (y) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X, y = df.drop(columns=target), df[target] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Split the data into training and testing sets </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42) </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, use the code below to define a function to train your model.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def train_xgboost_regressor(X_train, y_train, X_test, y_test): </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Train an XGBoost regressor using cross-validation, tune hyperparameters, and evaluate the model. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Parameters: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    X_train (DataFrame): The DataFrame containing the training features. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y_train (Series): The Series containing the training target variable. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    X_test (DataFrame): The DataFrame containing the testing features. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y_test (Series): The Series containing the testing target variable. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Returns: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float: Mean squared error (MSE) of the model. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float: R-squared (R2) score of the model. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Define the XGBoost regressor </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xgb_regressor = xgb.XGBRegressor() </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Define parameter grid for hyperparameter tuning </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    param_grid = { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;learning_rate&#x27;: [0.05, 0.1], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;max_depth&#x27;: [3, 5, 7], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #&#x27;min_child_weight&#x27;: [1, 3, 5], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #&#x27;subsample&#x27;: [0.6, 0.8, 1.0], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #&#x27;colsample_bytree&#x27;: [0.6, 0.8, 1.0], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #&#x27;gamma&#x27;: [0, 0.1, 0.2] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Perform GridSearchCV for hyperparameter tuning </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grid_search = GridSearchCV(estimator=xgb_regressor, param_grid=param_grid, cv=5, scoring=&#x27;neg_mean_squared_error&#x27;, verbose=1) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grid_search.fit(X_train, y_train) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Get the best parameters </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    best_params = grid_search.best_params_ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Initialize XGBoost regressor with best parameters </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    best_xgb_regressor = xgb.XGBRegressor(**best_params) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Perform cross-validation </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cv_scores = cross_val_score(best_xgb_regressor, X_train, y_train, cv=5, scoring=&#x27;neg_mean_squared_error&#x27;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Train the XGBoost regressor on the full training set </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    best_xgb_regressor.fit(X_train, y_train) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Make predictions on the test set </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y_pred = best_xgb_regressor.predict(X_test) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Save the model </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    save_model(best_xgb_regressor, &#x27;xgb_model.joblib&#x27;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Calculate MSE and R2 score </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rmse = root_mean_squared_error(y_test, y_pred) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    r2 = r2_score(y_test, y_pred) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return rmse, r2 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rmse, r2 = train_xgboost_regressor(X_train, y_train, X_test, y_test) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&quot;Test RMSE:&quot;, rmse) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&quot;Test R2 Score:&quot;, r2) </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output of the code snippet above should look like the following:</p>
<p><img loading="lazy" alt="Screenshot of output code in the terminal. It reads, &amp;quot;Fitting 5 folds for each of 6 candidates, totalling 30 fits
Test RMSW: 5.738308690044228
Test R2 Score: 0.8378464489048971" src="/Cloud-Native/assets/images/2-2-2-fd8c7337125621030a8d3db77f8b5979.png" width="624" height="55" class="img_ev3q"></p>
<p>After fitting the model with cross-validation and hyperparameter tuning, you’ll see an average root mean squared error (RMSE) of approximately 5.74 and an R-squared (R2) score of about 0.84 on the test data. So, the R-squared values show promising performance in predicting energy prices!</p>
<p>Next, you’ll create the Forecast API, set up its communication with Llama2, and deploy it onto your AKS cluster.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Complete the <a href="https://aka.ms/intelligent-apps/apps-csc?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Intelligent Apps Skills Challenge</a> to compete for the leaderboard and earn a Microsoft Learn Badge.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-backend-service">Setting Up the Backend Service<a href="#setting-up-the-backend-service" class="hash-link" aria-label="Direct link to Setting Up the Backend Service" title="Direct link to Setting Up the Backend Service">​</a></h4>
<p>In the sections that follow, you’ll deploy a simple Python service named “Forecast API.” This service will have an endpoint called <code>predict-chat</code> that will interact with the Llama2 Chat inference service within your AKS cluster. But first, you’ll set up a backend service.</p>
<p>Unzip the <a href="https://github.com/contentlab-io/Microsoft-Forecasting-Energy-Usage-with-Intelligent-Apps/tree/main/Part%202" target="_blank" rel="noopener noreferrer">source code</a> that accompanies this article. It contains the files necessary to run your Python API using the Flask library, including the following:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Name </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app.py </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dockerfile </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requirements.txt </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service.yaml </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Open the <code>app.py</code> file:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from flask import Flask, request, jsonify </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import requests </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app = Flask(__name__) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GENERATE_ENDPOINT_CHAT = os.environ.get(&#x27;GENERATE_ENDPOINT_CHAT&#x27;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@app.route(&#x27;/predict-chat&#x27;, methods=[&#x27;POST&#x27;]) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def predict_chat(): </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data = request.get_json() </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gen_fossil_brown_coal = data.get(&#x27;gen_fossil_brown_coal&#x27;) or 582.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gen_fossil_gas = data.get(&#x27;gen_fossil_gas&#x27;) or 5537.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gen_fossil_hard_coal = data.get(&#x27;gen_fossil_hard_coal&#x27;) or 4039.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gen_fossil_oil = data.get(&#x27;gen_fossil_oil&#x27;) or 331.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gen_hydro = data.get(&#x27;gen_hydro&#x27;) or 454.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gen_other_renewable = data.get(&#x27;gen_other_renewable&#x27;) or 97.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gen_wind_onshore = data.get(&#x27;gen_wind_onshore&#x27;) or 7556.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        total_load_actual = data.get(&#x27;total_load_actual&#x27;) or 31648.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        price = data.get(&#x27;price&#x27;) or 40.61 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        max_gen_len = data.get(&#x27;max_gen_len&#x27;) or 1024 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        temperature = data.get(&#x27;temperature&#x27;) or 0.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prompt = f&quot;&quot;&quot;Display the following report table based on user inputs in tabular text format and write a single-paragraph report summarizing the electricity usage and forecast price: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ### Table </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Generation from fossil brown coal/lignite: {gen_fossil_brown_coal} MW </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Generation from fossil gas: {gen_fossil_gas} MW </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Generation from fossil hard coal:  {gen_fossil_hard_coal} MW </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Generation from fossil oil: {gen_fossil_oil} MW </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Generation from hydro pumped storage: {gen_hydro} MW </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Generation from other renewable sources: {gen_other_renewable} MW </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Generation from onshore wind: {gen_wind_onshore} MW </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ### Totals: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Total actual load: {total_load_actual} MW </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Forecast price: {price} EUR/MWh </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ### Short analysis: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Please write a short analysis on the data above.&quot;&quot;&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        generate_response = requests.post(GENERATE_ENDPOINT_CHAT, json={ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;input_data&quot;: {&quot;input_string&quot;:[[ {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt}]]}, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;parameters&quot;: {&quot;max_gen_len&quot;: max_gen_len, &quot;temperature&quot;: temperature} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if generate_response.status_code == 200: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return generate_response.json(), 200 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return jsonify({&#x27;error&#x27;: &#x27;Failed to invoke generate endpoint&#x27;}), 500 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except Exception as e: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return jsonify({&#x27;error&#x27;: str(e)}), 500 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app.run(debug=True) </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let’s review what the code inside the <code>app.py</code> file is doing.</p>
<ul>
<li>The <code>app.py</code> file is an API endpoint for generating a report on electricity usage and forecasted price based on user-provided input data.</li>
<li>When a POST request is received by the <code>/predict-chat</code> endpoint, the application extracts the input data from the request, including parameters like generation from different energy sources, total actual load, price, and additional settings like <code>max_gen_len</code> and <code>temperature</code>. Note that for now, the app sends dummy values. In Part 3, you’ll update your app to take real values from the user and predict the electricity price using the prediction model.</li>
<li>Then, the app constructs a prompt containing the input data and sends a request to another endpoint, specified by the <code>GENERATE_ENDPOINT_CHAT</code> environment variable, to generate a response. The response includes the report table in tabular text format and a short data analysis.</li>
<li>If the generation request is successful, the application returns a report produced with the generative capabilities of Llama 2 Chat, which is hosted as an inference service in your AKS cluster.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="building-and-pushing-to-acr">Building and Pushing to ACR<a href="#building-and-pushing-to-acr" class="hash-link" aria-label="Direct link to Building and Pushing to ACR" title="Direct link to Building and Pushing to ACR">​</a></h5>
<p>Run the following commands to build the image locally and push it to your Azure Container Registry (ACR). Be sure to replace username and password with your <code>username</code> and <code>password</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker build --no-cache -f Dockerfile -t forecast-api -t &lt;YOUR-ACR-NAME&gt;.azurecr.io/forecast-api:latest . </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker login &lt;YOUR-ACR-NAME&gt;.azurecr.io --username &lt;username&gt; --password-stdin &lt;password&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker push &lt;YOUR-ACR-NAME&gt;.azurecr.io/forecast-api:latest </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="connecting-to-aks">Connecting to AKS<a href="#connecting-to-aks" class="hash-link" aria-label="Direct link to Connecting to AKS" title="Direct link to Connecting to AKS">​</a></h5>
<p>Start by making sure you’re logged in to Azure and that you have the correct AKS credentials by running the following:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az login --tenant &lt;YOUR-AZURE-TENANT-ID&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, run the following commands:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export RESOURCE_GROUP=&lt;YOUR-RESOURCE-GROUP&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export MY_CLUSTER=&lt;YOUR-AKS-CLUSTER-NAME&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export LOCATION=&lt;YOUR-LOCATION&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SUBSCRIPTION=&lt;YOUR-AZURE-SUBSCRIPTION&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az account set --subscription $SUBSCRIPTION </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">az aks get-credentials --resource-group $RESOURCE_GROUP --name $MY_CLUSTER </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="deployment">Deployment<a href="#deployment" class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment">​</a></h5>
<p>Before deploying, you need to retrieve the cluster IP of the Llama2 7B chat workspace running on your AKS cluster. Run the following command in your terminal:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; kubectl get svc </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Copy the inference service’s cluster IP:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME                       TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)            AGE </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">workspace-llama-2-7b-chat  ClusterIP   &lt;CLUSTERIP&gt;  &lt;none&gt;        80/TCP,29500/TCP   10m </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, open the source code directory. Modify the <code>deployment.yaml</code> file, replacing the <code>WORKSPACE-LLAMA-CHAT-CLUSTER-IP</code> placeholder below with your inference service cluster IP you copied above:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: forecast-api-deployment </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 1 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: forecast-api </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: forecast-api </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: forecast-api </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: &lt;YOUR-ACR-NAME&gt;.azurecr.io/forecast-api:latest </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - containerPort: 5000 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        env: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: GENERATE_ENDPOINT_CHAT </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          value: &quot;http://&lt;WORKSPACE-LLAMA-CHAT-CLUSTER-IP&gt;/chat&quot; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, save the updated <code>deployment.yaml</code> file.</p>
<p>Execute the following commands to deploy the service to your AKS cluster:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">snap install kubectl --classic </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f deployment.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f service.yaml </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="invoking-the-service">Invoking the service<a href="#invoking-the-service" class="hash-link" aria-label="Direct link to Invoking the service" title="Direct link to Invoking the service">​</a></h5>
<p>Now that the Forecast API service is deployed, try it out!</p>
<p>Run the command below and grab your Forecast API external IP:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; kubectl get svc </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                 TYPE           CLUSTER-IP    EXTERNAL-IP   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">forecast-api-service                 LoadBalancer   &lt;CLUSTER-IP&gt;  &lt;FORECAST-API-IP&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">workspace-llama-2-7b-chat            ClusterIP      &lt;CLUSTER-IP&gt;  &lt;none&gt;        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">workspace-llama-2-7b-chat-headless   ClusterIP      None          &lt;none&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, run the curl command below to test your Forecast API service. Be sure to replace the <code>&lt;FORECAST-API-IP&gt;</code> placeholder with your Forecast API external IP:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location &#x27;http://&lt;FORECAST-API-IP&gt;/predict-chat&#x27; \ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--data &#x27;{ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gen_fossil_brown_coal&quot;: 582.0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gen_fossil_gas&quot;: 5537.0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gen_fossil_hard_coal&quot;: 4039.0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gen_fossil_oil&quot;: 331.0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gen_hydro&quot;: 454.0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gen_other_renewable&quot;: 97.0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gen_wind_onshore&quot;: 7556.0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;total_load_actual&quot;: 31648.0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;price&quot;: 40.61, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_seq_len&quot;: 0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_gen_len&quot;: 2048, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;temperature&quot;: 0.5 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The Forecast API service will process the request containing the data from energy sources and price, invoke the inference service, and return the response to the user:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;content&quot;: &quot;Based on the user inputs provided, the following is the table of electricity generation and forecast price: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Generation Source | MW | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| --- | --- | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Fossil Brown Coal/Lignite | 582.0 | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Fossil Gas | 5537.0 | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Fossil Hard Coal | 4039.0 | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Fossil Oil | 331.0 | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Hydro Pumped Storage | 454.0 | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Other Renewable Sources | 97.0 | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Onshore Wind | 7556.0 | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Total Actual Load | 31648.0 | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forecast Price | 40.61 EUR/MWh | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Based on the data provided, the electricity generation from various sources shows a predominance of fossil fuels, with fossil gas being the largest contributor at 5537.0 MW, followed by fossil hard coal at 4039.0 MW, and fossil brown coal/lignite at 582.0 MW. Onshore wind is the largest renewable source of electricity generation at 7556.0 MW.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That’s it! Note how the generative capabilities of Llama2 7B chat model can transform the cold numbers of your input into an intelligent analysis.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h2>
<p>In this second installment of the series, you analyzed historical data, used a dataset to construct a model capable of predicting future energy pricing, and used LLaMA2 to generate a report on the energy usage. Continue to Part 3, where you’ll build a basic web interface for the Intelligent App, display the report generated by model, and deploy the app.</p>
<p>To keep your learning going, participate in the <a href="https://aka.ms/intelligent-apps/csc" target="_blank" rel="noopener noreferrer">Cloud Skill Challenges</a>, check out the <a href="https://aka.ms/intelligent-apps/ate-aks?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Ask The Expert session</a> with the AKS product team, and register for <strong>AKS <a href="https://aka.ms/aks-day" target="_blank" rel="noopener noreferrer">Customer</a> and <a href="https://aka.ms/aks-lab-day" target="_blank" rel="noopener noreferrer">Lab</a> Days</strong> at KubeCon EU to stay abreast of the latest developments in cloud technology.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps">Build-Intelligent-Apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/60-days-of-ia">60-days-of-IA</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/hack-together">hack-together</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/community-buzz">community-buzz</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-kubernetes-service">azure-kubernetes-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-openai">azure-openai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-container-apps">azure-container-apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-cosmos-db">azure-cosmos-db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-copilot">github-copilot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-codespaces">github-codespaces</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-actions">github-actions</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cloud-Native/60DaysOfIA/tags/azure-openai/page/4"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/60DaysOfIA/tags/azure-openai/page/6"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer><div></div></footer></div>
</body>
</html>