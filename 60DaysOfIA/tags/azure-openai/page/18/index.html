<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-blog-60daysofIA" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">28 posts tagged with &quot;azure-openai&quot; | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" property="og:url" content="https://azure.github.io/cloud-native/60daysofia/creating-a-virtual-stylist-chatbot-part-1"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" property="og:description" content="In this three-part series, you’ll build a virtual stylist chatbot that uses AI to analyze images and suggest clothing items. In this first part, you’ll analyze clothing images using AI to generate a text description of the piece, focusing on the clothing’s characteristics. "><meta data-rh="true" property="og:image" content="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/60daysofIA/creating-a-virtual-stylist-chatbot-part-1"><meta data-rh="true" name="twitter:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" name="twitter:description" content="In this three-part series, you’ll build a virtual stylist chatbot that uses AI to analyze images and suggest clothing items. In this first part, you’ll analyze clothing images using AI to generate a text description of the piece, focusing on the clothing’s characteristics. "><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@devanshidiaries"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/tags/azure-openai/page/18" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/tags/azure-openai/page/18" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/60daysofIA/creating-a-virtual-stylist-chatbot-part-1"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30-days-of-ia-2024/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30-days-of-ia-2024/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.5c7aceae.css">
<script src="/Cloud-Native/assets/js/runtime~main.39c806a3.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.eb5d9f28.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/Cloud-Native/"></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarBackground_Iz1u"><div class="container"><div class="row"><div class="col col--8 col--offset-2 announcementBarContainer_QNjo"><div class="col-demo"><p class="announcementBarContent_tvcd">Dive into architecting a <a class="announcementLink_qKCm" target="_blank" href="https://aka.ms/demo-bytes/ep10?ocid=biafy25h1_cn_webpage_azuremktg" data-bi-area="AnnouncementBar" data-bi-name="Announcement">secure and scalable unified AI stack</a> | Give us a 🌟 <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></p></div></div><div class="col col--2 announcementBarIconContainer_GQot"><div class="col-demo"><a href="https://github.com/azure/cloud-native" target="_blank" class="icon_QeTG" aria-label="Visit us on GitHub"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" class="icon_QeTG" aria-label="Subscribe to RSS"><svg width="24" height="24" viewBox="0 0 333333 333333" xmlns="http://www.w3.org/2000/svg" fill="#f49c4f"><path d="M166667 0c92048 0 166667 74619 166667 166667s-74619 166667-166667 166667S0 258715 0 166667 74619 0 166667 0zm-57698 203357c-11551 0-20938 9418-20938 20897 0 11537 9386 20857 20938 20857 11587 0 20967-9320 20967-20857 0-11479-9378-20897-20967-20897zm-20918-61899v30148c19632 0 38081 7677 51977 21585 13883 13868 21548 32406 21548 52114h30276c0-57254-46585-103838-103801-103838v-9zm38-53431v30154c70007 0 126979 57031 126979 127116l30235 3c0-86697-70539-157270-157212-157270l-2-3z"></path></svg></a><svg viewBox="0 0 24 24" width="24" height="24" class="icon_Kj6K"><path fill="white" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg></div></div></div></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#60DaysOfIA</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/kick-off">Kick-off #60Days of IA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/harnessing-the-power-of-intelligent-apps">1. Harnessing the power of Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/power-up-crafting-an-intelligent-energy-forecasting-application-using-azure-kubernetes-service">2. Power Up: Crafting an Intelligent Energy Forecasting Application Using Azure Kubernetes Service</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-1">2.1 Forecasting Energy Usage with Intelligent Apps Part 1: Laying the Groundwork with AKS, KAITO, and LLaMA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-2">2.2 Forecasting Energy Usage with Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-3">2.3 Forecasting Energy Usage with Intelligent Apps Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/cosmos-db-and-intelligent-apps-a-match-made-for-innovation">3. Cosmos DB and Intelligent Apps: A Match Made for Innovation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-1">3.1 Dynamic Repricing of Products Using Intelligent Apps Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-2">3.2 Dynamic Repricing of Products Using Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-3">3.3 Dynamic Repricing of Products Using Intelligent Apps Part 3: Graphing and Displaying Price Forecasts in a Web Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/fuel-your-intelligent-apps-with-azure-ai">4. Fuel Your Intelligent Apps with Azure AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-contoso-chat-end-to-end">4.1 Build Contoso Chat End-to-End</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk">4.2 Build A Copilot Code-First with the Azure AI Python SDK</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-prompt-flow">4.3 Build a Copilot on Azure Code-First with Prompt Flow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-langchain">4.4 Build a Copilot on Azure Code-First with Langchain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/deploying-your-copilot-on-azure">4.5 Deploying Your Copilot On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/the-role-of-platform-engineering-in-developing-intelligent-apps">5 The Role of Platform Engineering in Developing Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-1">6.1 Creating a Virtual Stylist Chatbot — Part 1: Analyzing Images with AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-2">6.2 Creating a Virtual Stylist Chatbot — Part 2: Adding a Chatbot Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-3">6.3 Creating a Virtual Stylist Chatbot — Part 3: Deploying the App</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-1">6.4 Building a Multichannel Notification System (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-2">6.5 Building a Multichannel Notification System (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-1">7.1 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-2">7.2 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/personalizing-education-with-generative-ai-and-retrieval-augmented-generation-3">7.3 Personalizing Education with Generative AI and Retrieval Augmented Generation Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-1">7.4 Real-time Voice Sentiment Analysis System 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/real-time-voice-sentiment-analysis-system-2">7.5 Real-time Voice Sentiment Analysis System 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/managing-the-cost-of-intelligent-apps">8 Managing the Cost of Intelligent Apps</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>28 posts tagged with &quot;azure-openai&quot;</h1><a href="/Cloud-Native/60DaysOfIA/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="In this three-part series, you’ll build a virtual stylist chatbot that uses AI to analyze images and suggest clothing items. In this first part, you’ll analyze clothing images using AI to generate a text description of the piece, focusing on the clothing’s characteristics. "><link itemprop="image" href="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta itemprop="keywords" content="Cloud,Data,AI,AI/ML,intelligent apps,cloud-native,60-days,enterprise apps,digital experiences,app modernization,serverless,ai apps"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-1">6.1 Creating a Virtual Stylist Chatbot — Part 1: Analyzing Images with AI</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-03-26T09:00:00.000Z" itemprop="datePublished">March 26, 2024</time> · <!-- -->14 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://azure.github.io/Cloud-Native/img/logo-2024.png" alt="#60Days Of IA" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">#60Days Of IA</span></a></div><small class="avatar__subtitle" itemprop="description">BuildIA Content Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p><img loading="lazy" alt="virtual stylist chatbot that uses AI to analyze images and suggest clothing items" src="/Cloud-Native/assets/images/6-1-1-87f23e69dcf5f8154c19cca178c55920.jpeg" width="624" height="380" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-virtual-stylist-chatbot--part-1-analyzing-images-with-ai">Creating a Virtual Stylist Chatbot — Part 1: Analyzing Images with AI<a href="#creating-a-virtual-stylist-chatbot--part-1-analyzing-images-with-ai" class="hash-link" aria-label="Direct link to Creating a Virtual Stylist Chatbot — Part 1: Analyzing Images with AI" title="Direct link to Creating a Virtual Stylist Chatbot — Part 1: Analyzing Images with AI">​</a></h2>
<p>Ever wished you had a personal fashion consultant who could help you find the ideal outfit for any occasion? What if you could use artificial intelligence (AI) to create a virtual stylist chatbot that could analyze clothing in images and suggest the perfect match from a database of clothing options.</p>
<p>This assistant is an example of an intelligent app—an application that leverages AI to enhance and personalize its user experience.</p>
<p>In this three-part series, you’ll learn how to build your own AI stylist app. When you’re done, you’ll have an app that can understand the contents of user-uploaded images and recommends similar items from a fashion image dataset.</p>
<p>The first article of this series demonstrates how to create the app’s core logic. It analyzes the clothing styles in the image and finds the closest match in the dataset using Azure AI Search, Azure OpenAI Service, and Azure Functions. In the later parts of the series, you’ll add a chatbot interface to the app.</p>
<p>Let’s get started!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3>
<p>Before you start, ensure you have:</p>
<ul>
<li>Python 3.10 or later</li>
<li>An Azure subscription with access to <a href="https://azure.microsoft.com/products/ai-services/openai-service?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure OpenAI Service</a></li>
<li><a href="https://learn.microsoft.com/cli/azure/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure command-line interface (CLI)</a> installed</li>
<li><a href="https://github.com/Azure/azure-functions-core-tools" target="_blank" rel="noopener noreferrer">Azure Functions Core Tools</a> installed</li>
<li>An Azure OpenAI Service resource with a GPT-4 Vision model deployed. Read the <a href="https://learn.microsoft.com/azure/ai-services/openai/how-to/create-resource?pivots=web-portal&amp;ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">resource deployment guide</a> if you haven’t yet deployed a model. Note that <a href="https://learn.microsoft.com/azure/ai-services/openai/concepts/models?ocid=buildia24_60days_blogs#model-summary-table-and-region-availability" target="_blank" rel="noopener noreferrer">GPT-4 Vision</a> is only available in the Sweden Central and West US regions, so be sure to select either of those two.</li>
<li>The deployment name, endpoint, and API key for your OpenAI Service. See the “Retrieve key and endpoint” section in the <a href="https://learn.microsoft.com/azure/ai-services/openai/dall-e-quickstart?pivots=programming-language-python?ocid=buildia24_60days_blogs#retrieve-key-and-endpoint" target="_blank" rel="noopener noreferrer">Azure OpenAI Service docs</a> for details on finding your model’s endpoint URL and API key.</li>
<li>The <a href="https://www.kaggle.com/datasets/paramaggarwal/fashion-product-images-small" target="_blank" rel="noopener noreferrer">Fashion Product Images dataset</a> from Kaggle. Download and unzip the dataset. You’ll only need the CSV file in part 1, but keep all the images because you’ll use them later in the series.</li>
<li>Familiarity with Python</li>
<li><a href="https://flask.palletsprojects.com/en/3.0.x/installation/" target="_blank" rel="noopener noreferrer">Flask installed</a></li>
<li><a href="https://code.visualstudio.com/Download" target="_blank" rel="noopener noreferrer">Visual Studio Code</a> or another code editor of your choice</li>
</ul>
<p>For a preview, refer to the complete code for <a href="https://github.com/rogerwinter/Microsoft-Creating-a-Virtual-Stylist-Chatbot/tree/main/stylist-backend" target="_blank" rel="noopener noreferrer">part 1 available on GitHub</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="analyzing-clothing-styles-with-ai">Analyzing Clothing Styles with AI<a href="#analyzing-clothing-styles-with-ai" class="hash-link" aria-label="Direct link to Analyzing Clothing Styles with AI" title="Direct link to Analyzing Clothing Styles with AI">​</a></h3>
<p>With the prerequisites in place, it’s time to create an app from scratch. It will use Azure AI Search, Azure Functions (in Python), and Azure OpenAI Service to do the following:</p>
<ul>
<li>Accept an image uploaded from a web interface. It should be an image of a clothing item or a person wearing one or more pieces of clothing.</li>
<li>Analyze that image using Azure OpenAI GPT-4 Turbo with Vision to generate a text description of the piece. Focus on describing the characteristics of the clothing.</li>
<li>Use the text description of the clothing’s characteristics to find its closest matches in the clothing dataset.</li>
<li>Return a suggestion from the dataset of which clothing items are the best matches.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Complete the <strong><a href="https://aka.ms/intelligent-apps/apps-csc?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Intelligent Apps Skills Challenge</a></strong> to compete for the leaderboard and earn a Microsoft Learn Badge.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-search-index-and-upload-the-dataset">Create the Search Index and Upload the Dataset<a href="#create-the-search-index-and-upload-the-dataset" class="hash-link" aria-label="Direct link to Create the Search Index and Upload the Dataset" title="Direct link to Create the Search Index and Upload the Dataset">​</a></h4>
<p>First, you must create a search index and upload the dataset that contains the clothing options. You’ll use Azure AI Search, which can automatically ingest and parse the CSV data supplied with the fashion image dataset.</p>
<p>Begin by uploading the CSV data included in the <a href="https://www.kaggle.com/datasets/paramaggarwal/fashion-product-images-small" target="_blank" rel="noopener noreferrer">fashion dataset</a> into Azure Blob Storage. Navigate to the Storage Accounts page to get started. To find it quickly, enter its name in the Azure Portal’s search bar:</p>
<p><img loading="lazy" alt="image of storage accounts search in Azure" src="/Cloud-Native/assets/images/6-1-2-beab8e8713c79aeb77ead57a11b8a897.png" width="624" height="197" class="img_ev3q"></p>
<p>When the page loads, choose an existing storage account if you already have one. If not, create a new one. Click the storage account’s name to load its dashboard page. Then, click <strong>Upload</strong> to upload a new file:</p>
<p><img loading="lazy" alt="image of upload storage accounts search in Azure" src="data:image/jpeg;base64,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" width="355" height="154" class="img_ev3q"></p>
<p>Next, select the <code>styles.csv</code> file from the fashion dataset downloaded from Kaggle.</p>
<p><img loading="lazy" alt="image of file upload" src="/Cloud-Native/assets/images/6-1-4-e2a1e9aa7f205c2fe07e942deaeacd24.png" width="473" height="404" class="img_ev3q"></p>
<p>If you have an existing storage container you’d like to use, select it from the dropdown menu. Otherwise, click the link to create a new one. Either way, ensure the container is empty before proceeding. The <code>styles.csv</code> file you upload should be the only file in the container.</p>
<p>Now, you’re ready to create the AI Search service. Look it up using the Azure Portal search box:</p>
<p><img loading="lazy" alt="image of searching for AI Search service in Azure Portal" src="/Cloud-Native/assets/images/6-1-5-1bd293d9503890e015798cc07192e1e0.png" width="413" height="147" class="img_ev3q"></p>
<p>When the AI Search page loads, click <strong>+ Create</strong> to create a new AI Search instance.</p>
<p><img loading="lazy" alt="image of create in AI services" src="/Cloud-Native/assets/images/6-1-6-0d59728e1b107130191dbde7ecaabaf3.png" width="587" height="108" class="img_ev3q"></p>
<p>Select the subscription and resource group you’d like to use to create the search service. Then, enter a unique name of your choice — this demonstration uses “stylist-search-service.”</p>
<p><img loading="lazy" alt="image of fields for creating a new search service in AI services" src="/Cloud-Native/assets/images/6-1-7-7286c9c6111f665a70fe5a9771369e79.png" width="623" height="395" class="img_ev3q"></p>
<p>Use the defaults for all remaining settings and click <strong>Create</strong> to create the search service. This may take a few minutes. The Azure Portal will let you know when the service is ready.</p>
<p>Now, it’s time to index the data in the <code>styles.csv</code> file you uploaded to Blob Storage earlier. From the main page of your new search index, click <strong>Import data</strong>.</p>
<p><img loading="lazy" alt="image of import data option for indexing data" src="/Cloud-Native/assets/images/6-1-8-f9296498e9857d0b8b89e896d829f308.jpeg" width="624" height="108" class="img_ev3q"></p>
<p>In the first data import screen, select <strong>Azure Blob Storage</strong> as the data source and enter “fashion-images” as the data source name. Choose <strong>Delimited text</strong> as the parsing mode, and enter a comma as the delimiter character. For the connection string, click <strong>Choose an existing connection</strong> and select the storage container where you uploaded <code>styles.csv</code>. Delete the forward slash in the Blob folder input box. Azure will auto-populate the connection string.</p>
<p><img loading="lazy" alt="image of fields for importing data" src="/Cloud-Native/assets/images/6-1-9-4c1e5077197bd985a83fc2bcab7ef88e.png" width="405" height="352" class="img_ev3q"></p>
<p>Click <strong>Next</strong> until Azure prompts you to customize the target index, and then update the field settings as follows:</p>
<p><img loading="lazy" alt="image of field settings for importing data" src="/Cloud-Native/assets/images/6-1-10-73760999649050df4ac630e6c11b7456.png" width="625" height="293" class="img_ev3q"></p>
<p>Click <strong>Next</strong>. On the final screen, enter a name for the indexer and click <strong>Submit</strong>.</p>
<p><img loading="lazy" alt="image of final screen when importing data" src="/Cloud-Native/assets/images/6-1-11-daead3a7e13f0eff2a340565e78a1434.png" width="413" height="399" class="img_ev3q"></p>
<p>Azure will create a search index and then run the ingester to import the data. It should finish in under two minutes. When it does, you’re done with search index creation.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Register for the new learning series on <strong><a href="https://aka.ms/serverless-learn-live?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Intelligent Apps with Serverless on Azure</a></strong>. Join the community along with MVPs, and the Azure Product Group on how to leverage AI with Serverless on Azure technologies –Azure Functions and Azure Container Apps – to build intelligent applications.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-azure-function">Create the Azure Function<a href="#create-the-azure-function" class="hash-link" aria-label="Direct link to Create the Azure Function" title="Direct link to Create the Azure Function">​</a></h4>
<p>The next step is to create the Azure Function that will perform image analysis, matching logic, and recommendation generation. You’ll use Python as the programming language and Flask as the web framework.</p>
<p>To create and deploy the Azure Functions app, use the Azure Functions CLI. Open a terminal and create a new directory to store your app. Then, run:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">func init --python</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The app generator will run. Open the directory in Visual Studio Code or your text editor of choice. You should see several files:</p>
<p><img loading="lazy" alt="the directory in Visual Studio Code" src="/Cloud-Native/assets/images/6-1-12-0126ca1f4856fce21305ab3cd0c05ba2.png" width="271" height="200" class="img_ev3q"></p>
<p>Open <code>requirements.txt</code> and add the following:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">azure-functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">azure-search-documents</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This change ensures Azure will install all the dependencies the function needs before trying to run it.</p>
<p>Next, open <code>function_app.py</code> and replace its contents with the following:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import azure.functions as func</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from azure.search.documents import SearchClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from azure.core.credentials import AzureKeyCredential</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app = func.FunctionApp()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Get the environment variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_API_KEY = os.environ[&#x27;OPENAI_API_KEY&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_ENDPOINT = os.environ[&#x27;OPENAI_ENDPOINT&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_DEPLOYMENT_NAME = os.environ[&#x27;OPENAI_DEPLOYMENT_NAME&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SEARCH_API_KEY = os.environ[&#x27;SEARCH_API_KEY&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SEARCH_ENDPOINT = os.environ[&#x27;SEARCH_ENDPOINT&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SEARCH_INDEX_NAME = os.environ[&#x27;SEARCH_INDEX_NAME&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Initialize the Azure OpenAI headers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openai_headers = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;Authorization&#x27;: &#x27;Bearer {}&#x27;.format(OPENAI_API_KEY),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;Content-Type&#x27;: &#x27;application/json&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Initialize the Azure Search client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">search_credentials = AzureKeyCredential(SEARCH_API_KEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">search_client = SearchClient(SEARCH_ENDPOINT, SEARCH_INDEX_NAME, search_credentials)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@app.route(route=&quot;stylist&quot;, methods=[&quot;post&quot;], auth_level=func.AuthLevel.FUNCTION)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def stylist(req: func.HttpRequest) -&gt; func.HttpResponse:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # get image from request and convert to a base64 string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image = req.files[&quot;image&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_bytes = image.read()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_base64 = base64.b64encode(image_bytes).decode(&quot;utf-8&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Generate a text description from the image using Azure OpenAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    base_url = f&quot;{OPENAI_ENDPOINT}openai/deployments/{OPENAI_DEPLOYMENT_NAME}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    endpoint = f&quot;{base_url}/chat/completions?api-version=2023-12-01-preview&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            { &quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;text&quot;: &quot;Describe the main fashion item in this picture. Make sure you include the type of item (e.g., Shirt, T-Shirt, Shorts, Pants, Dress, Purse, Clutch), the color of the item, and &#x27;Men&#x27; or &#x27;Women&#x27; if the fashion item appears to be specific to either of those genders.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;image_url&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;image_url&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;url&quot;: image_base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ] }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;max_tokens&quot;: 2000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response = requests.post(endpoint, headers=openai_headers, data=json.dumps(data))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result = response.json()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_description = result[&#x27;text&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Find the closest match from the search index using Azure OpenAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    search_result = search_client.search(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        search_text=image_description,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        select=[&quot;id&quot;, &quot;productDisplayName&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        top=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match_id = search_result[&quot;id&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match_name = search_result[&quot;productDisplayName&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Generate a natural language recommendation based on the match result using Azure OpenAI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            { &quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;text&quot;: f&quot;Please generate a natural language recommendation based on the matching item: {match_id}, {match_name}. For example: The best match for your clothing item is: Peter England Men Party Blue Jeans. This is a pair of jeans for men in blue color, suitable for casual occasions. You can pair it with a shirt or a t-shirt of your choice.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ] }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;max_tokens&quot;: 2000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response = requests.post(endpoint, headers=openai_headers, data=json.dumps(data))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result = response.json()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    recommendation = result[&#x27;text&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Return the recommendation as a JSON response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return func.HttpResponse(json.dumps({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;image_id&#x27;: match_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;recommendation&#x27;: recommendation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })) </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let’s break down what’s happening step by step.</p>
<p>First, you set up the function app and Azure clients. This code:</p>
<ul>
<li>Initializes an Azure Function with an HTTP trigger</li>
<li>Retrieves necessary API keys and endpoints from environment variables for OpenAI and Azure Search services</li>
<li>Sets up headers for interacting with Azure OpenAI Service and a client for using Azure Search</li>
</ul>
<p>Then, you define the <code>process_image</code> function. This function:</p>
<ul>
<li>Is the application’s code and executes on a specific request to the Flask app</li>
<li>Receives an image as part of the request</li>
</ul>
<p>Next, you generate text descriptions with Azure OpenAI. This code:</p>
<ul>
<li>Constructs a request to Azure OpenAI Service’s chat API to generate a description of the main fashion item in the image. The request includes the image and a prompt to describe the fashion item, including its type, color, and gender specificity.</li>
<li>Sends the request and extracts the generated description from the response</li>
</ul>
<p>After, you search for a matching product. This code:</p>
<ul>
<li>Uses the Azure Search client to search for a product that matches the description generated by OpenAI. The search query uses the textual description and selects specific fields (<code>id</code>, <code>productDisplayName</code>) from the search index.</li>
<li>Extracts the ID and display name of the closest matching product from the search results</li>
</ul>
<p>Then, you generate a natural language recommendation. This code:</p>
<ul>
<li>Constructs another request to Azure OpenAI Service’s chat API to generate a natural language recommendation based on the matching product. The request includes the matching product’s details and asks for a natural language recommendation.</li>
<li>Sends the request and extracts the recommendation from the response</li>
</ul>
<p>Next, the code returns the recommendation:</p>
<ul>
<li>The function ends by returning a JSON response containing the matching product’s ID and the natural language recommendation.</li>
<li>The ID matches the file name of an image in the dataset, so you can use it to load and display images in the web UI in parts 2 and 3 of this series.</li>
</ul>
<p>Finally, you define a main function:</p>
<ul>
<li>This is the function Azure runs to boot the function app and prepare it to receive HTTP requests.</li>
</ul>
<p>This app combines image processing, text generation, and search capabilities to provide fashion item recommendations. It demonstrates how to implement the entire back end of an intelligent application.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-azure-function">Deploy the Azure Function<a href="#deploy-the-azure-function" class="hash-link" aria-label="Direct link to Deploy the Azure Function" title="Direct link to Deploy the Azure Function">​</a></h4>
<p>The final step is to deploy the Azure Function to the cloud so the web interface can access it. Start by using the Azure CLI to create a new function app:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az functionapp create --resource-group &lt;RESOURCE_GROUP_NAME&gt; --consumption-plan-location westus --runtime python --runtime-version 3.9 --functions-version 4 --name &lt;APP_NAME&gt; --os-type linux --storage-account &lt;STORAGE_NAME&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can use the same resource group and storage account you used for the search service.</p>
<p><strong>Note</strong>: The app name must be unique, so you might need to try a few options to find one available.</p>
<p>Next, set all the environment variables the app will need by running:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">az functionapp config appsettings set –name &lt;APP_NAME&gt; --resource-group &lt;RESOURCE_GROUP&gt; --settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_API_KEY=&lt;your Azure OpenAI key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_ENDPOINT=&lt;your Azure OpenAI endpoint&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENAI_DEPLOYMENT_NAME=&lt;your Azure OpenAI deployment name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SEARCH_API_KEY=&lt;your Search API key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SEARCH_ENDPOINT=&lt;your Search service endpoint&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SEARCH_INDEX_NAME=&lt;your Search index name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you’re unsure where to find any of these values, here’s how to locate them:</p>
<ul>
<li>
<p>For the OpenAI values, find and load the Azure OpenAI page by entering OpenAI in the Azure Portal search bar. Click the name of your Azure OpenAI service, and you’ll see two menu options:</p>
<p><img loading="lazy" alt="the directory in Visual Studio Code" src="/Cloud-Native/assets/images/6-1-13-f3a608e39936d86857dedb477579fe45.png" width="249" height="98" class="img_ev3q"></p>
<p>Click <strong>Keys and Endpoint</strong> to locate the required information, or click <strong>Model deployments</strong> to navigate to Azure OpenAI Studio and find the names of your model deployments.</p>
</li>
<li>
<p>For the search service, load your stylist search service’s page in Azure Portal:</p>
<ul>
<li>On the <strong>Overview</strong> page, the <strong>Url</strong> value is your search endpoint.</li>
<li>Click <strong>Keys</strong> in the menu to access your search service’s keys.</li>
<li>Click <strong>Indexes</strong> in the menu to see the name of your search service’s index.</li>
</ul>
</li>
</ul>
<p>Note that you’re saving these as app settings for simplicity. In a product app, you should keep secrets like API keys safe by using <a href="https://azure.microsoft.com/products/key-vault?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Key Vault</a>.</p>
<p>Once you’ve created the app and saved its settings, you can deploy your function by running the following command from the Azure Functions CLI:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">func azure functionapp publish &lt;APP_NAME&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The CLI will begin deploying your app. When the deployment is complete, the interface will provide a URL to send HTTPS requests to the function app.</p>
<p>Now, the back end of the stylist chatbot app is complete! You’re ready to move on to creating the web interface for the app.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Join the Azure Functions product group for an <strong><a href="https://aka.ms/intelligent-apps/ate-functions?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Ask The Expert</a></strong> session on how to focus on the pieces of code that matter most to you in AI application development, while Azure Functions handles the rest for you.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h3>
<p>In this article, you learned how to create a virtual stylist chatbot that can analyze clothing styles in an image and identify the best match from a dataset of clothing options — leveraging Azure Functions and Azure OpenAI Service to do so. You also learned how to use Azure AI Search feature to index, store, and retrieve entries from a search index. Next, you discovered how to use Azure OpenAI Service to generate natural language descriptions and recommendations based on the user’s input image.</p>
<p>In the next part of this series, you’ll learn how to add a chatbot interface to the app using React and an <a href="https://azure.microsoft.com/products/app-service/static?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Static Web App</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps">Build-Intelligent-Apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/60-days-of-ia">60-days-of-IA</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/hack-together">hack-together</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/community-buzz">community-buzz</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-kubernetes-service">azure-kubernetes-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-openai">azure-openai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-container-apps">azure-container-apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-cosmos-db">azure-cosmos-db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-copilot">github-copilot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-codespaces">github-codespaces</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-actions">github-actions</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Cloud-Native/60DaysOfIA/tags/azure-openai/page/17"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/60DaysOfIA/tags/azure-openai/page/19"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer><div></div></footer></div>
</body>
</html>