<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-blog-60daysofIA" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">22 posts tagged with &quot;60-days-of-IA&quot; | Build Intelligent Apps On Azure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:title" content="#IntelligentApps start today | Microsoft Azure"><meta data-rh="true" name="og:description" content="Develop adaptive, responsive, and personalized experiences by building and modernizing intelligent applications with Azure!"><meta data-rh="true" name="og:url" content="https://aka.ms/FallForIA"><meta data-rh="true" name="twitter:site" content="@AzureAdvocates"><meta data-rh="true" name="awa-env" content="Production"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" property="og:url" content="https://azure.github.io/cloud-native/60daysofia/building-a-multichannel-notification-system-2"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" property="og:description" content="This blog post outlines a step-by-step guide on building such a multichannel notification system with Azure Functions and Azure Communication Services."><meta data-rh="true" property="og:image" content="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta data-rh="true" name="twitter:url" content="https://azure.github.io/Cloud-Native/60daysofIA/building-a-multichannel-notification-system-2"><meta data-rh="true" name="twitter:title" content="Build Intelligent Apps | AI Apps on Azure"><meta data-rh="true" name="twitter:description" content="This blog post outlines a step-by-step guide on building such a multichannel notification system with Azure Functions and Azure Communication Services."><meta data-rh="true" name="twitter:image" content="https://azure.github.io/Cloud-Native/img/ogImage.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@devanshidiaries"><link data-rh="true" rel="icon" href="/Cloud-Native/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/tags/60-days-of-ia" hreflang="en"><link data-rh="true" rel="alternate" href="https://azure.github.io/Cloud-Native/60DaysOfIA/tags/60-days-of-ia" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://azure.github.io/Cloud-Native/60daysofIA/building-a-multichannel-notification-system-2"><link rel="alternate" type="application/rss+xml" href="/Cloud-Native/blog/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/blog/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">





<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/cnny-2023/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/cnny-2023/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/30DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/30DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/Cloud-Native/60DaysOfIA/rss.xml" title="Build Intelligent Apps On Azure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Cloud-Native/60DaysOfIA/atom.xml" title="Build Intelligent Apps On Azure Atom Feed">
<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/d61n997vq9",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script><link rel="stylesheet" href="/Cloud-Native/assets/css/styles.f3055625.css">
<script src="/Cloud-Native/assets/js/runtime~main.f311f041.js" defer="defer"></script>
<script src="/Cloud-Native/assets/js/main.94a84921.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><header><div></div></header><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Cloud-Native/"><div class="navbar__logo"><img src="/Cloud-Native/img/logo-2024.png" alt="Azure Cloud Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Cloud-Native/img/logo-2024.png" alt="Azure Cloud Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Cloud-Native</b></a><a class="navbar__item navbar__link" href="/Cloud-Native/Build-IA/">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Cloud-Native/60DaysOfIA">Blog</a><a class="navbar__item navbar__link" href="/Cloud-Native/Build-IA/calendar/">Calendar</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Intelligent Apps</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/Build-IA/">Build Intelligent Apps | 2024</a></li><li><a class="dropdown__link" href="/Cloud-Native/60DaysOfIA">#60DaysOfIA</a></li><li><a class="dropdown__link" href="/Cloud-Native/30DaysOfIA">#30DaysOfIA</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Cloud Native</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/New-Year/">ü•≥ | New Year 2023</a></li><li><a class="dropdown__link" href="/Cloud-Native/cnny-2023">#30DaysOfCloudNative</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Serverless</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Cloud-Native/serverless-september">üçÇ September | 2022</a></li><li><a href="https://dev.to/azure/serverlessseptember-2020-content-collection-443k" target="_blank" rel="noopener noreferrer" class="dropdown__link">üçÇ September | 2020<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://dev.to/azure/serverless-september-content-collection-2fhb" target="_blank" rel="noopener noreferrer" class="dropdown__link">üçÇ September | 2019<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/Cloud-Native/blog">#30DaysOfServerless</a></li></ul></div><a href="https://github.com/azure/cloud-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://azure.github.io/Cloud-Native/60DaysOfIA/rss.xml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-rss-link" aria-label="Subscribe to RSS"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="announcementBarContainer_QNjo"><div class="announcementBarContent_tvcd">Check out the <a class="announcementLink_qKCm" target="_blank" href="https://developer.microsoft.com/en-us/reactor/series/S-1308/?wt.mc_id=blog_S-1308_webpage_reactor" data-bi-area="AnnouncementBar" data-bi-name="Intelligent Apps on Azure Container Apps">Intelligent Apps on Azure Container Apps</a> series for quick demo bytes | Give us a üåü <a class="announcementLink_qKCm" target="_blank" href="https://github.com/azure/cloud-native" data-bi-area="AnnouncementBar" data-bi-name="Give us a star on GitHub">on GitHub</a></div></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">#60DaysOfIA</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-2">6.5 Building a Multichannel Notification System (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-1">6.4 Building a Multichannel Notification System (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-3">6.3 Creating a Virtual Stylist Chatbot ‚Äî Part 3: Deploying the App</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-2">6.2 Creating a Virtual Stylist Chatbot ‚Äî Part 2: Adding a Chatbot Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/creating-a-virtual-stylist-chatbot-part-1">6.1 Creating a Virtual Stylist Chatbot ‚Äî Part 1: Analyzing Images with AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/the-role-of-platform-engineering-in-developing-intelligent-apps">5 The Role of Platform Engineering in Developing Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/deploying-your-copilot-on-azure">4.5 Deploying Your Copilot On Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-langchain">4.4 Build a Copilot on Azure Code-First with Langchain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-on-azure-code-first-with-prompt-flow">4.3 Build a Copilot on Azure Code-First with Prompt Flow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-a-copilot-code-first-with-the-azure-ai-python-sdk">4.2 Build A Copilot Code-First with the Azure AI Python SDK</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/build-contoso-chat-end-to-end">4.1 Build Contoso Chat End-to-End</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/fuel-your-intelligent-apps-with-azure-ai">4. Fuel Your Intelligent Apps with Azure AI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-3">3.3 Dynamic Repricing of Products Using Intelligent Apps Part 3: Graphing and Displaying Price Forecasts in a Web Interface</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-2">3.2 Dynamic Repricing of Products Using Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/dynamic-repricing-of-products-using-intelligent-apps-part-1">3.1 Dynamic Repricing of Products Using Intelligent Apps Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/cosmos-db-and-intelligent-apps-a-match-made-for-innovation">3. Cosmos DB and Intelligent Apps: A Match Made for Innovation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-3">2.3 Forecasting Energy Usage with Intelligent Apps Part 3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-2">2.2 Forecasting Energy Usage with Intelligent Apps Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/forecasting-energy-usage-with-intelligent-apps-1">2.1 Forecasting Energy Usage with Intelligent Apps Part 1: Laying the Groundwork with AKS, KAITO, and LLaMA</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/power-up-crafting-an-intelligent-energy-forecasting-application-using-azure-kubernetes-service">2. Power Up: Crafting an Intelligent Energy Forecasting Application Using Azure Kubernetes Service</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/harnessing-the-power-of-intelligent-apps">1. Harnessing the power of Intelligent Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/Cloud-Native/60DaysOfIA/kick-off">Kick-off #60Days of IA</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>22 posts tagged with &quot;60-days-of-IA&quot;</h1><a href="/Cloud-Native/60DaysOfIA/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This blog post outlines a step-by-step guide on building such a multichannel notification system with Azure Functions and Azure Communication Services. "><link itemprop="image" href="https://github.com/Azure/Cloud-Native/blob/main/website/static/img/ogImage.png"><meta itemprop="keywords" content="Cloud,Data,AI,AI/ML,intelligent apps,cloud-native,60-days,enterprise apps,digital experiences,app modernization,serverless,ai apps"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-2">6.5 Building a Multichannel Notification System (2)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-01T09:01:00.000Z" itemprop="datePublished">April 1, 2024</time> ¬∑ <!-- -->17 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://azure.github.io/Cloud-Native/img/logo-2024.png" alt="#60Days Of IA" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://azure.github.io/Cloud-Native/Build-IA/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">#60Days Of IA</span></a></div><small class="avatar__subtitle" itemprop="description">BuildIA Content Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-a-multichannel-notification-system-with-azure-functions-and-azure-communication-services2">Building a Multichannel Notification System with Azure Functions and Azure Communication Services‚ÄØ(2)<a href="#building-a-multichannel-notification-system-with-azure-functions-and-azure-communication-services2" class="hash-link" aria-label="Direct link to Building a Multichannel Notification System with Azure Functions and Azure Communication Services‚ÄØ(2)" title="Direct link to Building a Multichannel Notification System with Azure Functions and Azure Communication Services‚ÄØ(2)">‚Äã</a></h2>
<p>In the <a href="https://azure.github.io/Cloud-Native/60DaysOfIA/building-a-multichannel-notification-system-1" target="_blank" rel="noopener noreferrer">first part</a> of this topic, we setup all the Azure resources like the Azure Communication Services for Email, SMS, WhatsApp for Business and developed the Azure Functions code for the email trigger. In this second part, we will complete coding the remaining Azure Functions triggers and then go ahead to deploy the multichannel notification system to Azure Functions, testing the Email, SMS, and WhatsApp triggers with OpenAI GPTs. Let‚Äôs get started!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisite">Prerequisite<a href="#prerequisite" class="hash-link" aria-label="Direct link to Prerequisite" title="Direct link to Prerequisite">‚Äã</a></h3>
<p>To follow this tutorial, ensure you have completed the‚ÄØfirst part of this topic.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="coding-the-smstrigger">Coding the SMSTrigger<a href="#coding-the-smstrigger" class="hash-link" aria-label="Direct link to Coding the SMSTrigger" title="Direct link to Coding the SMSTrigger">‚Äã</a></h3>
<p>Enhancing the <code>SMSTrigger</code> Azure Function from the default template involves a series of steps. These steps will transform the basic Function into one that can send SMS messages using Azure Communication Services. Below is a guide to get you from the default HTTP triggered function to the finished <code>SMSTrigger</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Join the Azure Functions product group for an‚ÄØ<strong><a href="https://aka.ms/intelligent-apps/ate-functions?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Ask The Expert</a></strong>‚ÄØsession on how to build intelligent apps with serverless, top use cases to explore and what is coming next for the Era of AI.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-set-up-the-function-template">Step 1: Set Up the Function Template<a href="#step-1-set-up-the-function-template" class="hash-link" aria-label="Direct link to Step 1: Set Up the Function Template" title="Direct link to Step 1: Set Up the Function Template">‚Äã</a></h4>
<p>Follow the instructions for setting up the function template from the Email section and name the trigger as ‚ÄòSMSTrigger‚Äô or any other string you prefer.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-add-azure-communication-services-sms-reference">Step 2: Add Azure Communication Services SMS Reference<a href="#step-2-add-azure-communication-services-sms-reference" class="hash-link" aria-label="Direct link to Step 2: Add Azure Communication Services SMS Reference" title="Direct link to Step 2: Add Azure Communication Services SMS Reference">‚Äã</a></h4>
<p>Add a reference to using <code>Azure.Communication.Sms</code> then create a property in the SMS Trigger class to hold an instance of <code>SmsClient</code> and a property to hold the email sender address.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private readonly SmsClient _smsClient;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private string? sender = Environment.GetEnvironmentVariable(&quot;SENDER_PHONE_NUMBER&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-read-configuration-and-initialize-smsclient">Step 3: Read Configuration and Initialize SmsClient<a href="#step-3-read-configuration-and-initialize-smsclient" class="hash-link" aria-label="Direct link to Step 3: Read Configuration and Initialize SmsClient" title="Direct link to Step 3: Read Configuration and Initialize SmsClient">‚Äã</a></h4>
<p>In the constructor of the <code>SMSTrigger</code> class, read the Azure Communication Services connection string from the environment variables using the <code>Environment.GetEnvironmentVariable()</code> method and initialize the <code>SmsClient</code> instance.</p>
<p>Be sure to check if the connection string is null, and if so, throw an exception to indicate that the environment variable is missing:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">string? connectionString = Environment.GetEnvironmentVariable(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (connectionString is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throw new InvalidOperationException(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING environment variable is not set.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_smsClient = new SmsClient(connectionString);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-define-the-request-model">Step 4: Define the Request Model<a href="#step-4-define-the-request-model" class="hash-link" aria-label="Direct link to Step 4: Define the Request Model" title="Direct link to Step 4: Define the Request Model">‚Äã</a></h4>
<p>Create a request model class within the <code>SMSTrigger</code> class called <code>SmsRequest</code>. This model should contain properties for the message text and the phone number to which the message will be sent.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SmsRequest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string Message { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string PhoneNumber { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-parse-the-request-body">Step 5: Parse the Request Body<a href="#step-5-parse-the-request-body" class="hash-link" aria-label="Direct link to Step 5: Parse the Request Body" title="Direct link to Step 5: Parse the Request Body">‚Äã</a></h4>
<p>Change the <code>Run</code> function to be <code>async</code> as we will perform asynchronous operations. Use a <code>StreamReader</code> to read the request body as a string and deserialize it into an <code>SmsRequest</code> object using <code>JsonSerializer</code>.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public async Task&lt;IActionResult&gt; Run([HttpTrigger(AuthorizationLevel.Anonymous, &quot;post&quot;)] HttpRequest req)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the request body fails to deserialize into <code>SmsRequest</code>, return a <code>BadRequestResult</code>:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">string requestBody = await new StreamReader(req.Body).ReadToEndAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SmsRequest? data = JsonSerializer.Deserialize&lt;SmsRequest&gt;(requestBody, new JsonSerializerOptions() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PropertyNamingPolicy = JsonNamingPolicy.CamelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (data is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new BadRequestResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-6-define-the-sender-and-send-an-sms">Step 6: Define the Sender and Send an SMS<a href="#step-6-define-the-sender-and-send-an-sms" class="hash-link" aria-label="Direct link to Step 6: Define the Sender and Send an SMS" title="Direct link to Step 6: Define the Sender and Send an SMS">‚Äã</a></h4>
<p>Retrieve the sender&#x27;s phone number from the environment variables with <code>Environment.GetEnvironmentVariable()</code>. Then, attempt to send the SMS with a try-catch block, handling any <code>RequestFailedException</code> that may occur and logging the relevant information:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _logger.LogInformation(&quot;Sending SMS...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SmsSendResult smsSendResult = await _smsClient.SendAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data.PhoneNumber,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data.Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _logger.LogInformation($&quot;SMS Sent. Successful = {smsSendResult.Successful}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _logger.LogInformation($&quot;SMS operation id = {smsSendResult.MessageId}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catch (RequestFailedException ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _logger.LogInformation($&quot;SMS send operation failed with error code: {ex.ErrorCode}, message: {ex.Message}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Return an appropriate error response if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-7-return-a-success-response">Step 7: Return a Success Response<a href="#step-7-return-a-success-response" class="hash-link" aria-label="Direct link to Step 7: Return a Success Response" title="Direct link to Step 7: Return a Success Response">‚Äã</a></h4>
<p>If sending the SMS is successful, return an <code>OkObjectResult</code> to the caller indicating that the SMS has been sent.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return new OkObjectResult(&quot;SMS sent successfully!&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="final-code">Final Code<a href="#final-code" class="hash-link" aria-label="Direct link to Final Code" title="Direct link to Final Code">‚Äã</a></h4>
<p>The final <code>SMSTrigger</code> Azure Function, with the steps implemented, should look as follows:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Http;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.Azure.Functions.Worker;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.Extensions.Logging; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Azure;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Azure.Communication.Messages;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Text.Json;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.IO;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading.Tasks;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Linq;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace ACSGPTFunctions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class WhatsAppTrigger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly ILogger&lt;WhatsAppTrigger&gt; _logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly NotificationMessagesClient _messagesClient;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private string? sender = Environment.GetEnvironmentVariable(&quot;WHATSAPP_NUMBER&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public WhatsAppTrigger(ILogger&lt;WhatsAppTrigger&gt; logger)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger = logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            string? connectionString = Environment.GetEnvironmentVariable(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (connectionString is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new InvalidOperationException(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING environment variable is not set.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _messagesClient = new NotificationMessagesClient(connectionString);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public class WhatsAppRequest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string PhoneNumber { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string TemplateName { get; set; } = &quot;appointment_reminder&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string TemplateLanguage { get; set; } = &quot;en&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public List&lt;string&gt; TemplateParameters { get; set; } = new List&lt;string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Function(&quot;WhatsAppTrigger&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;IActionResult&gt; Run([HttpTrigger(AuthorizationLevel.Function, &quot;get&quot;, &quot;post&quot;)] HttpRequest req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger.LogInformation(&quot;Processing request.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            string requestBody = await new StreamReader(req.Body).ReadToEndAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            WhatsAppRequest? data = JsonSerializer.Deserialize&lt;WhatsAppRequest&gt;(requestBody, new JsonSerializerOptions() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PropertyNamingPolicy = JsonNamingPolicy.CamelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (data is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return new BadRequestResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var recipientList = new List&lt;string&gt; { data.PhoneNumber };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var values = data.TemplateParameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Select((parameter, index) =&gt; new MessageTemplateText($&quot;value{index + 1}&quot;, parameter))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var bindings = new MessageTemplateWhatsAppBindings(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                body: values.Select(value =&gt; value.Name).ToList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var template = new MessageTemplate(data.TemplateName, data.TemplateLanguage, values, bindings);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var sendTemplateMessageOptions = new SendMessageOptions(sender, recipientList, template);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Response&lt;SendMessageResult&gt; templateResponse = await _messagesClient.SendMessageAsync(sendTemplateMessageOptions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogInformation(&quot;WhatsApp message sent successfully!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            catch (RequestFailedException ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogError($&quot;WhatsApp send operation failed with error code: {ex.ErrorCode}, message: {ex.Message}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return new ObjectResult(new { error = ex.Message }) { StatusCode = 500 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new OkObjectResult(&quot;WhatsApp sent successfully!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This completed <code>SMSTrigger</code> Azure Function can now facilitate SMS as part of your multichannel notification system.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="coding-the-whatsapptrigger">Coding the WhatsAppTrigger<a href="#coding-the-whatsapptrigger" class="hash-link" aria-label="Direct link to Coding the WhatsAppTrigger" title="Direct link to Coding the WhatsAppTrigger">‚Äã</a></h3>
<p>Creating a functional <code>WhatsAppTrigger</code> Azure Function involves iterating on the default HTTP-triggered function template provided by Azure Functions for C#. We will modify this template to integrate Azure Communication Services for sending WhatsApp messages via template messages. Follow the steps below to transform this template into a complete <code>WhatsAppTrigger</code> function:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-set-up-the-function-template-1">Step 1: Set Up the Function Template<a href="#step-1-set-up-the-function-template-1" class="hash-link" aria-label="Direct link to Step 1: Set Up the Function Template" title="Direct link to Step 1: Set Up the Function Template">‚Äã</a></h4>
<p>Follow the instructions in the first step for setting up SMS trigger and name the function as <code>WhatsAppTrigger</code>. Set the authorization level to anonymous or function, depending on your security preference.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-reference-the-azure-communication-services-messages-package">Step 2: Reference the Azure Communication Services Messages Package<a href="#step-2-reference-the-azure-communication-services-messages-package" class="hash-link" aria-label="Direct link to Step 2: Reference the Azure Communication Services Messages Package" title="Direct link to Step 2: Reference the Azure Communication Services Messages Package">‚Äã</a></h4>
<p>Ensure the <code>Azure.Communication.Messages</code> NuGet package is included in your project to enable messaging features needed for WhatsApp. Install the package with the following command in Visual Studio Code‚Äôs terminal:</p>
<p><code>bash</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dotnet add package Azure.Communication.Messages --prerelease</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add a reference to using <code>Azure.Communication.Messages</code> then create a property in the <code>WhatsApp</code> Trigger class to hold an instance of <code>NotificationMessagesClient</code> and a property to hold the WhatsApp identifier.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private readonly NotificationMessagesClient _messagesClient;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private string? sender = Environment.GetEnvironmentVariable(&quot;WHATSAPP_NUMBER&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-read-configuration-and-initialize-notificationmessagesclient">Step 3: Read Configuration and Initialize NotificationMessagesClient<a href="#step-3-read-configuration-and-initialize-notificationmessagesclient" class="hash-link" aria-label="Direct link to Step 3: Read Configuration and Initialize NotificationMessagesClient" title="Direct link to Step 3: Read Configuration and Initialize NotificationMessagesClient">‚Äã</a></h4>
<p>Update the <code>WhatsAppTrigger</code> class constructor to read the Azure Communication Services connection string from environment variables using <code>Environment.GetEnvironmentVariable()</code> and initialize <code>NotificationMessagesClient</code> with this connection string:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">string? connectionString = Environment.GetEnvironmentVariable(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (connectionString is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throw new InvalidOperationException(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING environment variable is not set.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_messagesClient = new NotificationMessagesClient(connectionString);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-define-the-request-model-1">Step 4: Define the Request Model<a href="#step-4-define-the-request-model-1" class="hash-link" aria-label="Direct link to Step 4: Define the Request Model" title="Direct link to Step 4: Define the Request Model">‚Äã</a></h4>
<p>Create a request model class named <code>WhatsAppRequest</code> within the <code>WhatsAppTrigger</code> class, containing properties for the destination phone number, template name, language, and template parameters:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class WhatsAppRequest </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string PhoneNumber { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string TemplateName { get; set; } = &quot;appointment_reminder&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string TemplateLanguage { get; set; } = &quot;en&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public List&lt;string&gt; TemplateParameters { get; set; } = new List&lt;string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-parse-the-request-body-1">Step 5: Parse the Request Body<a href="#step-5-parse-the-request-body-1" class="hash-link" aria-label="Direct link to Step 5: Parse the Request Body" title="Direct link to Step 5: Parse the Request Body">‚Äã</a></h4>
<p>Convert the Run function to be <code>async</code> to enable asynchronous work. Use <code>StreamReader</code> to read the request body and deserialize it to a <code>WhatsAppRequest</code> instance using <code>System.Text.Json.JsonSerializer</code> with <code>JsonNamingPolicy.CamelCase</code>.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public async Task&lt;IActionResult&gt; Run([HttpTrigger(AuthorizationLevel.Anonymous, &quot;post&quot;)] HttpRequest req)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Handle potential deserialization failure by returning <code>BadRequestResult</code>:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">string requestBody = await new StreamReader(req.Body).ReadToEndAsync(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WhatsAppRequest? data = JsonSerializer.Deserialize&lt;WhatsAppRequest&gt;(requestBody, new JsonSerializerOptions() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PropertyNamingPolicy = JsonNamingPolicy.CamelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (data is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new BadRequestResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-6-prepare-template-message-and-send-whatsapp-message">Step 6: Prepare Template Message and Send WhatsApp Message<a href="#step-6-prepare-template-message-and-send-whatsapp-message" class="hash-link" aria-label="Direct link to Step 6: Prepare Template Message and Send WhatsApp Message" title="Direct link to Step 6: Prepare Template Message and Send WhatsApp Message">‚Äã</a></h4>
<p>Modify the try-catch block to construct a <code>SendMessageOptions</code> object using <code>MessageTemplateWhatsAppBindingsand MessageTemplate</code>, and then make a call to <code>_messagesClient.SendMessageAsync(sendTemplateMessageOptions)</code>:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _logger.LogInformation(&quot;Sending WhatsApp message...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;string&gt; recipientList = new List&lt;string&gt; { data.PhoneNumber };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;MessageTemplateText&gt; values = data.TemplateParameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .Select((parameter, index) =&gt; new MessageTemplateText($&quot;value{index + 1}&quot;, parameter))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MessageTemplateWhatsAppBindings bindings = new MessageTemplateWhatsAppBindings(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        body: values.Select(value =&gt; value.Name).ToList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MessageTemplate template = new MessageTemplate(data.TemplateName, data.TemplateLanguage, values, bindings);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SendMessageOptions sendTemplateMessageOptions = new SendMessageOptions(sender, recipientList, template);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Response&lt;SendMessageResult&gt; templateResponse = await _messagesClient.SendMessageAsync(sendTemplateMessageOptions); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _logger.LogInformation(&quot;WhatsApp message sent successfully!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catch (RequestFailedException ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _logger.LogError($&quot;WhatsApp send operation failed with error code: {ex.ErrorCode}, message: {ex.Message}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new ObjectResult(new { error = ex.Message }) { StatusCode = 500 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-7-return-success-response">Step 7: Return Success Response<a href="#step-7-return-success-response" class="hash-link" aria-label="Direct link to Step 7: Return Success Response" title="Direct link to Step 7: Return Success Response">‚Äã</a></h4>
<p>After sending the WhatsApp message successfully, return an OkObjectResult stating &quot;WhatsApp sent successfully!&quot;.</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return new OkObjectResult(&quot;WhatsApp sent successfully!&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="final-code-1">Final Code<a href="#final-code-1" class="hash-link" aria-label="Direct link to Final Code" title="Direct link to Final Code">‚Äã</a></h4>
<p>Following the described steps, the final <code>WhatsAppTrigger</code> Azure Function should look like this:</p>
<p><code>csharp</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Http;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.Azure.Functions.Worker;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.Extensions.Logging;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Azure;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Azure.Communication.Messages;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Text.Json;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.IO;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading.Tasks;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Linq;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace ACSGPTFunctions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class WhatsAppTrigger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly ILogger&lt;WhatsAppTrigger&gt; _logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly NotificationMessagesClient _messagesClient;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private string? sender = Environment.GetEnvironmentVariable(&quot;WHATSAPP_NUMBER&quot;); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public WhatsAppTrigger(ILogger&lt;WhatsAppTrigger&gt; logger)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger = logger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            string? connectionString = Environment.GetEnvironmentVariable(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (connectionString is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new InvalidOperationException(&quot;COMMUNICATION_SERVICES_CONNECTION_STRING environment variable is not set.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _messagesClient = new NotificationMessagesClient(connectionString);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public class WhatsAppRequest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string PhoneNumber { get; set; } = string.Empty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string TemplateName { get; set; } = &quot;appointment_reminder&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string TemplateLanguage { get; set; } = &quot;en&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public List&lt;string&gt; TemplateParameters { get; set; } = new List&lt;string&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Function(&quot;WhatsAppTrigger&quot;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;IActionResult&gt; Run([HttpTrigger(AuthorizationLevel.Function, &quot;get&quot;, &quot;post&quot;)] HttpRequest req)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger.LogInformation(&quot;Processing request.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            string requestBody = await new StreamReader(req.Body).ReadToEndAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            WhatsAppRequest? data = JsonSerializer.Deserialize&lt;WhatsAppRequest&gt;(requestBody, new JsonSerializerOptions() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PropertyNamingPolicy = JsonNamingPolicy.CamelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (data is null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return new BadRequestResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var recipientList = new List&lt;string&gt; { data.PhoneNumber };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var values = data.TemplateParameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Select((parameter, index) =&gt; new MessageTemplateText($&quot;value{index + 1}&quot;, parameter))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var bindings = new MessageTemplateWhatsAppBindings(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                body: values.Select(value =&gt; value.Name).ToList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var template = new MessageTemplate(data.TemplateName, data.TemplateLanguage, values, bindings);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var sendTemplateMessageOptions = new SendMessageOptions(sender, recipientList, template); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Response&lt;SendMessageResult&gt; templateResponse = await _messagesClient.SendMessageAsync(sendTemplateMessageOptions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogInformation(&quot;WhatsApp message sent successfully!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            catch (RequestFailedException ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _logger.LogError($&quot;WhatsApp send operation failed with error code: {ex.ErrorCode}, message: {ex.Message}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return new ObjectResult(new { error = ex.Message }) { StatusCode = 500 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new OkObjectResult(&quot;WhatsApp sent successfully!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>WhatsAppTrigger</code> Azure Function is now ready to send WhatsApp template messages. Be sure to test it extensively and remember to handle any issues related to input validation and communicate with the Azure Communication Services API correctly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-and-testing">Deployment and Testing<a href="#deployment-and-testing" class="hash-link" aria-label="Direct link to Deployment and Testing" title="Direct link to Deployment and Testing">‚Äã</a></h3>
<p>After developing the multichannel notification system using Azure Functions, the next step is to deploy and test the functions. This section will guide you through deploying your Azure Function to the cloud and testing the Email, SMS, and WhatsApp triggers.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-azure-function">Deploying the Azure Function<a href="#deploying-the-azure-function" class="hash-link" aria-label="Direct link to Deploying the Azure Function" title="Direct link to Deploying the Azure Function">‚Äã</a></h4>
<p>Deployment of your Azure Function can be done right from Visual Studio Code with the Azure Functions extension.</p>
<ol>
<li><strong>Publish the Function App</strong>: In Visual Studio Code, sign in to Azure if you haven&#x27;t already. In the Azure Functions extension tab, find the &#x27;Deploy to Function App...&#x27; button and select it.</li>
</ol>
<p><img loading="lazy" alt="image of the Deploy to Function App button" src="/Cloud-Native/assets/images/6-5-1-8fc01b3fc14153269c6245c829a0bfde.png" width="581" height="334" class="img_ev3q"></p>
<ol>
<li><strong>Choose Your Function App</strong>: You can either create a new Function App or deploy it to an existing one. If it&#x27;s the first time you are deploying, choose &#x27;Create New Function App in Azure...&#x27;.</li>
<li><strong>Set the Configuration</strong>: Provide a unique name for your Function App, select a runtime stack (.NET Core in this case), choose the appropriate region, and confirm your selections.</li>
<li><strong>Wait for Deployment</strong>: The deployment process will take a few minutes. Monitor the output window for completion status and any potential errors.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-application-settings">Set Up Application Settings<a href="#set-up-application-settings" class="hash-link" aria-label="Direct link to Set Up Application Settings" title="Direct link to Set Up Application Settings">‚Äã</a></h4>
<p>fter deployment, you need to configure the application settings (environment variables) in Azure.</p>
<ol>
<li><strong>Open the Function App</strong>: Navigate to the <a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer">Azure Portal</a>, and find your Function App under &#x27;All Resources&#x27; or by searching the name you provided.</li>
<li><strong>Access Application Settings</strong>: In the Function App&#x27;s menu, go to &#x27;Configuration&#x27; under the &#x27;Settings&#x27; section.</li>
<li><strong>Add the Settings</strong>: Click on &#x27;New application setting&#x27; and add the key-value pairs for the environment variables specified in your <code>local.settings.json</code>: <code>COMMUNICATION_SERVICES_CONNECTION_STRING</code>, <code>SENDER_EMAIL_ADDRESS</code>, <code>SENDER_PHONE_NUMBER</code>, <code>WHATSAPP_NUMBER</code>, etc.,</li>
</ol>
<p><code>json</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;IsEncrypted&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Values&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;AzureWebJobsStorage&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;FUNCTIONS_WORKER_RUNTIME&quot;: &quot;dotnet-isolated&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;COMMUNICATION_SERVICES_CONNECTION_STRING&quot;: &quot;&lt;&lt;connection string&gt;&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SENDER_PHONE_NUMBER&quot;: &quot;&lt;&lt;phone number&gt;&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SENDER_EMAIL_ADDRESS&quot;: &quot;&lt;&lt;email address&gt;&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;WHATSAPP_NUMBER&quot;:&quot;&lt;&lt;WhatsApp id&gt;&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li><strong>Save and Restart</strong>: After adding the required settings, make sure to save the configurations and restart the Function App to ensure the new settings take effect.</li>
</ol>
<p>Alternatively, when the Function has finished deploying, you can click on &#x27;Upload settings&#x27; to upload your settings from local.settings.json. Don&#x27;t forget to restart the Function App after uploading the settings.</p>
<p><img loading="lazy" alt="image of stream logs settings selection" src="/Cloud-Native/assets/images/6-5-2-d3f46febc18e88821716f16cae217c36.png" width="560" height="49" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-function">Testing the Function<a href="#testing-the-function" class="hash-link" aria-label="Direct link to Testing the Function" title="Direct link to Testing the Function">‚Äã</a></h4>
<p>With the deployment complete and the environment configured, it&#x27;s time to verify that your function works as intended through each communication channel.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="testing-email-notifications">Testing Email Notifications<a href="#testing-email-notifications" class="hash-link" aria-label="Direct link to Testing Email Notifications" title="Direct link to Testing Email Notifications">‚Äã</a></h5>
<p>To test the <code>EmailTrigger</code> function:</p>
<ol>
<li><strong>Send an HTTP POST Request</strong>: Use a tool like Postman to send a POST request to the Function App&#x27;s URL suffixed with <code>/api/EmailTrigger</code>. The body should contain JSON with keys for <code>subject</code>, <code>htmlContent</code>, and <code>recipient</code>.</li>
<li><strong>Verify Email Receipt</strong>: Check the recipient&#x27;s email inbox for the message. Ensure that the subject and content match what you sent through the POST request.</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="testing-sms-notifications">Testing SMS Notifications<a href="#testing-sms-notifications" class="hash-link" aria-label="Direct link to Testing SMS Notifications" title="Direct link to Testing SMS Notifications">‚Äã</a></h5>
<p>To test the <code>SMSTrigger</code> function:</p>
<ol>
<li><strong>Send an HTTP POST Request</strong>: Using Postman, send a POST request to the Function App&#x27;s URL with <code>/api/SMSTrigger</code> at the end. The body of your request should contain JSON with <code>message</code> and <code>phoneNumberkeys</code>.</li>
<li><strong>Check for SMS</strong>: Ensure that the specified phone number receives the SMS and the message content matches the request.</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="testing-whatsapp-notifications">Testing WhatsApp Notifications<a href="#testing-whatsapp-notifications" class="hash-link" aria-label="Direct link to Testing WhatsApp Notifications" title="Direct link to Testing WhatsApp Notifications">‚Äã</a></h5>
<p>To test the <code>WhatsAppTrigger</code> function:</p>
<ol>
<li><strong>Send an HTTP POST Request</strong>: Use Postman again to POST to the Function URL, this time ending with <code>/api/WhatsAppTrigger</code>. Include a JSON body with keys for <code>phoneNumber</code>, <code>templateName</code>, <code>templateLanguage</code>, and <code>templateParameters</code>.</li>
<li><strong>Confirm WhatsApp Message</strong>: Verify that the WhatsApp message reaches the intended recipient with correct template filling.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integrate-with-openai-gpts">Integrate with OpenAI GPTs<a href="#integrate-with-openai-gpts" class="hash-link" aria-label="Direct link to Integrate with OpenAI GPTs" title="Direct link to Integrate with OpenAI GPTs">‚Äã</a></h3>
<p>In <a href="https://chat.openai.com/gpts/editor" target="_blank" rel="noopener noreferrer">OpenAI GPTs editor</a>, click &#x27;new GPT&#x27; and &#x27;configure&#x27;. Name it &quot;Email Sender&quot; and set the description and instructions as mentioned.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Compose wonderful emails and send them</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Help author short and delightful emails. Ask for details on the nature of the email content and include creative ideas for topics. Compose the email with placeholders for the sender&#x27;s name and receiver&#x27;s name. You do not need a full name. Share a draft of the email and ask for the sender&#x27;s name, and the receiver&#x27;s name and email address. Provide a draft of the final email and confirm the user is happy with it. When the user provides a recipient&#x27;s email address ask if it is correct before sending. Do not send the email until you provide a final draft and you have a confirmed recipient email address.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image of email composer in Chat GPT configuration" src="/Cloud-Native/assets/images/6-5-3-cb3344755c9816b5839a243b440d5323.png" width="560" height="358" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-actions-and-json-schema">Add Actions and JSON Schema<a href="#add-actions-and-json-schema" class="hash-link" aria-label="Direct link to Add Actions and JSON Schema" title="Direct link to Add Actions and JSON Schema">‚Äã</a></h3>
<p>Click &#x27;Create new action&#x27; in your GPT configuration. Enter the following JSON:</p>
<p><code>json</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;openapi&quot;: &quot;3.1.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;info&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;title&quot;: &quot;Send Message API&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;description&quot;: &quot;API for sending a message to a specified email address.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;version&quot;: &quot;v1.0.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;servers&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;url&quot;: &quot;https://&lt;&lt;function-app-url&gt;&gt;.azurewebsites.net&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;paths&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;/api/emailtrigger&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;post&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;description&quot;: &quot;Send a message to a given email address&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;operationId&quot;: &quot;SendMessage&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;requestBody&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;required&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;content&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;application/json&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;schema&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;recipient&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;format&quot;: &quot;email&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;description&quot;: &quot;Email address of the recipient&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;subject&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;description&quot;: &quot;The message subject&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;htmlContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;description&quot;: &quot;The body content of the email encoded as escaped HTML&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;required&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;to&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;message&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;deprecated&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;components&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;schemas&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Leave Authentication to none, and Privacy Policy blank.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-your-gpt">Test Your GPT<a href="#test-your-gpt" class="hash-link" aria-label="Direct link to Test Your GPT" title="Direct link to Test Your GPT">‚Äã</a></h3>
<p>Finally, try out your GPT in the preview pane to see it in action!</p>
<p>By following these steps, you can easily integrate Azure Communication Services with OpenAI GPTs to send emails effortlessly.</p>
<p><img loading="lazy" alt="image of email composer in Chat GPT results" src="/Cloud-Native/assets/images/6-5-4-dc2c1bb9b81fedd5144717636e336f18.png" width="560" height="350" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion-and-further-reading">Conclusion and Further Reading<a href="#conclusion-and-further-reading" class="hash-link" aria-label="Direct link to Conclusion and Further Reading" title="Direct link to Conclusion and Further Reading">‚Äã</a></h3>
<p>We have successfully walked through the journey of building a serverless multichannel notification system using Azure Functions and Azure Communication Services. This system can send timely and personalized notifications across multiple channels, such as Email, SMS, and WhatsApp. In addition, we have explored how to enhance our system with sophisticated content generation capabilities using OpenAI GPTs.</p>
<p>The modular nature of the Azure Functions framework allows your application to scale and adapt easily to changing requirements and traffic demands. Meanwhile, Azure Communication Services enrich the user experience by meeting customers on their preferred platforms, contributing to a seamless and cohesive communication strategy.</p>
<p>As developers, there&#x27;s always room to expand our knowledge and add robust features to our applications. Here are some suggestions for further exploration and resources that can assist you in taking your applications to the next level:</p>
<ol>
<li><strong>Azure Communication Services AI samples</strong>: One stop shop for GitHub samples for <a href="https://aka.ms/acs-ai-index?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">AI-powered communication solutions</a>.</li>
<li><strong>Azure Functions Best Practices</strong>: Learn about best practices for designing and implementing Azure Functions by visiting <a href="https://docs.microsoft.com/azure/azure-functions/functions-best-practices?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Functions best practices</a>.</li>
<li><strong>Azure Communication Services Documentation</strong>: Explore the full capabilities of Azure Communication Services including chat, phone numbers, video calling, and more on the <a href="https://docs.microsoft.com/azure/communication-services/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Communication Services documentation</a>.</li>
<li><strong>Security and Compliance in Azure</strong>: Understand the best practices for security and compliance in Azure applications, particularly relevant for handling sensitive user communication data. Check the <a href="https://azure.microsoft.com/support/trust-center/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Microsoft Azure Trust Center</a>.</li>
<li><strong>OpenAI GPT Documentation</strong>: For more insight into using and customizing OpenAI GPTs, refer to the <a href="https://beta.openai.com/docs/" target="_blank" rel="noopener noreferrer">OpenAI API documentation</a>.</li>
<li><strong>Azure AI Services</strong>: Azure offers a range of AI services beyond just communication. Explore Azure AI services for more advanced scenarios such as speech recognition, machine translation, and anomaly detection at <a href="https://learn.microsoft.com/azure/ai-services/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure AI services documentation</a>.</li>
<li><strong>Handling Large-scale Data</strong>: To handle a large amount of data and improve the performance of communication systems, consider learning about Azure&#x27;s data-handling services like Azure Cosmos DB, Azure SQL Database, and Azure Cache for Redis. Start with the <a href="https://docs.microsoft.com/azure/storage/?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Data storage documentation</a>.</li>
<li><strong>Monitoring and Diagnostics</strong>: Improve the reliability of your applications by implementing robust monitoring and diagnostics tools. Azure offers several tools such as Azure Monitor and Application Insights. Dive into <a href="https://docs.microsoft.com/azure/azure-functions/functions-monitoring?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Application Insights for Azure Functions</a>.</li>
<li><strong>Serverless Workflow Automation with Azure Logic Apps</strong>: Enhance your serverless applications using Azure Logic Apps to automate and simplify workflows. Learn more about Azure Logic Apps at <a href="https://docs.microsoft.com/azure/logic-apps/logic-apps-overview?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">What is Azure Logic Apps?</a>.</li>
</ol>
<p>We encourage you to continue exploring and experimenting with Azure services and OpenAI GPTs to build more personalized and efficient communication solutions. Get your hands on the newly released‚ÄØ<a href="https://aka.ms/flexconsumption/signup?ocid=buildia24_60days_blogs" target="_blank" rel="noopener noreferrer">Azure Functions Flex Consumption Plan</a>‚ÄØfor private networking, instance size selection, concurrency control, and fast and large scale out features on a serverless compute model. Happy coding!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/build-intelligent-apps">Build-Intelligent-Apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/60-days-of-ia">60-days-of-IA</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/learn-live">learn-live</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/hack-together">hack-together</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/community-buzz">community-buzz</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/ask-the-expert">ask-the-expert</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-kubernetes-service">azure-kubernetes-service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-functions">azure-functions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-openai">azure-openai</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-container-apps">azure-container-apps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/azure-cosmos-db">azure-cosmos-db</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-copilot">github-copilot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-codespaces">github-codespaces</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/Cloud-Native/60DaysOfIA/tags/github-actions">github-actions</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/Cloud-Native/60DaysOfIA/tags/60-days-of-ia/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://learn.microsoft.com/ai?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">AI</a><span class="footer__link-separator">¬∑</span><a href="https://azure.microsoft.com/solutions/cloud-native-apps/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud-Native</a><span class="footer__link-separator">¬∑</span><a href="https://azure.microsoft.com/solutions/serverless/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Serverless</a><span class="footer__link-separator">¬∑</span><a href="https://aka.ms/CNNY/collection?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Collection</a><span class="footer__link-separator">¬∑</span><a href="https://developer.microsoft.com/java/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Java</a><span class="footer__link-separator">¬∑</span><a href="https://docs.microsoft.com/javascript/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">JavaScript</a><span class="footer__link-separator">¬∑</span><a href="https://dotnet.microsoft.com/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">.NET</a><span class="footer__link-separator">¬∑</span><a href="https://docs.microsoft.com/azure/developer/python/?ocid=buildia24_website" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python</a></div></div></div></footer><footer><div></div></footer></div>
</body>
</html>